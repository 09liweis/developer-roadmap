import{c as si}from"./createLucideIcon.BBd35SSe.js";import{r as _,g as ii,R as $}from"./index.SSXOyoI7.js";import"./index.v_sgd_GK.js";/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=si("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),ai="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let mn=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=ai[n[e]&63];return t};function de(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=de(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var rr={exports:{}},sr={},ir={exports:{}},ar={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ut=_;function ci(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var li=typeof Object.is=="function"?Object.is:ci,ui=ut.useState,di=ut.useEffect,fi=ut.useLayoutEffect,hi=ut.useDebugValue;function pi(e,t){var n=t(),o=ui({inst:{value:n,getSnapshot:t}}),r=o[0].inst,i=o[1];return fi(function(){r.value=n,r.getSnapshot=t,yn(r)&&i({inst:r})},[e,n,t]),di(function(){return yn(r)&&i({inst:r}),e(function(){yn(r)&&i({inst:r})})},[e]),hi(n),n}function yn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!li(e,n)}catch{return!0}}function gi(e,t){return t()}var mi=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gi:pi;ar.useSyncExternalStore=ut.useSyncExternalStore!==void 0?ut.useSyncExternalStore:mi;ir.exports=ar;var yi=ir.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rn=_,xi=yi;function wi(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vi=typeof Object.is=="function"?Object.is:wi,Si=xi.useSyncExternalStore,Ei=rn.useRef,bi=rn.useEffect,_i=rn.useMemo,Ni=rn.useDebugValue;sr.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var i=Ei(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=_i(function(){function c(p){if(!u){if(u=!0,l=p,p=o(p),r!==void 0&&s.hasValue){var x=s.value;if(r(x,p))return d=x}return d=p}if(x=d,vi(l,p))return x;var m=o(p);return r!==void 0&&r(x,m)?x:(l=p,d=m)}var u=!1,l,d,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,o,r]);var a=Si(e,i[0],i[1]);return bi(function(){s.hasValue=!0,s.value=a},[a]),Ni(a),a};rr.exports=sr;var Mi=rr.exports;const Ci=ii(Mi),uo=e=>{let t;const n=new Set,o=(l,d)=>{const h=typeof l=="function"?l(t):l;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,p))}},r=()=>t,c={setState:o,getState:r,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{n.clear()}},u=t=e(o,r,c);return c},Ai=e=>e?uo(e):uo,{useDebugValue:ki}=$,{useSyncExternalStoreWithSelector:Ti}=Ci,$i=e=>e;function cr(e,t=$i,n){const o=Ti(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ki(o),o}const fo=(e,t)=>{const n=Ai(e),o=(r,i=t)=>cr(n,r,i);return Object.assign(o,n),o},Xn=(e,t)=>e?fo(e,t):fo;function re(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var Ii={value:()=>{}};function sn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Yt(n)}function Yt(e){this._=e}function Ri(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Yt.prototype=sn.prototype={constructor:Yt,on:function(e,t){var n=this._,o=Ri(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=zi(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=ho(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ho(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function zi(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function ho(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Ii,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cn="http://www.w3.org/1999/xhtml";const po={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function an(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),po.hasOwnProperty(t)?{space:po[t],local:e}:e}function Pi(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cn&&t.documentElement.namespaceURI===Cn?t.createElement(e):t.createElementNS(n,e)}}function Di(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lr(e){var t=an(e);return(t.local?Di:Pi)(t)}function Hi(){}function Un(e){return e==null?Hi:function(){return this.querySelector(e)}}function Li(e){typeof e!="function"&&(e=Un(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),c,u,l=0;l<s;++l)(c=i[l])&&(u=e.call(c,c.__data__,l,i))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new ce(o,this._parents)}function Oi(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Vi(){return[]}function ur(e){return e==null?Vi:function(){return this.querySelectorAll(e)}}function Fi(e){return function(){return Oi(e.apply(this,arguments))}}function Bi(e){typeof e=="function"?e=Fi(e):e=ur(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(o.push(e.call(c,c.__data__,u,s)),r.push(c));return new ce(o,r)}function dr(e){return function(){return this.matches(e)}}function fr(e){return function(t){return t.matches(e)}}var Xi=Array.prototype.find;function Ui(e){return function(){return Xi.call(this.children,e)}}function Yi(){return this.firstElementChild}function qi(e){return this.select(e==null?Yi:Ui(typeof e=="function"?e:fr(e)))}var Zi=Array.prototype.filter;function Wi(){return Array.from(this.children)}function Gi(e){return function(){return Zi.call(this.children,e)}}function Ki(e){return this.selectAll(e==null?Wi:Gi(typeof e=="function"?e:fr(e)))}function Qi(e){typeof e!="function"&&(e=dr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new ce(o,this._parents)}function hr(e){return new Array(e.length)}function Ji(){return new ce(this._enter||this._groups.map(hr),this._parents)}function Gt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Gt.prototype={constructor:Gt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ji(e){return function(){return e}}function ea(e,t,n,o,r,i){for(var s=0,a,c=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Gt(e,i[s]);for(;s<c;++s)(a=t[s])&&(r[s]=a)}function ta(e,t,n,o,r,i,s){var a,c,u=new Map,l=t.length,d=i.length,h=new Array(l),p;for(a=0;a<l;++a)(c=t[a])&&(h[a]=p=s.call(c,c.__data__,a,t)+"",u.has(p)?r[a]=c:u.set(p,c));for(a=0;a<d;++a)p=s.call(e,i[a],a,i)+"",(c=u.get(p))?(o[a]=c,c.__data__=i[a],u.delete(p)):n[a]=new Gt(e,i[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(h[a])===c&&(r[a]=c)}function na(e){return e.__data__}function oa(e,t){if(!arguments.length)return Array.from(this,na);var n=t?ta:ea,o=this._parents,r=this._groups;typeof e!="function"&&(e=ji(e));for(var i=r.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var l=o[u],d=r[u],h=d.length,p=ra(e.call(l,l&&l.__data__,u,o)),x=p.length,m=a[u]=new Array(x),v=s[u]=new Array(x),g=c[u]=new Array(h);n(l,d,m,v,g,p,t);for(var E=0,N=0,y,A;E<x;++E)if(y=m[E]){for(E>=N&&(N=E+1);!(A=v[N])&&++N<x;);y._next=A||null}}return s=new ce(s,o),s._enter=a,s._exit=c,s}function ra(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sa(){return new ce(this._exit||this._groups.map(hr),this._parents)}function ia(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function aa(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),c=0;c<s;++c)for(var u=n[c],l=o[c],d=u.length,h=a[c]=new Array(d),p,x=0;x<d;++x)(p=u[x]||l[x])&&(h[x]=p);for(;c<r;++c)a[c]=n[c];return new ce(a,this._parents)}function ca(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function la(e){e||(e=ua);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,c=r[i]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(t)}return new ce(r,this._parents).order()}function ua(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function da(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fa(){return Array.from(this)}function ha(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function pa(){let e=0;for(const t of this)++e;return e}function ga(){return!this.node()}function ma(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function ya(e){return function(){this.removeAttribute(e)}}function xa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wa(e,t){return function(){this.setAttribute(e,t)}}function va(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Sa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ea(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ba(e,t){var n=an(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?xa:ya:typeof t=="function"?n.local?Ea:Sa:n.local?va:wa)(n,t))}function pr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _a(e){return function(){this.style.removeProperty(e)}}function Na(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ma(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ca(e,t,n){return arguments.length>1?this.each((t==null?_a:typeof t=="function"?Ma:Na)(e,t,n??"")):dt(this.node(),e)}function dt(e,t){return e.style.getPropertyValue(t)||pr(e).getComputedStyle(e,null).getPropertyValue(t)}function Aa(e){return function(){delete this[e]}}function ka(e,t){return function(){this[e]=t}}function Ta(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $a(e,t){return arguments.length>1?this.each((t==null?Aa:typeof t=="function"?Ta:ka)(e,t)):this.node()[e]}function gr(e){return e.trim().split(/^|\s+/)}function Yn(e){return e.classList||new mr(e)}function mr(e){this._node=e,this._names=gr(e.getAttribute("class")||"")}mr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yr(e,t){for(var n=Yn(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function xr(e,t){for(var n=Yn(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Ia(e){return function(){yr(this,e)}}function Ra(e){return function(){xr(this,e)}}function za(e,t){return function(){(t.apply(this,arguments)?yr:xr)(this,e)}}function Pa(e,t){var n=gr(e+"");if(arguments.length<2){for(var o=Yn(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?za:t?Ia:Ra)(n,t))}function Da(){this.textContent=""}function Ha(e){return function(){this.textContent=e}}function La(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Oa(e){return arguments.length?this.each(e==null?Da:(typeof e=="function"?La:Ha)(e)):this.node().textContent}function Va(){this.innerHTML=""}function Fa(e){return function(){this.innerHTML=e}}function Ba(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Xa(e){return arguments.length?this.each(e==null?Va:(typeof e=="function"?Ba:Fa)(e)):this.node().innerHTML}function Ua(){this.nextSibling&&this.parentNode.appendChild(this)}function Ya(){return this.each(Ua)}function qa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Za(){return this.each(qa)}function Wa(e){var t=typeof e=="function"?e:lr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ga(){return null}function Ka(e,t){var n=typeof e=="function"?e:lr(e),o=t==null?Ga:typeof t=="function"?t:Un(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Qa(){var e=this.parentNode;e&&e.removeChild(this)}function Ja(){return this.each(Qa)}function ja(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ec(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tc(e){return this.select(e?ec:ja)}function nc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function oc(e){return function(t){e.call(this,t,this.__data__)}}function rc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function sc(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function ic(e,t,n){return function(){var o=this.__on,r,i=oc(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ac(e,t,n){var o=rc(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(r=0,l=a[c];r<i;++r)if((s=o[r]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?ic:sc,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function wr(e,t,n){var o=pr(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function cc(e,t){return function(){return wr(this,e,t)}}function lc(e,t){return function(){return wr(this,e,t.apply(this,arguments))}}function uc(e,t){return this.each((typeof t=="function"?lc:cc)(e,t))}function*dc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var vr=[null];function ce(e,t){this._groups=e,this._parents=t}function Rt(){return new ce([[document.documentElement]],vr)}function fc(){return this}ce.prototype=Rt.prototype={constructor:ce,select:Li,selectAll:Bi,selectChild:qi,selectChildren:Ki,filter:Qi,data:oa,enter:Ji,exit:sa,join:ia,merge:aa,selection:fc,order:ca,sort:la,call:da,nodes:fa,node:ha,size:pa,empty:ga,each:ma,attr:ba,style:Ca,property:$a,classed:Pa,text:Oa,html:Xa,raise:Ya,lower:Za,append:Wa,insert:Ka,remove:Ja,clone:tc,datum:nc,on:ac,dispatch:uc,[Symbol.iterator]:dc};function pe(e){return typeof e=="string"?new ce([[document.querySelector(e)]],[document.documentElement]):new ce([[e]],vr)}function hc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Se(e,t){if(e=hc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const pc={passive:!1},Nt={capture:!0,passive:!1};function xn(e){e.stopImmediatePropagation()}function it(e){e.preventDefault(),e.stopImmediatePropagation()}function Sr(e){var t=e.document.documentElement,n=pe(e).on("dragstart.drag",it,Nt);"onselectstart"in t?n.on("selectstart.drag",it,Nt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Er(e,t){var n=e.document.documentElement,o=pe(e).on("dragstart.drag",null);t&&(o.on("click.drag",it,Nt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Dt=e=>()=>e;function An(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}An.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gc(e){return!e.ctrlKey&&!e.button}function mc(){return this.parentNode}function yc(e,t){return t??{x:e.x,y:e.y}}function xc(){return navigator.maxTouchPoints||"ontouchstart"in this}function wc(){var e=gc,t=mc,n=yc,o=xc,r={},i=sn("start","drag","end"),s=0,a,c,u,l,d=0;function h(y){y.on("mousedown.drag",p).filter(o).on("touchstart.drag",v).on("touchmove.drag",g,pc).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(y,A){if(!(l||!e.call(this,y,A))){var k=N(this,t.call(this,y,A),y,A,"mouse");k&&(pe(y.view).on("mousemove.drag",x,Nt).on("mouseup.drag",m,Nt),Sr(y.view),xn(y),u=!1,a=y.clientX,c=y.clientY,k("start",y))}}function x(y){if(it(y),!u){var A=y.clientX-a,k=y.clientY-c;u=A*A+k*k>d}r.mouse("drag",y)}function m(y){pe(y.view).on("mousemove.drag mouseup.drag",null),Er(y.view,u),it(y),r.mouse("end",y)}function v(y,A){if(e.call(this,y,A)){var k=y.changedTouches,D=t.call(this,y,A),I=k.length,R,O;for(R=0;R<I;++R)(O=N(this,D,y,A,k[R].identifier,k[R]))&&(xn(y),O("start",y,k[R]))}}function g(y){var A=y.changedTouches,k=A.length,D,I;for(D=0;D<k;++D)(I=r[A[D].identifier])&&(it(y),I("drag",y,A[D]))}function E(y){var A=y.changedTouches,k=A.length,D,I;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),D=0;D<k;++D)(I=r[A[D].identifier])&&(xn(y),I("end",y,A[D]))}function N(y,A,k,D,I,R){var O=i.copy(),H=Se(R||k,A),V,z,f;if((f=n.call(y,new An("beforestart",{sourceEvent:k,target:h,identifier:I,active:s,x:H[0],y:H[1],dx:0,dy:0,dispatch:O}),D))!=null)return V=f.x-H[0]||0,z=f.y-H[1]||0,function b(S,C,P){var w=H,T;switch(S){case"start":r[I]=b,T=s++;break;case"end":delete r[I],--s;case"drag":H=Se(P||C,A),T=s;break}O.call(S,y,new An(S,{sourceEvent:C,subject:f,target:h,identifier:I,active:T,x:H[0]+V,y:H[1]+z,dx:H[0]-w[0],dy:H[1]-w[1],dispatch:O}),D)}}return h.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Dt(!!y),h):e},h.container=function(y){return arguments.length?(t=typeof y=="function"?y:Dt(y),h):t},h.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Dt(y),h):n},h.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:Dt(!!y),h):o},h.on=function(){var y=i.on.apply(i,arguments);return y===i?h:y},h.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,h):Math.sqrt(d)},h}function qn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function br(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function zt(){}var Mt=.7,Kt=1/Mt,at="\\s*([+-]?\\d+)\\s*",Ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vc=/^#([0-9a-f]{3,8})$/,Sc=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),Ec=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),bc=new RegExp(`^rgba\\(${at},${at},${at},${Ct}\\)$`),_c=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${Ct}\\)$`),Nc=new RegExp(`^hsl\\(${Ct},${Ee},${Ee}\\)$`),Mc=new RegExp(`^hsla\\(${Ct},${Ee},${Ee},${Ct}\\)$`),go={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qn(zt,At,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mo,formatHex:mo,formatHex8:Cc,formatHsl:Ac,formatRgb:yo,toString:yo});function mo(){return this.rgb().formatHex()}function Cc(){return this.rgb().formatHex8()}function Ac(){return _r(this).formatHsl()}function yo(){return this.rgb().formatRgb()}function At(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xo(t):n===3?new se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ht(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ht(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Sc.exec(e))?new se(t[1],t[2],t[3],1):(t=Ec.exec(e))?new se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bc.exec(e))?Ht(t[1],t[2],t[3],t[4]):(t=_c.exec(e))?Ht(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nc.exec(e))?So(t[1],t[2]/100,t[3]/100,1):(t=Mc.exec(e))?So(t[1],t[2]/100,t[3]/100,t[4]):go.hasOwnProperty(e)?xo(go[e]):e==="transparent"?new se(NaN,NaN,NaN,0):null}function xo(e){return new se(e>>16&255,e>>8&255,e&255,1)}function Ht(e,t,n,o){return o<=0&&(e=t=n=NaN),new se(e,t,n,o)}function kc(e){return e instanceof zt||(e=At(e)),e?(e=e.rgb(),new se(e.r,e.g,e.b,e.opacity)):new se}function kn(e,t,n,o){return arguments.length===1?kc(e):new se(e,t,n,o??1)}function se(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}qn(se,kn,br(zt,{brighter(e){return e=e==null?Kt:Math.pow(Kt,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mt:Math.pow(Mt,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new se(qe(this.r),qe(this.g),qe(this.b),Qt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wo,formatHex:wo,formatHex8:Tc,formatRgb:vo,toString:vo}));function wo(){return`#${Ue(this.r)}${Ue(this.g)}${Ue(this.b)}`}function Tc(){return`#${Ue(this.r)}${Ue(this.g)}${Ue(this.b)}${Ue((isNaN(this.opacity)?1:this.opacity)*255)}`}function vo(){const e=Qt(this.opacity);return`${e===1?"rgb(":"rgba("}${qe(this.r)}, ${qe(this.g)}, ${qe(this.b)}${e===1?")":`, ${e})`}`}function Qt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ue(e){return e=qe(e),(e<16?"0":"")+e.toString(16)}function So(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ge(e,t,n,o)}function _r(e){if(e instanceof ge)return new ge(e.h,e.s,e.l,e.opacity);if(e instanceof zt||(e=At(e)),!e)return new ge;if(e instanceof ge)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,c=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+r:2-i-r,s*=60):a=c>0&&c<1?0:s,new ge(s,a,c,e.opacity)}function $c(e,t,n,o){return arguments.length===1?_r(e):new ge(e,t,n,o??1)}function ge(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}qn(ge,$c,br(zt,{brighter(e){return e=e==null?Kt:Math.pow(Kt,e),new ge(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mt:Math.pow(Mt,e),new ge(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new se(wn(e>=240?e-240:e+120,r,o),wn(e,r,o),wn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ge(Eo(this.h),Lt(this.s),Lt(this.l),Qt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qt(this.opacity);return`${e===1?"hsl(":"hsla("}${Eo(this.h)}, ${Lt(this.s)*100}%, ${Lt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Eo(e){return e=(e||0)%360,e<0?e+360:e}function Lt(e){return Math.max(0,Math.min(1,e||0))}function wn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Nr=e=>()=>e;function Ic(e,t){return function(n){return e+n*t}}function Rc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function zc(e){return(e=+e)==1?Mr:function(t,n){return n-t?Rc(t,n,e):Nr(isNaN(t)?n:t)}}function Mr(e,t){var n=t-e;return n?Ic(e,n):Nr(isNaN(e)?t:e)}const bo=function e(t){var n=zc(t);function o(r,i){var s=n((r=kn(r)).r,(i=kn(i)).r),a=n(r.g,i.g),c=n(r.b,i.b),u=Mr(r.opacity,i.opacity);return function(l){return r.r=s(l),r.g=a(l),r.b=c(l),r.opacity=u(l),r+""}}return o.gamma=e,o}(1);function $e(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Tn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vn=new RegExp(Tn.source,"g");function Pc(e){return function(){return e}}function Dc(e){return function(t){return e(t)+""}}function Hc(e,t){var n=Tn.lastIndex=vn.lastIndex=0,o,r,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(o=Tn.exec(e))&&(r=vn.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,c.push({i:s,x:$e(o,r)})),n=vn.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?Dc(c[0].x):Pc(t):(t=c.length,function(u){for(var l=0,d;l<t;++l)a[(d=c[l]).i]=d.x(u);return a.join("")})}var _o=180/Math.PI,$n={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cr(e,t,n,o,r,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),e*o<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*_o,skewX:Math.atan(c)*_o,scaleX:s,scaleY:a}}var Ot;function Lc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$n:Cr(t.a,t.b,t.c,t.d,t.e,t.f)}function Oc(e){return e==null||(Ot||(Ot=document.createElementNS("http://www.w3.org/2000/svg","g")),Ot.setAttribute("transform",e),!(e=Ot.transform.baseVal.consolidate()))?$n:(e=e.matrix,Cr(e.a,e.b,e.c,e.d,e.e,e.f))}function Ar(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,l,d,h,p,x){if(u!==d||l!==h){var m=p.push("translate(",null,t,null,n);x.push({i:m-4,x:$e(u,d)},{i:m-2,x:$e(l,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function s(u,l,d,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:d.push(r(d)+"rotate(",null,o)-2,x:$e(u,l)})):l&&d.push(r(d)+"rotate("+l+o)}function a(u,l,d,h){u!==l?h.push({i:d.push(r(d)+"skewX(",null,o)-2,x:$e(u,l)}):l&&d.push(r(d)+"skewX("+l+o)}function c(u,l,d,h,p,x){if(u!==d||l!==h){var m=p.push(r(p)+"scale(",null,",",null,")");x.push({i:m-4,x:$e(u,d)},{i:m-2,x:$e(l,h)})}else(d!==1||h!==1)&&p.push(r(p)+"scale("+d+","+h+")")}return function(u,l){var d=[],h=[];return u=e(u),l=e(l),i(u.translateX,u.translateY,l.translateX,l.translateY,d,h),s(u.rotate,l.rotate,d,h),a(u.skewX,l.skewX,d,h),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,d,h),u=l=null,function(p){for(var x=-1,m=h.length,v;++x<m;)d[(v=h[x]).i]=v.x(p);return d.join("")}}}var Vc=Ar(Lc,"px, ","px)","deg)"),Fc=Ar(Oc,", ",")",")"),Bc=1e-12;function No(e){return((e=Math.exp(e))+1/e)/2}function Xc(e){return((e=Math.exp(e))-1/e)/2}function Uc(e){return((e=Math.exp(2*e))-1)/(e+1)}const Yc=function e(t,n,o){function r(i,s){var a=i[0],c=i[1],u=i[2],l=s[0],d=s[1],h=s[2],p=l-a,x=d-c,m=p*p+x*x,v,g;if(m<Bc)g=Math.log(h/u)/t,v=function(D){return[a+D*p,c+D*x,u*Math.exp(t*D*g)]};else{var E=Math.sqrt(m),N=(h*h-u*u+o*m)/(2*u*n*E),y=(h*h-u*u-o*m)/(2*h*n*E),A=Math.log(Math.sqrt(N*N+1)-N),k=Math.log(Math.sqrt(y*y+1)-y);g=(k-A)/t,v=function(D){var I=D*g,R=No(A),O=u/(n*E)*(R*Uc(t*I+A)-Xc(A));return[a+O*p,c+O*x,u*R/No(t*I+A)]}}return v.duration=g*1e3*t/Math.SQRT2,v}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},r}(Math.SQRT2,2,4);var ft=0,bt=0,xt=0,kr=1e3,Jt,_t,jt=0,Ze=0,cn=0,kt=typeof performance=="object"&&performance.now?performance:Date,Tr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zn(){return Ze||(Tr(qc),Ze=kt.now()+cn)}function qc(){Ze=0}function en(){this._call=this._time=this._next=null}en.prototype=$r.prototype={constructor:en,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zn():+n)+(t==null?0:+t),!this._next&&_t!==this&&(_t?_t._next=this:Jt=this,_t=this),this._call=e,this._time=n,In()},stop:function(){this._call&&(this._call=null,this._time=1/0,In())}};function $r(e,t,n){var o=new en;return o.restart(e,t,n),o}function Zc(){Zn(),++ft;for(var e=Jt,t;e;)(t=Ze-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ft}function Mo(){Ze=(jt=kt.now())+cn,ft=bt=0;try{Zc()}finally{ft=0,Gc(),Ze=0}}function Wc(){var e=kt.now(),t=e-jt;t>kr&&(cn-=t,jt=e)}function Gc(){for(var e,t=Jt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Jt=n);_t=e,In(o)}function In(e){if(!ft){bt&&(bt=clearTimeout(bt));var t=e-Ze;t>24?(e<1/0&&(bt=setTimeout(Mo,e-kt.now()-cn)),xt&&(xt=clearInterval(xt))):(xt||(jt=kt.now(),xt=setInterval(Wc,kr)),ft=1,Tr(Mo))}}function Co(e,t,n){var o=new en;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Kc=sn("start","end","cancel","interrupt"),Qc=[],Ir=0,Ao=1,Rn=2,qt=3,ko=4,zn=5,Zt=6;function ln(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Jc(e,n,{name:t,index:o,group:r,on:Kc,tween:Qc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Ir})}function Wn(e,t){var n=me(e,t);if(n.state>Ir)throw new Error("too late; already scheduled");return n}function be(e,t){var n=me(e,t);if(n.state>qt)throw new Error("too late; already running");return n}function me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Jc(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=$r(i,0,n.time);function i(u){n.state=Ao,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,d,h,p;if(n.state!==Ao)return c();for(l in o)if(p=o[l],p.name===n.name){if(p.state===qt)return Co(s);p.state===ko?(p.state=Zt,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[l]):+l<t&&(p.state=Zt,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[l])}if(Co(function(){n.state===qt&&(n.state=ko,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Rn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Rn){for(n.state=qt,r=new Array(h=n.tween.length),l=0,d=-1;l<h;++l)(p=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=zn,1),d=-1,h=r.length;++d<h;)r[d].call(e,l);n.state===zn&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Zt,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Wt(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>Rn&&o.state<zn,o.state=Zt,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function jc(e){return this.each(function(){Wt(this,e)})}function el(e,t){var n,o;return function(){var r=be(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function tl(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=be(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=a;break}c===u&&r.push(a)}i.tween=r}}function nl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=me(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?el:tl)(n,e,t))}function Gn(e,t,n){var o=e._id;return e.each(function(){var r=be(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return me(r,o).value[t]}}function Rr(e,t){var n;return(typeof t=="number"?$e:t instanceof At?bo:(n=At(t))?(t=n,bo):Hc)(e,t)}function ol(e){return function(){this.removeAttribute(e)}}function rl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sl(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function il(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function al(e,t,n){var o,r,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a)))}}function cl(e,t,n){var o,r,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a)))}}function ll(e,t){var n=an(e),o=n==="transform"?Fc:Rr;return this.attrTween(e,typeof t=="function"?(n.local?cl:al)(n,o,Gn(this,"attr."+e,t)):t==null?(n.local?rl:ol)(n):(n.local?il:sl)(n,o,t))}function ul(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fl(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&dl(e,i)),n}return r._value=t,r}function hl(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ul(e,i)),n}return r._value=t,r}function pl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=an(e);return this.tween(n,(o.local?fl:hl)(o,t))}function gl(e,t){return function(){Wn(this,e).delay=+t.apply(this,arguments)}}function ml(e,t){return t=+t,function(){Wn(this,e).delay=t}}function yl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gl:ml)(t,e)):me(this.node(),t).delay}function xl(e,t){return function(){be(this,e).duration=+t.apply(this,arguments)}}function wl(e,t){return t=+t,function(){be(this,e).duration=t}}function vl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xl:wl)(t,e)):me(this.node(),t).duration}function Sl(e,t){if(typeof t!="function")throw new Error;return function(){be(this,e).ease=t}}function El(e){var t=this._id;return arguments.length?this.each(Sl(t,e)):me(this.node(),t).ease}function bl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;be(this,e).ease=n}}function _l(e){if(typeof e!="function")throw new Error;return this.each(bl(this._id,e))}function Nl(e){typeof e!="function"&&(e=dr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ae(o,this._parents,this._name,this._id)}function Ml(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var c=t[a],u=n[a],l=c.length,d=s[a]=new Array(l),h,p=0;p<l;++p)(h=c[p]||u[p])&&(d[p]=h);for(;a<o;++a)s[a]=t[a];return new Ae(s,this._parents,this._name,this._id)}function Cl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Al(e,t,n){var o,r,i=Cl(t)?Wn:be;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function kl(e,t){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(e):this.each(Al(n,e,t))}function Tl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $l(){return this.on("end.remove",Tl(this._id))}function Il(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Un(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],c=a.length,u=i[s]=new Array(c),l,d,h=0;h<c;++h)(l=a[h])&&(d=e.call(l,l.__data__,h,a))&&("__data__"in l&&(d.__data__=l.__data__),u[h]=d,ln(u[h],t,n,h,u,me(l,n)));return new Ae(i,this._parents,t,n)}function Rl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ur(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var c=o[a],u=c.length,l,d=0;d<u;++d)if(l=c[d]){for(var h=e.call(l,l.__data__,d,c),p,x=me(l,n),m=0,v=h.length;m<v;++m)(p=h[m])&&ln(p,t,n,m,h,x);i.push(h),s.push(l)}return new Ae(i,s,t,n)}var zl=Rt.prototype.constructor;function Pl(){return new zl(this._groups,this._parents)}function Dl(e,t){var n,o,r;return function(){var i=dt(this,e),s=(this.style.removeProperty(e),dt(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function zr(e){return function(){this.style.removeProperty(e)}}function Hl(e,t,n){var o,r=n+"",i;return function(){var s=dt(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function Ll(e,t,n){var o,r,i;return function(){var s=dt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),dt(this,e))),s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a))}}function Ol(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var c=be(this,e),u=c.on,l=c.value[i]==null?a||(a=zr(t)):void 0;(u!==n||r!==l)&&(o=(n=u).copy()).on(s,r=l),c.on=o}}function Vl(e,t,n){var o=(e+="")=="transform"?Vc:Rr;return t==null?this.styleTween(e,Dl(e,o)).on("end.style."+e,zr(e)):typeof t=="function"?this.styleTween(e,Ll(e,o,Gn(this,"style."+e,t))).each(Ol(this._id,e)):this.styleTween(e,Hl(e,o,t),n).on("end.style."+e,null)}function Fl(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Bl(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&Fl(e,s,n)),o}return i._value=t,i}function Xl(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Bl(e,t,n??""))}function Ul(e){return function(){this.textContent=e}}function Yl(e){return function(){var t=e(this);this.textContent=t??""}}function ql(e){return this.tween("text",typeof e=="function"?Yl(Gn(this,"text",e)):Ul(e==null?"":e+""))}function Zl(e){return function(t){this.textContent=e.call(this,t)}}function Wl(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Zl(r)),t}return o._value=e,o}function Gl(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Wl(e))}function Kl(){for(var e=this._name,t=this._id,n=Pr(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=me(c,t);ln(c,e,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ae(o,this._parents,e,n)}function Ql(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--r===0&&i()}};n.each(function(){var u=be(this,o),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),r===0&&i()})}var Jl=0;function Ae(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Pr(){return++Jl}var Ne=Rt.prototype;Ae.prototype={constructor:Ae,select:Il,selectAll:Rl,selectChild:Ne.selectChild,selectChildren:Ne.selectChildren,filter:Nl,merge:Ml,selection:Pl,transition:Kl,call:Ne.call,nodes:Ne.nodes,node:Ne.node,size:Ne.size,empty:Ne.empty,each:Ne.each,on:kl,attr:ll,attrTween:pl,style:Vl,styleTween:Xl,text:ql,textTween:Gl,remove:$l,tween:nl,delay:yl,duration:vl,ease:El,easeVarying:_l,end:Ql,[Symbol.iterator]:Ne[Symbol.iterator]};function jl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var eu={time:null,delay:0,duration:250,ease:jl};function tu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function nu(e){var t,n;e instanceof Ae?(t=e._id,e=e._name):(t=Pr(),(n=eu).time=Zn(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&ln(c,e,t,u,s,n||tu(c,t));return new Ae(o,this._parents,e,t)}Rt.prototype.interrupt=jc;Rt.prototype.transition=nu;const Vt=e=>()=>e;function ou(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Ce(e,t,n){this.k=e,this.x=t,this.y=n}Ce.prototype={constructor:Ce,scale:function(e){return e===1?this:new Ce(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ce(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ze=new Ce(1,0,0);Ce.prototype;function Sn(e){e.stopImmediatePropagation()}function wt(e){e.preventDefault(),e.stopImmediatePropagation()}function ru(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function su(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function To(){return this.__zoom||ze}function iu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function au(){return navigator.maxTouchPoints||"ontouchstart"in this}function cu(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function lu(){var e=ru,t=su,n=cu,o=iu,r=au,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Yc,u=sn("start","zoom","end"),l,d,h,p=500,x=150,m=0,v=10;function g(f){f.property("__zoom",To).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",O).filter(r).on("touchstart.zoom",H).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(f,b,S,C){var P=f.selection?f.selection():f;P.property("__zoom",To),f!==P?A(f,b,S,C):P.interrupt().each(function(){k(this,arguments).event(C).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},g.scaleBy=function(f,b,S,C){g.scaleTo(f,function(){var P=this.__zoom.k,w=typeof b=="function"?b.apply(this,arguments):b;return P*w},S,C)},g.scaleTo=function(f,b,S,C){g.transform(f,function(){var P=t.apply(this,arguments),w=this.__zoom,T=S==null?y(P):typeof S=="function"?S.apply(this,arguments):S,M=w.invert(T),L=typeof b=="function"?b.apply(this,arguments):b;return n(N(E(w,L),T,M),P,s)},S,C)},g.translateBy=function(f,b,S,C){g.transform(f,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,C)},g.translateTo=function(f,b,S,C,P){g.transform(f,function(){var w=t.apply(this,arguments),T=this.__zoom,M=C==null?y(w):typeof C=="function"?C.apply(this,arguments):C;return n(ze.translate(M[0],M[1]).scale(T.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof S=="function"?-S.apply(this,arguments):-S),w,s)},C,P)};function E(f,b){return b=Math.max(i[0],Math.min(i[1],b)),b===f.k?f:new Ce(b,f.x,f.y)}function N(f,b,S){var C=b[0]-S[0]*f.k,P=b[1]-S[1]*f.k;return C===f.x&&P===f.y?f:new Ce(f.k,C,P)}function y(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function A(f,b,S,C){f.on("start.zoom",function(){k(this,arguments).event(C).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(C).end()}).tween("zoom",function(){var P=this,w=arguments,T=k(P,w).event(C),M=t.apply(P,w),L=S==null?y(M):typeof S=="function"?S.apply(P,w):S,B=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),F=P.__zoom,Y=typeof b=="function"?b.apply(P,w):b,Z=c(F.invert(L).concat(B/F.k),Y.invert(L).concat(B/Y.k));return function(W){if(W===1)W=Y;else{var G=Z(W),j=B/G[2];W=new Ce(j,L[0]-G[0]*j,L[1]-G[1]*j)}T.zoom(null,W)}})}function k(f,b,S){return!S&&f.__zooming||new D(f,b)}function D(f,b){this.that=f,this.args=b,this.active=0,this.sourceEvent=null,this.extent=t.apply(f,b),this.taps=0}D.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,b){return this.mouse&&f!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var b=pe(this.that).datum();u.call(f,this.that,new ou(f,{sourceEvent:this.sourceEvent,target:g,type:f,transform:this.that.__zoom,dispatch:u}),b)}};function I(f,...b){if(!e.apply(this,arguments))return;var S=k(this,b).event(f),C=this.__zoom,P=Math.max(i[0],Math.min(i[1],C.k*Math.pow(2,o.apply(this,arguments)))),w=Se(f);if(S.wheel)(S.mouse[0][0]!==w[0]||S.mouse[0][1]!==w[1])&&(S.mouse[1]=C.invert(S.mouse[0]=w)),clearTimeout(S.wheel);else{if(C.k===P)return;S.mouse=[w,C.invert(w)],Wt(this),S.start()}wt(f),S.wheel=setTimeout(T,x),S.zoom("mouse",n(N(E(C,P),S.mouse[0],S.mouse[1]),S.extent,s));function T(){S.wheel=null,S.end()}}function R(f,...b){if(h||!e.apply(this,arguments))return;var S=f.currentTarget,C=k(this,b,!0).event(f),P=pe(f.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",B,!0),w=Se(f,S),T=f.clientX,M=f.clientY;Sr(f.view),Sn(f),C.mouse=[w,this.__zoom.invert(w)],Wt(this),C.start();function L(F){if(wt(F),!C.moved){var Y=F.clientX-T,Z=F.clientY-M;C.moved=Y*Y+Z*Z>m}C.event(F).zoom("mouse",n(N(C.that.__zoom,C.mouse[0]=Se(F,S),C.mouse[1]),C.extent,s))}function B(F){P.on("mousemove.zoom mouseup.zoom",null),Er(F.view,C.moved),wt(F),C.event(F).end()}}function O(f,...b){if(e.apply(this,arguments)){var S=this.__zoom,C=Se(f.changedTouches?f.changedTouches[0]:f,this),P=S.invert(C),w=S.k*(f.shiftKey?.5:2),T=n(N(E(S,w),C,P),t.apply(this,b),s);wt(f),a>0?pe(this).transition().duration(a).call(A,T,C,f):pe(this).call(g.transform,T,C,f)}}function H(f,...b){if(e.apply(this,arguments)){var S=f.touches,C=S.length,P=k(this,b,f.changedTouches.length===C).event(f),w,T,M,L;for(Sn(f),T=0;T<C;++T)M=S[T],L=Se(M,this),L=[L,this.__zoom.invert(L),M.identifier],P.touch0?!P.touch1&&P.touch0[2]!==L[2]&&(P.touch1=L,P.taps=0):(P.touch0=L,w=!0,P.taps=1+!!l);l&&(l=clearTimeout(l)),w&&(P.taps<2&&(d=L[0],l=setTimeout(function(){l=null},p)),Wt(this),P.start())}}function V(f,...b){if(this.__zooming){var S=k(this,b).event(f),C=f.changedTouches,P=C.length,w,T,M,L;for(wt(f),w=0;w<P;++w)T=C[w],M=Se(T,this),S.touch0&&S.touch0[2]===T.identifier?S.touch0[0]=M:S.touch1&&S.touch1[2]===T.identifier&&(S.touch1[0]=M);if(T=S.that.__zoom,S.touch1){var B=S.touch0[0],F=S.touch0[1],Y=S.touch1[0],Z=S.touch1[1],W=(W=Y[0]-B[0])*W+(W=Y[1]-B[1])*W,G=(G=Z[0]-F[0])*G+(G=Z[1]-F[1])*G;T=E(T,Math.sqrt(W/G)),M=[(B[0]+Y[0])/2,(B[1]+Y[1])/2],L=[(F[0]+Z[0])/2,(F[1]+Z[1])/2]}else if(S.touch0)M=S.touch0[0],L=S.touch0[1];else return;S.zoom("touch",n(N(T,M,L),S.extent,s))}}function z(f,...b){if(this.__zooming){var S=k(this,b).event(f),C=f.changedTouches,P=C.length,w,T;for(Sn(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),w=0;w<P;++w)T=C[w],S.touch0&&S.touch0[2]===T.identifier?delete S.touch0:S.touch1&&S.touch1[2]===T.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(T=Se(T,this),Math.hypot(d[0]-T[0],d[1]-T[1])<v)){var M=pe(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return g.wheelDelta=function(f){return arguments.length?(o=typeof f=="function"?f:Vt(+f),g):o},g.filter=function(f){return arguments.length?(e=typeof f=="function"?f:Vt(!!f),g):e},g.touchable=function(f){return arguments.length?(r=typeof f=="function"?f:Vt(!!f),g):r},g.extent=function(f){return arguments.length?(t=typeof f=="function"?f:Vt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),g):t},g.scaleExtent=function(f){return arguments.length?(i[0]=+f[0],i[1]=+f[1],g):[i[0],i[1]]},g.translateExtent=function(f){return arguments.length?(s[0][0]=+f[0][0],s[1][0]=+f[1][0],s[0][1]=+f[0][1],s[1][1]=+f[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(f){return arguments.length?(n=f,g):n},g.duration=function(f){return arguments.length?(a=+f,g):a},g.interpolate=function(f){return arguments.length?(c=f,g):c},g.on=function(){var f=u.on.apply(u,arguments);return f===u?g:f},g.clickDistance=function(f){return arguments.length?(m=(f=+f)*f,g):Math.sqrt(m)},g.tapDistance=function(f){return arguments.length?(v=+f,g):v},g}const un=_.createContext(null),uu=un.Provider,ke={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Dr=ke.error001();function ee(e,t){const n=_.useContext(un);if(n===null)throw new Error(Dr);return cr(n,e,t)}const ne=()=>{const e=_.useContext(un);if(e===null)throw new Error(Dr);return _.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},du=e=>e.userSelectionActive?"none":"all";function fu({position:e,children:t,className:n,style:o,...r}){const i=ee(du),s=`${e}`.split("-");return $.createElement("div",{className:de(["react-flow__panel",n,...s]),style:{...o,pointerEvents:i},...r},t)}function hu({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:$.createElement(fu,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},$.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const pu=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{const d=_.useRef(null),[h,p]=_.useState({x:0,y:0,width:0,height:0}),x=de(["react-flow__edge-textwrapper",u]);return _.useEffect(()=>{if(d.current){const m=d.current.getBBox();p({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:$.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...l},r&&$.createElement("rect",{width:h.width+2*s[0],x:-s[0],y:-s[1],height:h.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),$.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:o},n),c)};var gu=_.memo(pu);const Kn=e=>({width:e.offsetWidth,height:e.offsetHeight}),ht=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Qn=(e={x:0,y:0},t)=>({x:ht(e.x,t[0][0],t[1][0]),y:ht(e.y,t[0][1],t[1][1])}),$o=(e,t,n)=>e<t?ht(Math.abs(e-t),1,50)/50:e>n?-ht(Math.abs(e-n),1,50)/50:0,Hr=(e,t)=>{const n=$o(e.x,35,t.width-35)*20,o=$o(e.y,35,t.height-35)*20;return[n,o]},Lr=e=>e.getRootNode?.()||window?.document,Or=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Tt=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Vr=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Io=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),cf=(e,t)=>Vr(Or(Tt(e),Tt(t))),Pn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},mu=e=>ue(e.width)&&ue(e.height)&&ue(e.x)&&ue(e.y),ue=e=>!isNaN(e)&&isFinite(e),J=Symbol.for("internals"),Fr=["Enter"," ","Escape"],yu=(e,t)=>{},xu=e=>"nativeEvent"in e;function Dn(e){const n=(xu(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Br=e=>"clientX"in e,Pe=(e,t)=>{const n=Br(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},tn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Pt=({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:h,interactionWidth:p=20})=>$.createElement($.Fragment,null,$.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),p&&$.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),r&&ue(n)&&ue(o)?$.createElement(gu,{x:n,y:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Pt.displayName="BaseEdge";function vt(e,t,n){return n===void 0?n:o=>{const r=t().edges.find(i=>i.id===e);r&&n(o,{...r})}}function Xr({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function Ur({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+r*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+o*.125,l=Math.abs(c-e),d=Math.abs(u-t);return[c,u,l,d]}var We;(function(e){e.Strict="strict",e.Loose="loose"})(We||(We={}));var Ye;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ye||(Ye={}));var $t;(function(e){e.Partial="partial",e.Full="full"})($t||($t={}));var Re;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Re||(Re={}));var pt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(pt||(pt={}));var X;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(X||(X={}));function Ro({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===X.Left||e===X.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Yr({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:i=X.Top}){const[s,a]=Ro({pos:n,x1:e,y1:t,x2:o,y2:r}),[c,u]=Ro({pos:i,x1:o,y1:r,x2:e,y2:t}),[l,d,h,p]=Ur({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${o},${r}`,l,d,h,p]}const Jn=_.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=X.Bottom,targetPosition:i=X.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:m})=>{const[v,g,E]=Yr({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:i});return $.createElement(Pt,{path:v,labelX:g,labelY:E,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:m})});Jn.displayName="SimpleBezierEdge";const zo={[X.Left]:{x:-1,y:0},[X.Right]:{x:1,y:0},[X.Top]:{x:0,y:-1},[X.Bottom]:{x:0,y:1}},wu=({source:e,sourcePosition:t=X.Bottom,target:n})=>t===X.Left||t===X.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Po=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function vu({source:e,sourcePosition:t=X.Bottom,target:n,targetPosition:o=X.Top,center:r,offset:i}){const s=zo[t],a=zo[o],c={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},l=wu({source:c,sourcePosition:t,target:u}),d=l.x!==0?"x":"y",h=l[d];let p=[],x,m;const v={x:0,y:0},g={x:0,y:0},[E,N,y,A]=Xr({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){x=r.x??E,m=r.y??N;const D=[{x,y:c.y},{x,y:u.y}],I=[{x:c.x,y:m},{x:u.x,y:m}];s[d]===h?p=d==="x"?D:I:p=d==="x"?I:D}else{const D=[{x:c.x,y:u.y}],I=[{x:u.x,y:c.y}];if(d==="x"?p=s.x===h?I:D:p=s.y===h?D:I,t===o){const z=Math.abs(e[d]-n[d]);if(z<=i){const f=Math.min(i-1,i-z);s[d]===h?v[d]=(c[d]>e[d]?-1:1)*f:g[d]=(u[d]>n[d]?-1:1)*f}}if(t!==o){const z=d==="x"?"y":"x",f=s[d]===a[z],b=c[z]>u[z],S=c[z]<u[z];(s[d]===1&&(!f&&b||f&&S)||s[d]!==1&&(!f&&S||f&&b))&&(p=d==="x"?D:I)}const R={x:c.x+v.x,y:c.y+v.y},O={x:u.x+g.x,y:u.y+g.y},H=Math.max(Math.abs(R.x-p[0].x),Math.abs(O.x-p[0].x)),V=Math.max(Math.abs(R.y-p[0].y),Math.abs(O.y-p[0].y));H>=V?(x=(R.x+O.x)/2,m=p[0].y):(x=p[0].x,m=(R.y+O.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...p,{x:u.x+g.x,y:u.y+g.y},n],x,m,y,A]}function Su(e,t,n,o){const r=Math.min(Po(e,t)/2,Po(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+r*c}Q ${i},${s} ${i+r*a},${s}`}function Hn({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:i=X.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[l,d,h,p,x]=vu({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:c},offset:u});return[l.reduce((v,g,E)=>{let N="";return E>0&&E<l.length-1?N=Su(l[E-1],g,l[E+1],s):N=`${E===0?"M":"L"}${g.x} ${g.y}`,v+=N,v},""),d,h,p,x]}const dn=_.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:d=X.Bottom,targetPosition:h=X.Top,markerEnd:p,markerStart:x,pathOptions:m,interactionWidth:v})=>{const[g,E,N]=Hn({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:o,targetPosition:h,borderRadius:m?.borderRadius,offset:m?.offset});return $.createElement(Pt,{path:g,labelX:E,labelY:N,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:p,markerStart:x,interactionWidth:v})});dn.displayName="SmoothStepEdge";const jn=_.memo(e=>$.createElement(dn,{...e,pathOptions:_.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));jn.displayName="StepEdge";function Eu({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,a]=Xr({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,a]}const eo=_.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:h,interactionWidth:p})=>{const[x,m,v]=Eu({sourceX:e,sourceY:t,targetX:n,targetY:o});return $.createElement(Pt,{path:x,labelX:m,labelY:v,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:h,interactionWidth:p})});eo.displayName="StraightEdge";function Ft(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Do({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case X.Left:return[t-Ft(t-o,i),n];case X.Right:return[t+Ft(o-t,i),n];case X.Top:return[t,n-Ft(n-r,i)];case X.Bottom:return[t,n+Ft(r-n,i)]}}function qr({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:i=X.Top,curvature:s=.25}){const[a,c]=Do({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[u,l]=Do({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[d,h,p,x]=Ur({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${o},${r}`,d,h,p,x]}const nn=_.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=X.Bottom,targetPosition:i=X.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,pathOptions:m,interactionWidth:v})=>{const[g,E,N]=qr({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:i,curvature:m?.curvature});return $.createElement(Pt,{path:g,labelX:E,labelY:N,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:v})});nn.displayName="BezierEdge";const to=_.createContext(null),bu=to.Provider;to.Consumer;const _u=()=>_.useContext(to),Nu=e=>"id"in e&&"source"in e&&"target"in e,Zr=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,Ln=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,Mu=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Wr=(e,t)=>{if(!e.source||!e.target)return t;let n;return Nu(e)?n={...e}:n={...e,id:Zr(e)},Mu(n,t)?t:t.concat(n)},Cu=(e,t,n,o={shouldReplaceId:!0})=>{const{id:r,...i}=e;if(!t.source||!t.target||!n.find(c=>c.id===r))return n;const a={...i,id:o.shouldReplaceId?Zr(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.filter(c=>c.id!==r).concat(a)},On=({x:e,y:t},[n,o,r],i,[s,a])=>{const c={x:(e-n)/r,y:(t-o)/r};return i?{x:s*Math.round(c.x/s),y:a*Math.round(c.y/a)}:c},Gr=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),ct=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-o};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:r}},no=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const{x:i,y:s}=ct(r,t).positionAbsolute;return Or(o,Tt({x:i,y:s,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Vr(n)},Kr=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1,a=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(l=>{const{width:d,height:h,selectable:p=!0,hidden:x=!1}=l;if(s&&!p||x)return!1;const{positionAbsolute:m}=ct(l,a),v={x:m.x,y:m.y,width:d||0,height:h||0},g=Pn(c,v),E=typeof d>"u"||typeof h>"u"||d===null||h===null,N=i&&g>0,y=(d||0)*(h||0);(E||N||g>=y||l.dragging)&&u.push(l)}),u},Qr=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},Jr=(e,t,n,o,r,i=.1)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),u=ht(c,o,r),l=e.x+e.width/2,d=e.y+e.height/2,h=t/2-l*u,p=n/2-d*u;return{x:h,y:p,zoom:u}},Xe=(e,t=0)=>e.transition().duration(t);function Ho(e,t,n,o){return(t[n]||[]).reduce((r,i)=>(`${e.id}-${i.id}-${n}`!==o&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+i.x+i.width/2,y:(e.positionAbsolute?.y??0)+i.y+i.height/2}),r),[])}function Au(e,t,n,o,r,i){const{x:s,y:a}=Pe(e),u=t.elementsFromPoint(s,a).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const m=oo(void 0,u),v=u.getAttribute("data-handleid"),g=i({nodeId:x,id:v,type:m});if(g){const E=r.find(N=>N.nodeId===x&&N.type===m&&N.id===v);return{handle:{id:v,type:m,nodeId:x,x:E?.x||n.x,y:E?.y||n.y},validHandleResult:g}}}}let l=[],d=1/0;if(r.forEach(x=>{const m=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(m<=o){const v=i(x);m<=d&&(m<d?l=[{handle:x,validHandleResult:v}]:m===d&&l.push({handle:x,validHandleResult:v}),d=m)}}),!l.length)return{handle:null,validHandleResult:jr()};if(l.length===1)return l[0];const h=l.some(({validHandleResult:x})=>x.isValid),p=l.some(({handle:x})=>x.type==="target");return l.find(({handle:x,validHandleResult:m})=>p?x.type==="target":h?m.isValid:!0)||l[0]}const ku={source:null,target:null,sourceHandle:null,targetHandle:null},jr=()=>({handleDomNode:null,isValid:!1,connection:ku,endHandle:null});function es(e,t,n,o,r,i,s){const a=r==="target",c=s.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),u={...jr(),handleDomNode:c};if(c){const l=oo(void 0,c),d=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),m={source:a?d:n,sourceHandle:a?h:o,target:a?n:d,targetHandle:a?o:h};u.connection=m,p&&x&&(t===We.Strict?a&&l==="source"||!a&&l==="target":d!==n||h!==o)&&(u.endHandle={nodeId:d,handleId:h,type:l},u.isValid=i(m))}return u}function Tu({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,i)=>{if(i[J]){const{handleBounds:s}=i[J];let a=[],c=[];s&&(a=Ho(i,s,"source",`${t}-${n}-${o}`),c=Ho(i,s,"target",`${t}-${n}-${o}`)),r.push(...a,...c)}return r},[])}function oo(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function En(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function $u(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function ts({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:r,getState:i,setState:s,isValidConnection:a,edgeUpdaterType:c,onEdgeUpdateEnd:u}){const l=Lr(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:p,connectionRadius:x,onConnectStart:m,panBy:v,getNodes:g,cancelConnection:E}=i();let N=0,y;const{x:A,y:k}=Pe(e),D=l?.elementFromPoint(A,k),I=oo(c,D),R=h?.getBoundingClientRect();if(!R||!I)return;let O,H=Pe(e,R),V=!1,z=null,f=!1,b=null;const S=Tu({nodes:g(),nodeId:n,handleId:t,handleType:I}),C=()=>{if(!p)return;const[T,M]=Hr(H,R);v({x:T,y:M}),N=requestAnimationFrame(C)};s({connectionPosition:H,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:I,connectionStartHandle:{nodeId:n,handleId:t,type:I},connectionEndHandle:null}),m?.(e,{nodeId:n,handleId:t,handleType:I});function P(T){const{transform:M}=i();H=Pe(T,R);const{handle:L,validHandleResult:B}=Au(T,l,On(H,M,!1,[1,1]),x,S,F=>es(F,d,n,t,r?"target":"source",a,l));if(y=L,V||(C(),V=!0),b=B.handleDomNode,z=B.connection,f=B.isValid,s({connectionPosition:y&&f?Gr({x:y.x,y:y.y},M):H,connectionStatus:$u(!!y,f),connectionEndHandle:B.endHandle}),!y&&!f&&!b)return En(O);z.source!==z.target&&b&&(En(O),O=b,b.classList.add("connecting","react-flow__handle-connecting"),b.classList.toggle("valid",f),b.classList.toggle("react-flow__handle-valid",f))}function w(T){(y||b)&&z&&f&&o?.(z),i().onConnectEnd?.(T),c&&u?.(T),En(O),E(),cancelAnimationFrame(N),V=!1,f=!1,z=null,b=null,l.removeEventListener("mousemove",P),l.removeEventListener("mouseup",w),l.removeEventListener("touchmove",P),l.removeEventListener("touchend",w)}l.addEventListener("mousemove",P),l.addEventListener("mouseup",w),l.addEventListener("touchmove",P),l.addEventListener("touchend",w)}const Lo=()=>!0,Iu=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Ru=(e,t,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:s}=o;return{connecting:r?.nodeId===e&&r?.handleId===t&&r?.type===n||i?.nodeId===e&&i?.handleId===t&&i?.type===n,clickConnecting:s?.nodeId===e&&s?.handleId===t&&s?.type===n}},ns=_.forwardRef(({type:e="source",position:t=X.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:d,...h},p)=>{const x=s||null,m=e==="target",v=ne(),g=_u(),{connectOnClick:E,noPanClassName:N}=ee(Iu,re),{connecting:y,clickConnecting:A}=ee(Ru(g,x,e),re);g||v.getState().onError?.("010",ke.error010());const k=R=>{const{defaultEdgeOptions:O,onConnect:H,hasDefaultEdges:V}=v.getState(),z={...O,...R};if(V){const{edges:f,setEdges:b}=v.getState();b(Wr(z,f))}H?.(z),a?.(z)},D=R=>{if(!g)return;const O=Br(R);r&&(O&&R.button===0||!O)&&ts({event:R,handleId:x,nodeId:g,onConnect:k,isTarget:m,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||Lo}),O?l?.(R):d?.(R)},I=R=>{const{onClickConnectStart:O,onClickConnectEnd:H,connectionClickStartHandle:V,connectionMode:z,isValidConnection:f}=v.getState();if(!g||!V&&!r)return;if(!V){O?.(R,{nodeId:g,handleId:x,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:x}});return}const b=Lr(R.target),S=n||f||Lo,{connection:C,isValid:P}=es({nodeId:g,id:x,type:e},z,V.nodeId,V.handleId||null,V.type,S,b);P&&k(C),H?.(R),v.setState({connectionClickStartHandle:null})};return $.createElement("div",{"data-handleid":x,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${x}-${e}`,className:de(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,u,{source:!m,target:m,connectable:o,connectablestart:r,connectableend:i,connecting:A,connectionindicator:o&&(r&&!y||i&&y)}]),onMouseDown:D,onTouchStart:D,onClick:E?I:void 0,ref:p,...h},c)});ns.displayName="Handle";var on=_.memo(ns);const os=({data:e,isConnectable:t,targetPosition:n=X.Top,sourcePosition:o=X.Bottom})=>$.createElement($.Fragment,null,$.createElement(on,{type:"target",position:n,isConnectable:t}),e?.label,$.createElement(on,{type:"source",position:o,isConnectable:t}));os.displayName="DefaultNode";var Vn=_.memo(os);const rs=({data:e,isConnectable:t,sourcePosition:n=X.Bottom})=>$.createElement($.Fragment,null,e?.label,$.createElement(on,{type:"source",position:n,isConnectable:t}));rs.displayName="InputNode";var ss=_.memo(rs);const is=({data:e,isConnectable:t,targetPosition:n=X.Top})=>$.createElement($.Fragment,null,$.createElement(on,{type:"target",position:n,isConnectable:t}),e?.label);is.displayName="OutputNode";var as=_.memo(is);const ro=()=>null;ro.displayName="GroupNode";const zu=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Bt=e=>e.id;function Pu(e,t){return re(e.selectedNodes.map(Bt),t.selectedNodes.map(Bt))&&re(e.selectedEdges.map(Bt),t.selectedEdges.map(Bt))}const cs=_.memo(({onSelectionChange:e})=>{const t=ne(),{selectedNodes:n,selectedEdges:o}=ee(zu,Pu);return _.useEffect(()=>{const r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChange.forEach(i=>i(r))},[n,o,e]),null});cs.displayName="SelectionListener";const Du=e=>!!e.onSelectionChange;function Hu({onSelectionChange:e}){const t=ee(Du);return e||t?$.createElement(cs,{onSelectionChange:e}):null}const Lu=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function tt(e,t){_.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function q(e,t,n){_.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Ou=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:i,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:x,minZoom:m,maxZoom:v,nodeExtent:g,onNodesChange:E,onEdgesChange:N,elementsSelectable:y,connectionMode:A,snapGrid:k,snapToGrid:D,translateExtent:I,connectOnClick:R,defaultEdgeOptions:O,fitView:H,fitViewOptions:V,onNodesDelete:z,onEdgesDelete:f,onNodeDrag:b,onNodeDragStart:S,onNodeDragStop:C,onSelectionDrag:P,onSelectionDragStart:w,onSelectionDragStop:T,noPanClassName:M,nodeOrigin:L,rfId:B,autoPanOnConnect:F,autoPanOnNodeDrag:Y,onError:Z,connectionRadius:W,isValidConnection:G,nodeDragThreshold:j})=>{const{setNodes:K,setEdges:ie,setDefaultNodesAndEdges:le,setMinZoom:fe,setMaxZoom:ye,setTranslateExtent:te,setNodeExtent:xe,reset:Q}=ee(Lu,re),U=ne();return _.useEffect(()=>{const ae=o?.map(De=>({...De,...O}));return le(n,ae),()=>{Q()}},[]),q("defaultEdgeOptions",O,U.setState),q("connectionMode",A,U.setState),q("onConnect",r,U.setState),q("onConnectStart",i,U.setState),q("onConnectEnd",s,U.setState),q("onClickConnectStart",a,U.setState),q("onClickConnectEnd",c,U.setState),q("nodesDraggable",u,U.setState),q("nodesConnectable",l,U.setState),q("nodesFocusable",d,U.setState),q("edgesFocusable",h,U.setState),q("edgesUpdatable",p,U.setState),q("elementsSelectable",y,U.setState),q("elevateNodesOnSelect",x,U.setState),q("snapToGrid",D,U.setState),q("snapGrid",k,U.setState),q("onNodesChange",E,U.setState),q("onEdgesChange",N,U.setState),q("connectOnClick",R,U.setState),q("fitViewOnInit",H,U.setState),q("fitViewOnInitOptions",V,U.setState),q("onNodesDelete",z,U.setState),q("onEdgesDelete",f,U.setState),q("onNodeDrag",b,U.setState),q("onNodeDragStart",S,U.setState),q("onNodeDragStop",C,U.setState),q("onSelectionDrag",P,U.setState),q("onSelectionDragStart",w,U.setState),q("onSelectionDragStop",T,U.setState),q("noPanClassName",M,U.setState),q("nodeOrigin",L,U.setState),q("rfId",B,U.setState),q("autoPanOnConnect",F,U.setState),q("autoPanOnNodeDrag",Y,U.setState),q("onError",Z,U.setState),q("connectionRadius",W,U.setState),q("isValidConnection",G,U.setState),q("nodeDragThreshold",j,U.setState),tt(e,K),tt(t,ie),tt(m,fe),tt(v,ye),tt(I,te),tt(g,xe),null},Oo={display:"none"},Vu={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ls="react-flow__node-desc",us="react-flow__edge-desc",Fu="react-flow__aria-live",Bu=e=>e.ariaLiveMessage;function Xu({rfId:e}){const t=ee(Bu);return $.createElement("div",{id:`${Fu}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Vu},t)}function Uu({rfId:e,disableKeyboardA11y:t}){return $.createElement($.Fragment,null,$.createElement("div",{id:`${ls}-${e}`,style:Oo},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),$.createElement("div",{id:`${us}-${e}`,style:Oo},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&$.createElement(Xu,{rfId:e}))}var It=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=_.useState(!1),r=_.useRef(!1),i=_.useRef(new Set([])),[s,a]=_.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=u.reduce((d,h)=>d.concat(...h),[]);return[u,l]}return[[],[]]},[e]);return _.useEffect(()=>{const c=typeof document<"u"?document:null,u=t?.target||c;if(e!==null){const l=p=>{if(r.current=p.ctrlKey||p.metaKey||p.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Dn(p))return!1;const m=Fo(p.code,a);i.current.add(p[m]),Vo(s,i.current,!1)&&(p.preventDefault(),o(!0))},d=p=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Dn(p))return!1;const m=Fo(p.code,a);Vo(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(p[m]),p.key==="Meta"&&i.current.clear(),r.current=!1},h=()=>{i.current.clear(),o(!1)};return u?.addEventListener("keydown",l),u?.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{u?.removeEventListener("keydown",l),u?.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,o]),n};function Vo(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function Fo(e,t){return t.includes(e)?"code":"key"}function ds(e,t,n,o){const r=e.parentNode||e.parentId;if(!r)return n;const i=t.get(r),s=ct(i,o);return ds(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(i[J]?.z??0)>(n.z??0)?i[J]?.z??0:n.z??0},o)}function fs(e,t,n){e.forEach(o=>{const r=o.parentNode||o.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n?.[o.id]){const{x:i,y:s,z:a}=ds(o,e,{...o.position,z:o[J]?.z??0},t);o.positionAbsolute={x:i,y:s},o[J].z=a,n?.[o.id]&&(o[J].isParent=!0)}})}function bn(e,t,n,o){const r=new Map,i={},s=o?1e3:0;return e.forEach(a=>{const c=(ue(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=t.get(a.id),l={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(i[d]=!0);const h=u?.type&&u?.type!==a.type;Object.defineProperty(l,J,{enumerable:!1,value:{handleBounds:h?void 0:u?.[J]?.handleBounds,z:c}}),r.set(a.id,l)}),fs(r,n,i),r}function hs(e,t={}){const{getNodes:n,width:o,height:r,minZoom:i,maxZoom:s,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:d}=e(),h=t.initial&&!u&&l;if(a&&c&&(h||!t.initial)){const x=n().filter(v=>{const g=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return t.nodes?.length?g&&t.nodes.some(E=>E.id===v.id):g}),m=x.every(v=>v.width&&v.height);if(x.length>0&&m){const v=no(x,d),{x:g,y:E,zoom:N}=Jr(v,o,r,t.minZoom??i,t.maxZoom??s,t.padding??.1),y=ze.translate(g,E).scale(N);return typeof t.duration=="number"&&t.duration>0?a.transform(Xe(c,t.duration),y):a.transform(c,y),!0}}return!1}function Yu(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[J]:o[J],selected:n.selected})}),new Map(t)}function qu(e,t){return t.map(n=>{const o=e.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Xt({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:r,edges:i,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e?.length&&(c&&o({nodeInternals:Yu(e,r)}),s?.(e)),t?.length&&(u&&o({edges:qu(t,i)}),a?.(t))}const nt=()=>{},Zu={zoomIn:nt,zoomOut:nt,zoomTo:nt,getZoom:()=>1,setViewport:nt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:nt,fitBounds:nt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Wu=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Gu=()=>{const e=ne(),{d3Zoom:t,d3Selection:n}=ee(Wu,re);return _.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(Xe(n,r?.duration),1.2),zoomOut:r=>t.scaleBy(Xe(n,r?.duration),1/1.2),zoomTo:(r,i)=>t.scaleTo(Xe(n,i?.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const[s,a,c]=e.getState().transform,u=ze.translate(r.x??s,r.y??a).scale(r.zoom??c);t.transform(Xe(n,i?.duration),u)},getViewport:()=>{const[r,i,s]=e.getState().transform;return{x:r,y:i,zoom:s}},fitView:r=>hs(e.getState,r),setCenter:(r,i,s)=>{const{width:a,height:c,maxZoom:u}=e.getState(),l=typeof s?.zoom<"u"?s.zoom:u,d=a/2-r*l,h=c/2-i*l,p=ze.translate(d,h).scale(l);t.transform(Xe(n,s?.duration),p)},fitBounds:(r,i)=>{const{width:s,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:l,y:d,zoom:h}=Jr(r,s,a,c,u,i?.padding??.1),p=ze.translate(l,d).scale(h);t.transform(Xe(n,i?.duration),p)},project:r=>{const{transform:i,snapToGrid:s,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),On(r,i,s,a)},screenToFlowPosition:r=>{const{transform:i,snapToGrid:s,snapGrid:a,domNode:c}=e.getState();if(!c)return r;const{x:u,y:l}=c.getBoundingClientRect(),d={x:r.x-u,y:r.y-l};return On(d,i,s,a)},flowToScreenPosition:r=>{const{transform:i,domNode:s}=e.getState();if(!s)return r;const{x:a,y:c}=s.getBoundingClientRect(),u=Gr(r,i);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:Zu,[t,n])};function ps(){const e=Gu(),t=ne(),n=_.useCallback(()=>t.getState().getNodes().map(m=>({...m})),[]),o=_.useCallback(m=>t.getState().nodeInternals.get(m),[]),r=_.useCallback(()=>{const{edges:m=[]}=t.getState();return m.map(v=>({...v}))},[]),i=_.useCallback(m=>{const{edges:v=[]}=t.getState();return v.find(g=>g.id===m)},[]),s=_.useCallback(m=>{const{getNodes:v,setNodes:g,hasDefaultNodes:E,onNodesChange:N}=t.getState(),y=v(),A=typeof m=="function"?m(y):m;if(E)g(A);else if(N){const k=A.length===0?y.map(D=>({type:"remove",id:D.id})):A.map(D=>({item:D,type:"reset"}));N(k)}},[]),a=_.useCallback(m=>{const{edges:v=[],setEdges:g,hasDefaultEdges:E,onEdgesChange:N}=t.getState(),y=typeof m=="function"?m(v):m;if(E)g(y);else if(N){const A=y.length===0?v.map(k=>({type:"remove",id:k.id})):y.map(k=>({item:k,type:"reset"}));N(A)}},[]),c=_.useCallback(m=>{const v=Array.isArray(m)?m:[m],{getNodes:g,setNodes:E,hasDefaultNodes:N,onNodesChange:y}=t.getState();if(N){const k=[...g(),...v];E(k)}else if(y){const A=v.map(k=>({item:k,type:"add"}));y(A)}},[]),u=_.useCallback(m=>{const v=Array.isArray(m)?m:[m],{edges:g=[],setEdges:E,hasDefaultEdges:N,onEdgesChange:y}=t.getState();if(N)E([...g,...v]);else if(y){const A=v.map(k=>({item:k,type:"add"}));y(A)}},[]),l=_.useCallback(()=>{const{getNodes:m,edges:v=[],transform:g}=t.getState(),[E,N,y]=g;return{nodes:m().map(A=>({...A})),edges:v.map(A=>({...A})),viewport:{x:E,y:N,zoom:y}}},[]),d=_.useCallback(({nodes:m,edges:v})=>{const{nodeInternals:g,getNodes:E,edges:N,hasDefaultNodes:y,hasDefaultEdges:A,onNodesDelete:k,onEdgesDelete:D,onNodesChange:I,onEdgesChange:R}=t.getState(),O=(m||[]).map(b=>b.id),H=(v||[]).map(b=>b.id),V=E().reduce((b,S)=>{const C=S.parentNode||S.parentId,P=!O.includes(S.id)&&C&&b.find(T=>T.id===C);return(typeof S.deletable=="boolean"?S.deletable:!0)&&(O.includes(S.id)||P)&&b.push(S),b},[]),z=N.filter(b=>typeof b.deletable=="boolean"?b.deletable:!0),f=z.filter(b=>H.includes(b.id));if(V||f){const b=Qr(V,z),S=[...f,...b],C=S.reduce((P,w)=>(P.includes(w.id)||P.push(w.id),P),[]);if((A||y)&&(A&&t.setState({edges:N.filter(P=>!C.includes(P.id))}),y&&(V.forEach(P=>{g.delete(P.id)}),t.setState({nodeInternals:new Map(g)}))),C.length>0&&(D?.(S),R&&R(C.map(P=>({id:P,type:"remove"})))),V.length>0&&(k?.(V),I)){const P=V.map(w=>({id:w.id,type:"remove"}));I(P)}}},[]),h=_.useCallback(m=>{const v=mu(m),g=v?null:t.getState().nodeInternals.get(m.id);return!v&&!g?[null,null,v]:[v?m:Io(g),g,v]},[]),p=_.useCallback((m,v=!0,g)=>{const[E,N,y]=h(m);return E?(g||t.getState().getNodes()).filter(A=>{if(!y&&(A.id===N.id||!A.positionAbsolute))return!1;const k=Io(A),D=Pn(k,E);return v&&D>0||D>=E.width*E.height}):[]},[]),x=_.useCallback((m,v,g=!0)=>{const[E]=h(m);if(!E)return!1;const N=Pn(E,v);return g&&N>0||N>=E.width*E.height},[]);return _.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:r,getEdge:i,setNodes:s,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:x}),[e,n,o,r,i,s,a,c,u,l,d,p,x])}const Ku={actInsideInputWithModifier:!1};var Qu=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ne(),{deleteElements:o}=ps(),r=It(e,Ku),i=It(t);_.useEffect(()=>{if(r){const{edges:s,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=s.filter(l=>l.selected);o({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),_.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function Ju(e){const t=ne();_.useEffect(()=>{let n;const o=()=>{if(!e.current)return;const r=Kn(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",ke.error004()),t.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const so={position:"absolute",width:"100%",height:"100%",top:0,left:0},ju=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ut=e=>({x:e.x,y:e.y,zoom:e.k}),ot=(e,t)=>e.target.closest(`.${t}`),Bo=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xo=e=>{const t=e.ctrlKey&&tn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},ed=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),td=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=Ye.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:h,translateExtent:p,minZoom:x,maxZoom:m,zoomActivationKeyCode:v,preventScrolling:g=!0,children:E,noWheelClassName:N,noPanClassName:y})=>{const A=_.useRef(),k=ne(),D=_.useRef(!1),I=_.useRef(!1),R=_.useRef(null),O=_.useRef({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:V,d3ZoomHandler:z,userSelectionActive:f}=ee(ed,re),b=It(v),S=_.useRef(0),C=_.useRef(!1),P=_.useRef();return Ju(R),_.useEffect(()=>{if(R.current){const w=R.current.getBoundingClientRect(),T=lu().scaleExtent([x,m]).translateExtent(p),M=pe(R.current).call(T),L=ze.translate(h.x,h.y).scale(ht(h.zoom,x,m)),B=[[0,0],[w.width,w.height]],F=T.constrain()(L,B,p);T.transform(M,F),T.wheelDelta(Xo),k.setState({d3Zoom:T,d3Selection:M,d3ZoomHandler:M.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:R.current.closest(".react-flow")})}},[]),_.useEffect(()=>{V&&H&&(s&&!b&&!f?V.on("wheel.zoom",w=>{if(ot(w,N))return!1;w.preventDefault(),w.stopImmediatePropagation();const T=V.property("__zoom").k||1,M=tn();if(w.ctrlKey&&i&&M){const j=Se(w),K=Xo(w),ie=T*Math.pow(2,K);H.scaleTo(V,ie,j,w);return}const L=w.deltaMode===1?20:1;let B=c===Ye.Vertical?0:w.deltaX*L,F=c===Ye.Horizontal?0:w.deltaY*L;!M&&w.shiftKey&&c!==Ye.Vertical&&(B=w.deltaY*L,F=0),H.translateBy(V,-(B/T)*a,-(F/T)*a,{internal:!0});const Y=Ut(V.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:W,onViewportChangeEnd:G}=k.getState();clearTimeout(P.current),C.current||(C.current=!0,t?.(w,Y),Z?.(Y)),C.current&&(e?.(w,Y),W?.(Y),P.current=setTimeout(()=>{n?.(w,Y),G?.(Y),C.current=!1},150))},{passive:!1}):typeof z<"u"&&V.on("wheel.zoom",function(w,T){if(!g||ot(w,N))return null;w.preventDefault(),z.call(this,w,T)},{passive:!1}))},[f,s,c,V,H,z,b,i,g,N,t,e,n]),_.useEffect(()=>{H&&H.on("start",w=>{if(!w.sourceEvent||w.sourceEvent.internal)return null;S.current=w.sourceEvent?.button;const{onViewportChangeStart:T}=k.getState(),M=Ut(w.transform);D.current=!0,O.current=M,w.sourceEvent?.type==="mousedown"&&k.setState({paneDragging:!0}),T?.(M),t?.(w.sourceEvent,M)})},[H,t]),_.useEffect(()=>{H&&(f&&!D.current?H.on("zoom",null):f||H.on("zoom",w=>{const{onViewportChange:T}=k.getState();if(k.setState({transform:[w.transform.x,w.transform.y,w.transform.k]}),I.current=!!(o&&Bo(d,S.current??0)),(e||T)&&!w.sourceEvent?.internal){const M=Ut(w.transform);T?.(M),e?.(w.sourceEvent,M)}}))},[f,H,e,d,o]),_.useEffect(()=>{H&&H.on("end",w=>{if(!w.sourceEvent||w.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=k.getState();if(D.current=!1,k.setState({paneDragging:!1}),o&&Bo(d,S.current??0)&&!I.current&&o(w.sourceEvent),I.current=!1,(n||T)&&ju(O.current,w.transform)){const M=Ut(w.transform);O.current=M,clearTimeout(A.current),A.current=setTimeout(()=>{T?.(M),n?.(w.sourceEvent,M)},s?150:0)}})},[H,s,d,n,o]),_.useEffect(()=>{H&&H.filter(w=>{const T=b||r,M=i&&w.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&w.button===1&&w.type==="mousedown"&&(ot(w,"react-flow__node")||ot(w,"react-flow__edge")))return!0;if(!d&&!T&&!s&&!u&&!i||f||!u&&w.type==="dblclick"||ot(w,N)&&w.type==="wheel"||ot(w,y)&&(w.type!=="wheel"||s&&w.type==="wheel"&&!b)||!i&&w.ctrlKey&&w.type==="wheel"||!T&&!s&&!M&&w.type==="wheel"||!d&&(w.type==="mousedown"||w.type==="touchstart")||Array.isArray(d)&&!d.includes(w.button)&&(w.type==="mousedown"||w.type==="touchstart"))return!1;const L=Array.isArray(d)&&d.includes(w.button)||!w.button||w.button<=1;return(!w.ctrlKey||w.type==="wheel")&&L})},[f,H,r,i,s,u,d,l,b]),$.createElement("div",{className:"react-flow__renderer",ref:R,style:so},E)},nd=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function od(){const{userSelectionActive:e,userSelectionRect:t}=ee(nd,re);return e&&t?$.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Uo(e,t){const n=t.parentNode||t.parentId,o=e.find(r=>r.id===n);if(o){const r=t.position.x+t.width-o.width,i=t.position.y+t.height-o.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),i>0&&(o.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);o.position.x=o.position.x-s,o.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);o.position.y=o.position.y-s,o.style.height+=s,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function gs(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,r)=>{const i=e.filter(a=>a.id===r.id);if(i.length===0)return o.push(r),o;const s={...r};for(const a of i)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&Uo(o,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&Uo(o,s);break}case"remove":return o}return o.push(s),o},n)}function ms(e,t){return gs(e,t)}function rd(e,t){return gs(e,t)}const Ie=(e,t)=>({id:e,type:"select",selected:t});function st(e,t){return e.reduce((n,o)=>{const r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(Ie(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(Ie(o.id,!1))),n},[])}const _n=(e,t)=>n=>{n.target===t.current&&e?.(n)},sd=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),ys=_.memo(({isSelecting:e,selectionMode:t=$t.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:d})=>{const h=_.useRef(null),p=ne(),x=_.useRef(0),m=_.useRef(0),v=_.useRef(),{userSelectionActive:g,elementsSelectable:E,dragging:N}=ee(sd,re),y=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,m.current=0},A=z=>{i?.(z),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},k=z=>{if(Array.isArray(n)&&n?.includes(2)){z.preventDefault();return}s?.(z)},D=a?z=>a(z):void 0,I=z=>{const{resetSelectedElements:f,domNode:b}=p.getState();if(v.current=b?.getBoundingClientRect(),!E||!e||z.button!==0||z.target!==h.current||!v.current)return;const{x:S,y:C}=Pe(z,v.current);f(),p.setState({userSelectionRect:{width:0,height:0,startX:S,startY:C,x:S,y:C}}),o?.(z)},R=z=>{const{userSelectionRect:f,nodeInternals:b,edges:S,transform:C,onNodesChange:P,onEdgesChange:w,nodeOrigin:T,getNodes:M}=p.getState();if(!e||!v.current||!f)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const L=Pe(z,v.current),B=f.startX??0,F=f.startY??0,Y={...f,x:L.x<B?L.x:B,y:L.y<F?L.y:F,width:Math.abs(L.x-B),height:Math.abs(L.y-F)},Z=M(),W=Kr(b,Y,C,t===$t.Partial,!0,T),G=Qr(W,S).map(K=>K.id),j=W.map(K=>K.id);if(x.current!==j.length){x.current=j.length;const K=st(Z,j);K.length&&P?.(K)}if(m.current!==G.length){m.current=G.length;const K=st(S,G);K.length&&w?.(K)}p.setState({userSelectionRect:Y})},O=z=>{if(z.button!==0)return;const{userSelectionRect:f}=p.getState();!g&&f&&z.target===h.current&&A?.(z),p.setState({nodesSelectionActive:x.current>0}),y(),r?.(z)},H=z=>{g&&(p.setState({nodesSelectionActive:x.current>0}),r?.(z)),y()},V=E&&(e||g);return $.createElement("div",{className:de(["react-flow__pane",{dragging:N,selection:e}]),onClick:V?void 0:_n(A,h),onContextMenu:_n(k,h),onWheel:_n(D,h),onMouseEnter:V?void 0:c,onMouseDown:V?I:void 0,onMouseMove:V?R:u,onMouseUp:V?O:void 0,onMouseLeave:V?H:l,ref:h,style:so},d,$.createElement(od,null))});ys.displayName="Pane";function xs(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return o?o.selected?!0:xs(o,t):!1}function Yo(e,t,n){let o=e;do{if(o?.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function id(e,t,n,o){return Array.from(e.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!xs(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>({id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(r.positionAbsolute?.x??0),y:n.y-(r.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}))}function ad(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function ws(e,t,n,o,r=[0,0],i){const s=ad(e,e.extent||o);let a=s;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const d=n.get(c),{x:h,y:p}=ct(d,r).positionAbsolute;a=d&&ue(h)&&ue(p)&&ue(d.width)&&ue(d.height)?[[h+e.width*r[0],p+e.height*r[1]],[h+d.width-e.width+e.width*r[0],p+d.height-e.height+e.height*r[1]]]:a}else i?.("005",ke.error005()),a=s;else if(e.extent&&c&&e.extent!=="parent"){const d=n.get(c),{x:h,y:p}=ct(d,r).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const d=n.get(c);u=ct(d,r).positionAbsolute}const l=a&&a!=="parent"?Qn(t,a):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function Nn({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?o.find(r=>r.id===e):o[0],o]}const qo=(e,t,n,o)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const i=Array.from(r),s=t.getBoundingClientRect(),a={x:s.width*o[0],y:s.height*o[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...Kn(c)}})};function St(e,t,n){return n===void 0?n:o=>{const r=t().nodeInternals.get(e);r&&n(o,{...r})}}function Fn({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c?.("012",ke.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([e])}function cd(){const e=ne();return _.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:i?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:i?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function Mn(e){return(t,n,o)=>e?.(t,o)}function vs({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,selectNodesOnDrag:s}){const a=ne(),[c,u]=_.useState(!1),l=_.useRef([]),d=_.useRef({x:null,y:null}),h=_.useRef(0),p=_.useRef(null),x=_.useRef({x:0,y:0}),m=_.useRef(null),v=_.useRef(!1),g=_.useRef(!1),E=cd();return _.useEffect(()=>{if(e?.current){const N=pe(e.current),y=({x:D,y:I})=>{const{nodeInternals:R,onNodeDrag:O,onSelectionDrag:H,updateNodePositions:V,nodeExtent:z,snapGrid:f,snapToGrid:b,nodeOrigin:S,onError:C}=a.getState();d.current={x:D,y:I};let P=!1,w={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&z){const M=no(l.current,S);w=Tt(M)}if(l.current=l.current.map(M=>{const L={x:D-M.distance.x,y:I-M.distance.y};b&&(L.x=f[0]*Math.round(L.x/f[0]),L.y=f[1]*Math.round(L.y/f[1]));const B=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];l.current.length>1&&z&&!M.extent&&(B[0][0]=M.positionAbsolute.x-w.x+z[0][0],B[1][0]=M.positionAbsolute.x+(M.width??0)-w.x2+z[1][0],B[0][1]=M.positionAbsolute.y-w.y+z[0][1],B[1][1]=M.positionAbsolute.y+(M.height??0)-w.y2+z[1][1]);const F=ws(M,L,R,B,S,C);return P=P||M.position.x!==F.position.x||M.position.y!==F.position.y,M.position=F.position,M.positionAbsolute=F.positionAbsolute,M}),!P)return;V(l.current,!0,!0),u(!0);const T=r?O:Mn(H);if(T&&m.current){const[M,L]=Nn({nodeId:r,dragItems:l.current,nodeInternals:R});T(m.current,M,L)}},A=()=>{if(!p.current)return;const[D,I]=Hr(x.current,p.current);if(D!==0||I!==0){const{transform:R,panBy:O}=a.getState();d.current.x=(d.current.x??0)-D/R[2],d.current.y=(d.current.y??0)-I/R[2],O({x:D,y:I})&&y(d.current)}h.current=requestAnimationFrame(A)},k=D=>{const{nodeInternals:I,multiSelectionActive:R,nodesDraggable:O,unselectNodesAndEdges:H,onNodeDragStart:V,onSelectionDragStart:z}=a.getState();g.current=!0;const f=r?V:Mn(z);(!s||!i)&&!R&&r&&(I.get(r)?.selected||H()),r&&i&&s&&Fn({id:r,store:a,nodeRef:e});const b=E(D);if(d.current=b,l.current=id(I,O,b,r),f&&l.current){const[S,C]=Nn({nodeId:r,dragItems:l.current,nodeInternals:I});f(D.sourceEvent,S,C)}};if(t)N.on(".drag",null);else{const D=wc().on("start",I=>{const{domNode:R,nodeDragThreshold:O}=a.getState();O===0&&k(I);const H=E(I);d.current=H,p.current=R?.getBoundingClientRect()||null,x.current=Pe(I.sourceEvent,p.current)}).on("drag",I=>{const R=E(I),{autoPanOnNodeDrag:O,nodeDragThreshold:H}=a.getState();if(!v.current&&g.current&&O&&(v.current=!0,A()),!g.current){const V=R.xSnapped-(d?.current?.x??0),z=R.ySnapped-(d?.current?.y??0);Math.sqrt(V*V+z*z)>H&&k(I)}(d.current.x!==R.xSnapped||d.current.y!==R.ySnapped)&&l.current&&g.current&&(m.current=I.sourceEvent,x.current=Pe(I.sourceEvent,p.current),y(R))}).on("end",I=>{if(g.current&&(u(!1),v.current=!1,g.current=!1,cancelAnimationFrame(h.current),l.current)){const{updateNodePositions:R,nodeInternals:O,onNodeDragStop:H,onSelectionDragStop:V}=a.getState(),z=r?H:Mn(V);if(R(l.current,!1,!1),z){const[f,b]=Nn({nodeId:r,dragItems:l.current,nodeInternals:O});z(I.sourceEvent,f,b)}}}).filter(I=>{const R=I.target;return!I.button&&(!n||!Yo(R,`.${n}`,e))&&(!o||Yo(R,o,e))});return N.call(D),()=>{N.on(".drag",null)}}}},[e,t,n,o,i,a,r,s,E]),c}function Ss(){const e=ne();return _.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:i,getNodes:s,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=e.getState(),d=s().filter(E=>E.selected&&(E.draggable||l&&typeof E.draggable>"u")),h=a?c[0]:5,p=a?c[1]:5,x=n.isShiftPressed?4:1,m=n.x*h*x,v=n.y*p*x,g=d.map(E=>{if(E.positionAbsolute){const N={x:E.positionAbsolute.x+m,y:E.positionAbsolute.y+v};a&&(N.x=c[0]*Math.round(N.x/c[0]),N.y=c[1]*Math.round(N.y/c[1]));const{positionAbsolute:y,position:A}=ws(E,N,o,r,void 0,u);E.position=A,E.positionAbsolute=y}return E});i(g,!0,!1)},[])}const lt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Et=e=>{const t=({id:n,type:o,data:r,xPos:i,yPos:s,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onContextMenu:x,onDoubleClick:m,style:v,className:g,isDraggable:E,isSelectable:N,isConnectable:y,isFocusable:A,selectNodesOnDrag:k,sourcePosition:D,targetPosition:I,hidden:R,resizeObserver:O,dragHandle:H,zIndex:V,isParent:z,noDragClassName:f,noPanClassName:b,initialized:S,disableKeyboardA11y:C,ariaLabel:P,rfId:w,hasHandleBounds:T})=>{const M=ne(),L=_.useRef(null),B=_.useRef(null),F=_.useRef(D),Y=_.useRef(I),Z=_.useRef(o),W=N||E||l||d||h||p,G=Ss(),j=St(n,M.getState,d),K=St(n,M.getState,h),ie=St(n,M.getState,p),le=St(n,M.getState,x),fe=St(n,M.getState,m),ye=Q=>{const{nodeDragThreshold:U}=M.getState();if(N&&(!k||!E||U>0)&&Fn({id:n,store:M,nodeRef:L}),l){const ae=M.getState().nodeInternals.get(n);ae&&l(Q,{...ae})}},te=Q=>{if(!Dn(Q)&&!C)if(Fr.includes(Q.key)&&N){const U=Q.key==="Escape";Fn({id:n,store:M,unselect:U,nodeRef:L})}else E&&u&&Object.prototype.hasOwnProperty.call(lt,Q.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),G({x:lt[Q.key].x,y:lt[Q.key].y,isShiftPressed:Q.shiftKey}))};_.useEffect(()=>()=>{B.current&&O?.unobserve(B.current)},[]),_.useEffect(()=>{if(L.current&&!R){const Q=L.current;(!S||!T)&&(B.current&&O?.unobserve(B.current),O?.observe(Q),B.current=Q)}},[R,S,T]),_.useEffect(()=>{const Q=Z.current!==o,U=F.current!==D,ae=Y.current!==I;L.current&&(Q||U||ae)&&(Q&&(Z.current=o),U&&(F.current=D),ae&&(Y.current=I),M.getState().updateNodeDimensions([{id:n,nodeElement:L.current,forceUpdate:!0}]))},[n,o,D,I]);const xe=vs({nodeRef:L,disabled:R||!E,noDragClassName:f,handleSelector:H,nodeId:n,isSelectable:N,selectNodesOnDrag:k});return R?null:$.createElement("div",{className:de(["react-flow__node",`react-flow__node-${o}`,{[b]:E},g,{selected:u,selectable:N,parent:z,dragging:xe}]),ref:L,style:{zIndex:V,transform:`translate(${a}px,${c}px)`,pointerEvents:W?"all":"none",visibility:S?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:j,onMouseMove:K,onMouseLeave:ie,onContextMenu:le,onClick:ye,onDoubleClick:fe,onKeyDown:A?te:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":C?void 0:`${ls}-${w}`,"aria-label":P},$.createElement(bu,{value:n},$.createElement(e,{id:n,data:r,type:o,xPos:i,yPos:s,selected:u,isConnectable:y,sourcePosition:D,targetPosition:I,dragging:xe,dragHandle:H,zIndex:V})))};return t.displayName="NodeWrapper",_.memo(t)};const ld=e=>{const t=e.getNodes().filter(n=>n.selected);return{...no(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function ud({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ne(),{width:r,height:i,x:s,y:a,transformString:c,userSelectionActive:u}=ee(ld,re),l=Ss(),d=_.useRef(null);if(_.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),vs({nodeRef:d}),u||!r||!i)return null;const h=e?x=>{const m=o.getState().getNodes().filter(v=>v.selected);e(x,m)}:void 0,p=x=>{Object.prototype.hasOwnProperty.call(lt,x.key)&&l({x:lt[x.key].x,y:lt[x.key].y,isShiftPressed:x.shiftKey})};return $.createElement("div",{className:de(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},$.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:r,height:i,top:a,left:s}}))}var dd=_.memo(ud);const fd=e=>e.nodesSelectionActive,Es=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:x,onSelectionEnd:m,multiSelectionKeyCode:v,panActivationKeyCode:g,zoomActivationKeyCode:E,elementsSelectable:N,zoomOnScroll:y,zoomOnPinch:A,panOnScroll:k,panOnScrollSpeed:D,panOnScrollMode:I,zoomOnDoubleClick:R,panOnDrag:O,defaultViewport:H,translateExtent:V,minZoom:z,maxZoom:f,preventScrolling:b,onSelectionContextMenu:S,noWheelClassName:C,noPanClassName:P,disableKeyboardA11y:w})=>{const T=ee(fd),M=It(d),L=It(g),B=L||O,F=L||k,Y=M||h&&B!==!0;return Qu({deleteKeyCode:a,multiSelectionKeyCode:v}),$.createElement(td,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:i,elementsSelectable:N,zoomOnScroll:y,zoomOnPinch:A,panOnScroll:F,panOnScrollSpeed:D,panOnScrollMode:I,zoomOnDoubleClick:R,panOnDrag:!M&&B,defaultViewport:H,translateExtent:V,minZoom:z,maxZoom:f,zoomActivationKeyCode:E,preventScrolling:b,noWheelClassName:C,noPanClassName:P},$.createElement(ys,{onSelectionStart:x,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:B,isSelecting:!!Y,selectionMode:p},e,T&&$.createElement(dd,{onSelectionContextMenu:S,noPanClassName:P,disableKeyboardA11y:w})))};Es.displayName="FlowRenderer";var hd=_.memo(Es);function pd(e){return ee(_.useCallback(n=>e?Kr(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function gd(e){const t={input:Et(e.input||ss),default:Et(e.default||Vn),output:Et(e.output||as),group:Et(e.group||ro)},n={},o=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=Et(e[i]||Vn),r),n);return{...t,...o}}const md=({x:e,y:t,width:n,height:o,origin:r})=>!n||!o?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-o*r[1]},yd=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),bs=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:i,onError:s}=ee(yd,re),a=pd(e.onlyRenderVisibleElements),c=_.useRef(),u=_.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const h=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));i(h)});return c.current=l,l},[]);return _.useEffect(()=>()=>{c?.current?.disconnect()},[]),$.createElement("div",{className:"react-flow__nodes",style:so},a.map(l=>{let d=l.type||"default";e.nodeTypes[d]||(s?.("003",ke.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,p=!!(l.draggable||t&&typeof l.draggable>"u"),x=!!(l.selectable||r&&typeof l.selectable>"u"),m=!!(l.connectable||n&&typeof l.connectable>"u"),v=!!(l.focusable||o&&typeof l.focusable>"u"),g=e.nodeExtent?Qn(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,E=g?.x??0,N=g?.y??0,y=md({x:E,y:N,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return $.createElement(h,{key:l.id,id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||X.Bottom,targetPosition:l.targetPosition||X.Top,hidden:l.hidden,xPos:E,yPos:N,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:p,isSelectable:x,isConnectable:m,isFocusable:v,resizeObserver:u,dragHandle:l.dragHandle,zIndex:l[J]?.z??0,isParent:!!l[J]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!l[J]?.handleBounds})}))};bs.displayName="NodeRenderer";var xd=_.memo(bs);const wd=(e,t,n)=>n===X.Left?e-t:n===X.Right?e+t:e,vd=(e,t,n)=>n===X.Top?e-t:n===X.Bottom?e+t:e,Zo="react-flow__edgeupdater",Wo=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:a})=>$.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:de([Zo,`${Zo}-${a}`]),cx:wd(t,o,e),cy:vd(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),Sd=()=>!0;var rt=e=>{const t=({id:n,className:o,type:r,data:i,onClick:s,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:m,style:v,source:g,target:E,sourceX:N,sourceY:y,targetX:A,targetY:k,sourcePosition:D,targetPosition:I,elementsSelectable:R,hidden:O,sourceHandleId:H,targetHandleId:V,onContextMenu:z,onMouseEnter:f,onMouseMove:b,onMouseLeave:S,edgeUpdaterRadius:C,onEdgeUpdate:P,onEdgeUpdateStart:w,onEdgeUpdateEnd:T,markerEnd:M,markerStart:L,rfId:B,ariaLabel:F,isFocusable:Y,isUpdatable:Z,pathOptions:W,interactionWidth:G,disableKeyboardA11y:j})=>{const K=_.useRef(null),[ie,le]=_.useState(!1),[fe,ye]=_.useState(!1),te=ne(),xe=_.useMemo(()=>`url('#${Ln(L,B)}')`,[L,B]),Q=_.useMemo(()=>`url('#${Ln(M,B)}')`,[M,B]);if(O)return null;const U=oe=>{const{edges:we,addSelectedEdges:Oe,unselectNodesAndEdges:Ve,multiSelectionActive:et}=te.getState(),ve=we.find(Fe=>Fe.id===n);ve&&(R&&(te.setState({nodesSelectionActive:!1}),ve.selected&&et?(Ve({nodes:[],edges:[ve]}),K.current?.blur()):Oe([n])),s&&s(oe,ve))},ae=vt(n,te.getState,a),De=vt(n,te.getState,z),gt=vt(n,te.getState,f),Ge=vt(n,te.getState,b),Ke=vt(n,te.getState,S),_e=(oe,we)=>{if(oe.button!==0)return;const{edges:Oe,isValidConnection:Ve}=te.getState(),et=we?E:g,ve=(we?V:H)||null,Fe=we?"target":"source",fn=Ve||Sd,hn=we,yt=Oe.find(Be=>Be.id===n);ye(!0),w?.(oe,yt,Fe);const pn=Be=>{ye(!1),T?.(Be,yt,Fe)};ts({event:oe,handleId:ve,nodeId:et,onConnect:Be=>P?.(yt,Be),isTarget:hn,getState:te.getState,setState:te.setState,isValidConnection:fn,edgeUpdaterType:Fe,onEdgeUpdateEnd:pn})},Qe=oe=>_e(oe,!0),He=oe=>_e(oe,!1),Le=()=>le(!0),Je=()=>le(!1),je=!R&&!s,mt=oe=>{if(!j&&Fr.includes(oe.key)&&R){const{unselectNodesAndEdges:we,addSelectedEdges:Oe,edges:Ve}=te.getState();oe.key==="Escape"?(K.current?.blur(),we({edges:[Ve.find(ve=>ve.id===n)]})):Oe([n])}};return $.createElement("g",{className:de(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:c,animated:u,inactive:je,updating:ie}]),onClick:U,onDoubleClick:ae,onContextMenu:De,onMouseEnter:gt,onMouseMove:Ge,onMouseLeave:Ke,onKeyDown:Y?mt:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${g} to ${E}`,"aria-describedby":Y?`${us}-${B}`:void 0,ref:K},!fe&&$.createElement(e,{id:n,source:g,target:E,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:m,data:i,style:v,sourceX:N,sourceY:y,targetX:A,targetY:k,sourcePosition:D,targetPosition:I,sourceHandleId:H,targetHandleId:V,markerStart:xe,markerEnd:Q,pathOptions:W,interactionWidth:G}),Z&&$.createElement($.Fragment,null,(Z==="source"||Z===!0)&&$.createElement(Wo,{position:D,centerX:N,centerY:y,radius:C,onMouseDown:Qe,onMouseEnter:Le,onMouseOut:Je,type:"source"}),(Z==="target"||Z===!0)&&$.createElement(Wo,{position:I,centerX:A,centerY:k,radius:C,onMouseDown:He,onMouseEnter:Le,onMouseOut:Je,type:"target"})))};return t.displayName="EdgeWrapper",_.memo(t)};function Ed(e){const t={default:rt(e.default||nn),straight:rt(e.bezier||eo),step:rt(e.step||jn),smoothstep:rt(e.step||dn),simplebezier:rt(e.simplebezier||Jn)},n={},o=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=rt(e[i]||nn),r),n);return{...t,...o}}function Go(e,t,n=null){const o=(n?.x||0)+t.x,r=(n?.y||0)+t.y,i=n?.width||t.width,s=n?.height||t.height;switch(e){case X.Top:return{x:o+i/2,y:r};case X.Right:return{x:o+i,y:r+s/2};case X.Bottom:return{x:o+i/2,y:r+s};case X.Left:return{x:o,y:r+s/2}}}function Ko(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const bd=(e,t,n,o,r,i)=>{const s=Go(n,e,t),a=Go(i,o,r);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function _d({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=Tt({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:a/c[2]}),d=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),h=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(d*h)>0}function Qo(e){const t=e?.[J]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const Nd=[{level:0,isMaxLevel:!0,edges:[]}];function Md(e,t,n=!1){let o=-1;const r=e.reduce((s,a)=>{const c=ue(a.zIndex);let u=c?a.zIndex:0;if(n){const l=t.get(a.target),d=t.get(a.source),h=a.selected||l?.selected||d?.selected,p=Math.max(d?.[J]?.z||0,l?.[J]?.z||0,1e3);u=(c?a.zIndex:0)+(h?p:0)}return s[u]?s[u].push(a):s[u]=[a],o=u>o?u:o,s},{}),i=Object.entries(r).map(([s,a])=>{const c=+s;return{edges:a,level:c,isMaxLevel:c===o}});return i.length===0?Nd:i}function Cd(e,t,n){const o=ee(_.useCallback(r=>e?r.edges.filter(i=>{const s=t.get(i.source),a=t.get(i.target);return s?.width&&s?.height&&a?.width&&a?.height&&_d({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return Md(o,t,n)}const Ad=({color:e="none",strokeWidth:t=1})=>$.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),kd=({color:e="none",strokeWidth:t=1})=>$.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Jo={[pt.Arrow]:Ad,[pt.ArrowClosed]:kd};function Td(e){const t=ne();return _.useMemo(()=>Object.prototype.hasOwnProperty.call(Jo,e)?Jo[e]:(t.getState().onError?.("009",ke.error009(e)),null),[e])}const $d=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=Td(t);return c?$.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},$.createElement(c,{color:n,strokeWidth:s})):null},Id=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=Ln(s,t);o.includes(a)||(r.push({id:a,color:s.color||e,...s}),o.push(a))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},_s=({defaultColor:e,rfId:t})=>{const n=ee(_.useCallback(Id({defaultColor:e,rfId:t}),[e,t]),(o,r)=>!(o.length!==r.length||o.some((i,s)=>i.id!==r[s].id)));return $.createElement("defs",null,n.map(o=>$.createElement($d,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};_s.displayName="MarkerDefinitions";var Rd=_.memo(_s);const zd=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Ns=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:i,onEdgeUpdate:s,onEdgeContextMenu:a,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:l,onEdgeClick:d,edgeUpdaterRadius:h,onEdgeDoubleClick:p,onEdgeUpdateStart:x,onEdgeUpdateEnd:m,children:v,disableKeyboardA11y:g})=>{const{edgesFocusable:E,edgesUpdatable:N,elementsSelectable:y,width:A,height:k,connectionMode:D,nodeInternals:I,onError:R}=ee(zd,re),O=Cd(t,I,n);return A?$.createElement($.Fragment,null,O.map(({level:H,edges:V,isMaxLevel:z})=>$.createElement("svg",{key:H,style:{zIndex:H},width:A,height:k,className:"react-flow__edges react-flow__container"},z&&$.createElement(Rd,{defaultColor:e,rfId:o}),$.createElement("g",null,V.map(f=>{const[b,S,C]=Qo(I.get(f.source)),[P,w,T]=Qo(I.get(f.target));if(!C||!T)return null;let M=f.type||"default";r[M]||(R?.("011",ke.error011(M)),M="default");const L=r[M]||r.default,B=D===We.Strict?w.target:(w.target??[]).concat(w.source??[]),F=Ko(S.source,f.sourceHandle),Y=Ko(B,f.targetHandle),Z=F?.position||X.Bottom,W=Y?.position||X.Top,G=!!(f.focusable||E&&typeof f.focusable>"u"),j=typeof s<"u"&&(f.updatable||N&&typeof f.updatable>"u");if(!F||!Y)return R?.("008",ke.error008(F,f)),null;const{sourceX:K,sourceY:ie,targetX:le,targetY:fe}=bd(b,F,Z,P,Y,W);return $.createElement(L,{key:f.id,id:f.id,className:de([f.className,i]),type:M,data:f.data,selected:!!f.selected,animated:!!f.animated,hidden:!!f.hidden,label:f.label,labelStyle:f.labelStyle,labelShowBg:f.labelShowBg,labelBgStyle:f.labelBgStyle,labelBgPadding:f.labelBgPadding,labelBgBorderRadius:f.labelBgBorderRadius,style:f.style,source:f.source,target:f.target,sourceHandleId:f.sourceHandle,targetHandleId:f.targetHandle,markerEnd:f.markerEnd,markerStart:f.markerStart,sourceX:K,sourceY:ie,targetX:le,targetY:fe,sourcePosition:Z,targetPosition:W,elementsSelectable:y,onEdgeUpdate:s,onContextMenu:a,onMouseEnter:c,onMouseMove:u,onMouseLeave:l,onClick:d,edgeUpdaterRadius:h,onEdgeDoubleClick:p,onEdgeUpdateStart:x,onEdgeUpdateEnd:m,rfId:o,ariaLabel:f.ariaLabel,isFocusable:G,isUpdatable:j,pathOptions:"pathOptions"in f?f.pathOptions:void 0,interactionWidth:f.interactionWidth,disableKeyboardA11y:g})})))),v):null};Ns.displayName="EdgeRenderer";var Pd=_.memo(Ns);const Dd=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Hd({children:e}){const t=ee(Dd);return $.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Ld(e){const t=ps(),n=_.useRef(!1);_.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Od={[X.Left]:X.Right,[X.Right]:X.Left,[X.Top]:X.Bottom,[X.Bottom]:X.Top},Ms=({nodeId:e,handleType:t,style:n,type:o=Re.Bezier,CustomComponent:r,connectionStatus:i})=>{const{fromNode:s,handleId:a,toX:c,toY:u,connectionMode:l}=ee(_.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),re),d=s?.[J]?.handleBounds;let h=d?.[t];if(l===We.Loose&&(h=h||d?.[t==="source"?"target":"source"]),!s||!h)return null;const p=a?h.find(k=>k.id===a):h[0],x=p?p.x+p.width/2:(s.width??0)/2,m=p?p.y+p.height/2:s.height??0,v=(s.positionAbsolute?.x??0)+x,g=(s.positionAbsolute?.y??0)+m,E=p?.position,N=E?Od[E]:null;if(!E||!N)return null;if(r)return $.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:s,fromHandle:p,fromX:v,fromY:g,toX:c,toY:u,fromPosition:E,toPosition:N,connectionStatus:i});let y="";const A={sourceX:v,sourceY:g,sourcePosition:E,targetX:c,targetY:u,targetPosition:N};return o===Re.Bezier?[y]=qr(A):o===Re.Step?[y]=Hn({...A,borderRadius:0}):o===Re.SmoothStep?[y]=Hn(A):o===Re.SimpleBezier?[y]=Yr(A):y=`M${v},${g} ${c},${u}`,$.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};Ms.displayName="ConnectionLine";const Vd=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Fd({containerStyle:e,style:t,type:n,component:o}){const{nodeId:r,handleType:i,nodesConnectable:s,width:a,height:c,connectionStatus:u}=ee(Vd,re);return!(r&&i&&a&&s)?null:$.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},$.createElement("g",{className:de(["react-flow__connection",u])},$.createElement(Ms,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:o,connectionStatus:u})))}function jo(e,t){return _.useRef(null),ne(),_.useMemo(()=>t(e),[e])}const Cs=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:i,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:x,onSelectionStart:m,onSelectionEnd:v,connectionLineType:g,connectionLineStyle:E,connectionLineComponent:N,connectionLineContainerStyle:y,selectionKeyCode:A,selectionOnDrag:k,selectionMode:D,multiSelectionKeyCode:I,panActivationKeyCode:R,zoomActivationKeyCode:O,deleteKeyCode:H,onlyRenderVisibleElements:V,elementsSelectable:z,selectNodesOnDrag:f,defaultViewport:b,translateExtent:S,minZoom:C,maxZoom:P,preventScrolling:w,defaultMarkerColor:T,zoomOnScroll:M,zoomOnPinch:L,panOnScroll:B,panOnScrollSpeed:F,panOnScrollMode:Y,zoomOnDoubleClick:Z,panOnDrag:W,onPaneClick:G,onPaneMouseEnter:j,onPaneMouseMove:K,onPaneMouseLeave:ie,onPaneScroll:le,onPaneContextMenu:fe,onEdgeUpdate:ye,onEdgeContextMenu:te,onEdgeMouseEnter:xe,onEdgeMouseMove:Q,onEdgeMouseLeave:U,edgeUpdaterRadius:ae,onEdgeUpdateStart:De,onEdgeUpdateEnd:gt,noDragClassName:Ge,noWheelClassName:Ke,noPanClassName:_e,elevateEdgesOnSelect:Qe,disableKeyboardA11y:He,nodeOrigin:Le,nodeExtent:Je,rfId:je})=>{const mt=jo(e,gd),oe=jo(t,Ed);return Ld(i),$.createElement(hd,{onPaneClick:G,onPaneMouseEnter:j,onPaneMouseMove:K,onPaneMouseLeave:ie,onPaneContextMenu:fe,onPaneScroll:le,deleteKeyCode:H,selectionKeyCode:A,selectionOnDrag:k,selectionMode:D,onSelectionStart:m,onSelectionEnd:v,multiSelectionKeyCode:I,panActivationKeyCode:R,zoomActivationKeyCode:O,elementsSelectable:z,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:M,zoomOnPinch:L,zoomOnDoubleClick:Z,panOnScroll:B,panOnScrollSpeed:F,panOnScrollMode:Y,panOnDrag:W,defaultViewport:b,translateExtent:S,minZoom:C,maxZoom:P,onSelectionContextMenu:x,preventScrolling:w,noDragClassName:Ge,noWheelClassName:Ke,noPanClassName:_e,disableKeyboardA11y:He},$.createElement(Hd,null,$.createElement(Pd,{edgeTypes:oe,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:ye,onlyRenderVisibleElements:V,onEdgeContextMenu:te,onEdgeMouseEnter:xe,onEdgeMouseMove:Q,onEdgeMouseLeave:U,onEdgeUpdateStart:De,onEdgeUpdateEnd:gt,edgeUpdaterRadius:ae,defaultMarkerColor:T,noPanClassName:_e,elevateEdgesOnSelect:!!Qe,disableKeyboardA11y:He,rfId:je},$.createElement(Fd,{style:E,type:g,component:N,containerStyle:y})),$.createElement("div",{className:"react-flow__edgelabel-renderer"}),$.createElement(xd,{nodeTypes:mt,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:f,onlyRenderVisibleElements:V,noPanClassName:_e,noDragClassName:Ge,disableKeyboardA11y:He,nodeOrigin:Le,nodeExtent:Je,rfId:je})))};Cs.displayName="GraphView";var Bd=_.memo(Cs);const Bn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Te={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Bn,nodeExtent:Bn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:We.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:yu,isValidConnection:void 0},Xd=()=>Xn((e,t)=>({...Te,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:i}=t();e({nodeInternals:bn(n,o,r,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",i=typeof o<"u",s=r?bn(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?o:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),l=c?.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((m,v)=>{const g=r.get(v.id);if(g?.hidden)r.set(g.id,{...g,[J]:{...g[J],handleBounds:void 0}});else if(g){const E=Kn(v.nodeElement);!!(E.width&&E.height&&(g.width!==E.width||g.height!==E.height||v.forceUpdate))&&(r.set(g.id,{...g,[J]:{...g[J],handleBounds:{source:qo(".source",v.nodeElement,h,u),target:qo(".target",v.nodeElement,h,u)}},...E}),m.push({id:g.id,type:"dimensions",dimensions:E}))}return m},[]);fs(r,u);const x=s||i&&!s&&hs(t,{initial:!0,...a});e({nodeInternals:new Map(r),fitViewOnInitDone:x}),p?.length>0&&o?.(p)},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(a=>{const c={id:a.id,type:"position",dragging:r};return o&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});i(s)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:c}=t();if(n?.length){if(i){const u=ms(n,a()),l=bn(u,r,s,c);e({nodeInternals:l})}o?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=t();let s,a=null;o?s=n.map(c=>Ie(c,!0)):(s=st(i(),n),a=st(r,[])),Xt({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=t();let s,a=null;o?s=n.map(c=>Ie(c,!0)):(s=st(r,n),a=st(i(),[])),Xt({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:i}=t(),s=n||i(),a=o||r,c=s.map(l=>(l.selected=!1,Ie(l.id,!1))),u=a.map(l=>Ie(l.id,!1));Xt({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=t();o?.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=t();o?.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),i=o().filter(a=>a.selected).map(a=>Ie(a.id,!1)),s=n.filter(a=>a.selected).map(a=>Ie(a.id,!1));Xt({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(r=>{r.positionAbsolute=Qn(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:i,d3Zoom:s,d3Selection:a,translateExtent:c}=t();if(!s||!a||!n.x&&!n.y)return!1;const u=ze.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),l=[[0,0],[r,i]],d=s?.constrain()(u,l,c);return s.transform(a,d),o[0]!==d.x||o[1]!==d.y||o[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Te.connectionNodeId,connectionHandleId:Te.connectionHandleId,connectionHandleType:Te.connectionHandleType,connectionStatus:Te.connectionStatus,connectionStartHandle:Te.connectionStartHandle,connectionEndHandle:Te.connectionEndHandle}),reset:()=>e({...Te})}),Object.is),As=({children:e})=>{const t=_.useRef(null);return t.current||(t.current=Xd()),$.createElement(uu,{value:t.current},e)};As.displayName="ReactFlowProvider";const ks=({children:e})=>_.useContext(un)?$.createElement($.Fragment,null,e):$.createElement(As,null,e);ks.displayName="ReactFlowWrapper";const Ud={input:ss,default:Vn,output:as,group:ro},Yd={default:nn,straight:eo,step:jn,smoothstep:dn,simplebezier:Jn},qd=[0,0],Zd=[15,15],Wd={x:0,y:0,zoom:1},Gd={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Kd=_.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i=Ud,edgeTypes:s=Yd,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:x,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:g,onNodeMouseEnter:E,onNodeMouseMove:N,onNodeMouseLeave:y,onNodeContextMenu:A,onNodeDoubleClick:k,onNodeDragStart:D,onNodeDrag:I,onNodeDragStop:R,onNodesDelete:O,onEdgesDelete:H,onSelectionChange:V,onSelectionDragStart:z,onSelectionDrag:f,onSelectionDragStop:b,onSelectionContextMenu:S,onSelectionStart:C,onSelectionEnd:P,connectionMode:w=We.Strict,connectionLineType:T=Re.Bezier,connectionLineStyle:M,connectionLineComponent:L,connectionLineContainerStyle:B,deleteKeyCode:F="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:Z=!1,selectionMode:W=$t.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:j=tn()?"Meta":"Control",zoomActivationKeyCode:K=tn()?"Meta":"Control",snapToGrid:ie=!1,snapGrid:le=Zd,onlyRenderVisibleElements:fe=!1,selectNodesOnDrag:ye=!0,nodesDraggable:te,nodesConnectable:xe,nodesFocusable:Q,nodeOrigin:U=qd,edgesFocusable:ae,edgesUpdatable:De,elementsSelectable:gt,defaultViewport:Ge=Wd,minZoom:Ke=.5,maxZoom:_e=2,translateExtent:Qe=Bn,preventScrolling:He=!0,nodeExtent:Le,defaultMarkerColor:Je="#b1b1b7",zoomOnScroll:je=!0,zoomOnPinch:mt=!0,panOnScroll:oe=!1,panOnScrollSpeed:we=.5,panOnScrollMode:Oe=Ye.Free,zoomOnDoubleClick:Ve=!0,panOnDrag:et=!0,onPaneClick:ve,onPaneMouseEnter:Fe,onPaneMouseMove:fn,onPaneMouseLeave:hn,onPaneScroll:yt,onPaneContextMenu:pn,children:io,onEdgeUpdate:Be,onEdgeContextMenu:Ts,onEdgeDoubleClick:$s,onEdgeMouseEnter:Is,onEdgeMouseMove:Rs,onEdgeMouseLeave:zs,onEdgeUpdateStart:Ps,onEdgeUpdateEnd:Ds,edgeUpdaterRadius:Hs=10,onNodesChange:Ls,onEdgesChange:Os,noDragClassName:Vs="nodrag",noWheelClassName:Fs="nowheel",noPanClassName:ao="nopan",fitView:Bs=!1,fitViewOptions:Xs,connectOnClick:Us=!0,attributionPosition:Ys,proOptions:qs,defaultEdgeOptions:Zs,elevateNodesOnSelect:Ws=!0,elevateEdgesOnSelect:Gs=!1,disableKeyboardA11y:co=!1,autoPanOnConnect:Ks=!0,autoPanOnNodeDrag:Qs=!0,connectionRadius:Js=20,isValidConnection:js,onError:ei,style:ti,id:lo,nodeDragThreshold:ni,...oi},ri)=>{const gn=lo||"1";return $.createElement("div",{...oi,style:{...ti,...Gd},ref:ri,className:de(["react-flow",r]),"data-testid":"rf__wrapper",id:lo},$.createElement(ks,null,$.createElement(Bd,{onInit:u,onMove:l,onMoveStart:d,onMoveEnd:h,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:E,onNodeMouseMove:N,onNodeMouseLeave:y,onNodeContextMenu:A,onNodeDoubleClick:k,nodeTypes:i,edgeTypes:s,connectionLineType:T,connectionLineStyle:M,connectionLineComponent:L,connectionLineContainerStyle:B,selectionKeyCode:Y,selectionOnDrag:Z,selectionMode:W,deleteKeyCode:F,multiSelectionKeyCode:j,panActivationKeyCode:G,zoomActivationKeyCode:K,onlyRenderVisibleElements:fe,selectNodesOnDrag:ye,defaultViewport:Ge,translateExtent:Qe,minZoom:Ke,maxZoom:_e,preventScrolling:He,zoomOnScroll:je,zoomOnPinch:mt,zoomOnDoubleClick:Ve,panOnScroll:oe,panOnScrollSpeed:we,panOnScrollMode:Oe,panOnDrag:et,onPaneClick:ve,onPaneMouseEnter:Fe,onPaneMouseMove:fn,onPaneMouseLeave:hn,onPaneScroll:yt,onPaneContextMenu:pn,onSelectionContextMenu:S,onSelectionStart:C,onSelectionEnd:P,onEdgeUpdate:Be,onEdgeContextMenu:Ts,onEdgeDoubleClick:$s,onEdgeMouseEnter:Is,onEdgeMouseMove:Rs,onEdgeMouseLeave:zs,onEdgeUpdateStart:Ps,onEdgeUpdateEnd:Ds,edgeUpdaterRadius:Hs,defaultMarkerColor:Je,noDragClassName:Vs,noWheelClassName:Fs,noPanClassName:ao,elevateEdgesOnSelect:Gs,rfId:gn,disableKeyboardA11y:co,nodeOrigin:U,nodeExtent:Le}),$.createElement(Ou,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:p,onConnectStart:x,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:g,nodesDraggable:te,nodesConnectable:xe,nodesFocusable:Q,edgesFocusable:ae,edgesUpdatable:De,elementsSelectable:gt,elevateNodesOnSelect:Ws,minZoom:Ke,maxZoom:_e,nodeExtent:Le,onNodesChange:Ls,onEdgesChange:Os,snapToGrid:ie,snapGrid:le,connectionMode:w,translateExtent:Qe,connectOnClick:Us,defaultEdgeOptions:Zs,fitView:Bs,fitViewOptions:Xs,onNodesDelete:O,onEdgesDelete:H,onNodeDragStart:D,onNodeDrag:I,onNodeDragStop:R,onSelectionDrag:f,onSelectionDragStart:z,onSelectionDragStop:b,noPanClassName:ao,nodeOrigin:U,rfId:gn,autoPanOnConnect:Ks,autoPanOnNodeDrag:Qs,onError:ei,connectionRadius:Js,isValidConnection:js,nodeDragThreshold:ni}),$.createElement(Hu,{onSelectionChange:V}),io,$.createElement(hu,{proOptions:qs,position:Ys}),$.createElement(Uu,{rfId:gn,disableKeyboardA11y:co})))});Kd.displayName="ReactFlow";function lf(){const e=ne();return _.useCallback(t=>{const{domNode:n,updateNodeDimensions:o}=e.getState(),i=(Array.isArray(t)?t:[t]).reduce((s,a)=>{const c=n?.querySelector(`.react-flow__node[data-id="${a}"]`);return c&&s.push({id:a,nodeElement:c,forceUpdate:!0}),s},[]);requestAnimationFrame(()=>o(i))},[])}const Qd=20,he=Xn((e,t)=>({past:[],future:[],present:{nodes:[],edges:[]},canUndo:!1,canRedo:!1,undo:()=>{const{past:n,present:o,future:r}=t();if(n.length===0)return;const i=n[n.length-1],s=n.slice(0,n.length-1);or.setState({nodes:i.nodes,edges:i.edges}),e({past:s,present:i,future:[o,...r],canRedo:!0,canUndo:s.length!==0})},redo:()=>{const{past:n,present:o,future:r}=t();if(r.length===0)return;const i=r[0],s=r.slice(1);or.setState({nodes:i.nodes,edges:i.edges}),e({past:[...n,o],present:i,future:s,canUndo:!0,canRedo:s.length!==0})},reset:()=>{e({past:[],present:{nodes:[],edges:[]},future:[],canUndo:!1,canRedo:!1})},clear:()=>{e({past:[],future:[]})},set:({nodes:n,edges:o})=>{const{past:r,present:i}=t();n===i.nodes&&o===i.edges||e({past:[...r,i].slice(-Qd),present:{nodes:n,edges:o},future:[],canUndo:!0,canRedo:!1})},get:()=>t()}),re);function uf(e){return Math.round((e+Number.EPSILON)*100)/100}function Jd(e,t){let n=e.position.x,o=e.position.y;for(;e.parentNode;){const r=t.find(i=>i.id===r.parentNode);n+=r.position.x,o+=r.position.y}return{x:n,y:o}}function jd(e,t,n=5){const o={horizontal:void 0,vertical:void 0,snapPosition:{x:void 0,y:void 0}},r=t.find(c=>c.id===e.id);if(!r||!e.position)return o;const i={left:e.position.x,right:e.position.x+(r.width??0),top:e.position.y,bottom:e.position.y+(r.height??0),width:r.width??0,height:r.height??0};let s=n,a=n;return t.filter(c=>c.id!==r.id).reduce((c,u)=>{const l={left:u.position.x,right:u.position.x+(u.width??0),top:u.position.y,bottom:u.position.y+(u.height??0),width:u.width??0,height:u.height??0},d=Math.abs(i.left-l.left);d<a&&(c.snapPosition.x=l.left,c.vertical=l.left,a=d);const h=Math.abs(i.right-l.right);h<a&&(c.snapPosition.x=l.right-i.width,c.vertical=l.right,a=h);const p=Math.abs(i.left-l.right);p<a&&(c.snapPosition.x=l.right,c.vertical=l.right,a=p);const x=Math.abs(i.right-l.left);x<a&&(c.snapPosition.x=l.left-i.width,c.vertical=l.left,a=x);const m=Math.abs(i.top-l.top);m<s&&(c.snapPosition.y=l.top,c.horizontal=l.top,s=m);const v=Math.abs(i.bottom-l.top);v<s&&(c.snapPosition.y=l.top-i.height,c.horizontal=l.top,s=v);const g=Math.abs(i.bottom-l.bottom);g<s&&(c.snapPosition.y=l.bottom-i.height,c.horizontal=l.bottom,s=g);const E=Math.abs(i.top-l.bottom);E<s&&(c.snapPosition.y=l.bottom,c.horizontal=l.bottom,s=E);const N=Math.abs(i.left+i.width/2-l.left-l.width/2);N<a&&(c.snapPosition.x=l.left+l.width/2-i.width/2,c.vertical=l.left+l.width/2,a=N);const y=Math.abs(i.top+i.height/2-l.top-l.height/2);return y<s&&(c.snapPosition.y=l.top+l.height/2-i.height/2,c.horizontal=l.top+l.height/2,s=y),c},o)}function er(e){return navigator?.clipboard?.writeText(e)}function tr(e){if(e?.width||e?.height)return{width:e.width||0,height:e.height||0};const t=document.querySelector(`[data-id="${e.id}"]`);if(!t)return{width:0,height:0};const{width:n,height:o}=t.getBoundingClientRect();return{width:n,height:o}}const Me={solid:{strokeDasharray:"0",strokeLinecap:"round",strokeWidth:3.5,stroke:"#2b78e4"},dashed:{strokeDasharray:"0.8 8",strokeLinecap:"round",strokeWidth:3.5,stroke:"#2b78e4"}},nr={arrow:{type:pt.Arrow,width:8,height:8,strokeWidth:2,color:"#2b78e4"},arrowclosed:{type:pt.ArrowClosed,width:6,height:6,strokeWidth:3,color:"#2b78e4"}},ef=[],tf=[],nf={small:{label:"S",size:12},medium:{label:"M",size:17},large:{label:"L",size:20},xlarge:{label:"XL",size:24},xxlarge:{label:"XXL",size:28}},or=Xn((e,t)=>({reactFlow:null,isInteractive:!0,isReadonly:!1,setIsReadonly:n=>e({isReadonly:n}),isSelecting:!1,setIsSelecting:n=>e({isSelecting:n}),handleMiniMapClick:(n,o)=>{const r=t().reactFlow;r?.setCenter(o.x,o.y),r?.zoomTo(1)},deleteSelectedElements:()=>{const n=t().nodes,o=t().edges;t().reactFlow?.deleteElements({nodes:n.filter(a=>a.selected).map(a=>({id:a.id})),edges:[]});const i=n.filter(a=>!a.selected),s=o.filter(a=>!a.selected);he.getState().set({nodes:i,edges:s}),e({nodes:i,edges:s})},selectAllNodes:()=>{const n=t().nodes,o=t().edges;n.length!==0&&(e({nodes:n.map(r=>r.type==="canvas"?r:{...r,selected:!0,focusable:!0}),edges:o.map(r=>({...r,selected:!0,focusable:!0}))}),setTimeout(()=>{document.querySelector(`[data-id="${n[0].id}"]`)?.focus({preventScroll:!0})},0))},setReactFlow:n=>{he.setState({present:{nodes:t().nodes,edges:t().edges}}),e({reactFlow:n})},setIsInteractive:n=>{e({isInteractive:n})},isEdgeUpdated:!0,nodes:ef,edges:tf,setNodes:n=>{e({nodes:n})},setEdges:n=>{e({edges:n})},prevSizes:[],onEdgeUpdateStart:()=>{e({isEdgeUpdated:!1})},resetNodeSize:n=>{const o=t().nodes,r=o.find(a=>a.id===n);let i;const s=void 0;r.type==="paragraph"&&(i=r.width),r.width=i,r.height=s,r.style={...r.style,width:i,height:s},e({nodes:o})},onNodesChange:n=>{const o=t().nodes;if(t().setHelperLineHorizontal(void 0),t().setHelperLineVertical(void 0),n.length===1&&n[0].type==="position"&&n[0].dragging&&n[0].position){const r=n[0],i=o.find(a=>a.id===r.id),s=jd(n[0],o.filter(a=>a.parentNode===i.parentNode),10);if(i.parentNode){const a=o.find(u=>u.id===i.parentNode),c=Jd(a,o);s.vertical&&(s.vertical+=c?.x||0),s.horizontal&&(s.horizontal+=c?.y||0)}t().isSectionDragging||(n[0].position.x=s.snapPosition.x??n[0].position.x,n[0].position.y=s.snapPosition.y??n[0].position.y),t().setHelperLineHorizontal(s.horizontal),t().setHelperLineVertical(s.vertical)}e({nodes:ms(n,o)})},onEdgesChange:n=>{e({edges:rd(n,t().edges)})},onEdgeUpdate:(n,o)=>{t().nodes.find(a=>a.id===o.target)?.type==="subtopic"?(n.style={...Me.dashed,stroke:n?.style?.stroke},n.data={...n.data,edgeStyle:"dashed"}):(n.style={...Me.solid,stroke:n?.style?.stroke},n.data={...n.data,edgeStyle:"solid"}),o={...o,sourceHandle:o.sourceHandle?.replace("1","2")};const s=Cu(n,o,t().edges);he.getState().set({nodes:t().nodes,edges:s}),e({isEdgeUpdated:!0,edges:s})},onEdgeUpdateEnd:(n,o)=>{const r=t().isEdgeUpdated;e(r?{isEdgeUpdated:!0}:{isEdgeUpdated:!0,edges:t().edges.filter(i=>i.id!==o.id)})},onConnect:n=>{const{source:o,target:r}=n,i=t().nodes.find(p=>p.id===o)?.type||"",s=t().nodes.find(p=>p.id===r)?.type||"",a=i==="topic"&&s==="subtopic"||i==="subtopic"&&s==="topic",c=i==="title"&&s==="topic"||i==="topic"&&s==="title",u=i==="topic"&&s==="topic";let l,d;a?(l=Me.dashed,d={edgeStyle:"dashed"}):c?(l=Me.solid,d={edgeStyle:"solid"}):u?(l=Me.solid,d={edgeStyle:"solid"}):(l=Me.dashed,d={edgeStyle:"dashed"}),Object.assign(n,{style:l,data:d});const h=Wr(n,t().edges);he.getState().set({nodes:t().nodes,edges:h}),e({edges:h})},deleteNode:n=>{t().reactFlow?.deleteElements({nodes:[{id:n}],edges:[]});const r=t().nodes.filter(s=>s.id!==n),i=t().edges.filter(s=>s.source!==n&&s.target!==n);he.getState().set({nodes:r,edges:i}),e({nodes:r,edges:i})},helperLineHorizontal:void 0,helperLineVertical:void 0,setHelperLineHorizontal:n=>e({helperLineHorizontal:n}),setHelperLineVertical:n=>e({helperLineVertical:n}),updateNodeLabel:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data={...s.data,label:o}),s));e({nodes:i})},updateNodePosition:(n,o)=>{const r=t().nodes,i=r.find(s=>s.id===n);o?.x&&(i.position.x=o.x),o?.y&&(i.position.y=o.y),e({nodes:r})},updateMultipleNodesPosition:n=>{const o=t().nodes;e({nodes:o.map(r=>{const i=n.find(s=>s.id===r.id);return i?{...r,position:i.position}:r})})},updateNodeSize:(n,o)=>{const r=t().nodes,i=r.find(s=>s.id===n);i.width=o.width||i.width,i.height=o.height||i.height,i.style={...i.style,width:o.width||i.width||0,height:o.height||i.height||0},e({nodes:r})},cutSelectedElements:()=>{const n=t().nodes.filter(s=>s.selected),o=t().edges.filter(s=>s.selected),r=t().nodes.filter(s=>!s.selected),i=t().edges.filter(s=>!s.selected);return he.getState().set({nodes:r,edges:i}),e({nodes:r,edges:i}),{nodes:n,edges:o}},pasteElements:n=>{const o=n.nodes.map(a=>({...a,selected:!0,position:{...a.position,x:a.position.x+10,y:a.position.y+10},data:{...a.data,oldId:a.id},id:mn()})),r=n.edges.map(a=>{const c=o.find(l=>l.data.oldId===a.source),u=o.find(l=>l.data.oldId===a.target);return{...a,selected:!0,source:c?.id,target:u?.id,id:mn()}}),i=t().nodes.map(a=>(a.selected&&(a.selected=!1),a)).concat([...o]),s=t().edges.map(a=>(a.selected&&(a.selected=!1),a)).concat([...r]);er(JSON.stringify({nodes:o,edges:r})).then(()=>{}),he.getState().set({nodes:i,edges:s}),e({nodes:i,edges:s}),setTimeout(()=>{document.querySelector(`[data-id="${o[0].id}"]`)?.focus({preventScroll:!0}),document.querySelector(".react-flow__nodesselection-rect")?.remove()},0)},copySelectedElements:()=>{const n=t().nodes.filter(i=>i.selected),o=t().edges.filter(i=>i.selected);er(JSON.stringify({nodes:n,edges:o})).then(()=>{})},onDragOver:n=>{n.preventDefault(),n.dataTransfer.dropEffect="move"},onSelectionDragStop:()=>{he.getState().set({nodes:t().nodes,edges:t().edges})},updateEdgesStyle:n=>{const r=t().edges.map(i=>(i.selected&&(i.style={...Me[n],stroke:i?.style?.stroke||Me[n]?.stroke},i.data={...i.data,edgeStyle:n}),i));e({edges:r})},updateEdgesMarker:(n,o)=>{const i=t().edges.map(s=>(s.selected&&(o==="end"?s?.markerEnd?.type===n?s.markerEnd=void 0:s.markerEnd={...nr[n],color:s?.style?.stroke}:s?.markerStart?.type===n?s.markerStart=void 0:s.markerStart={...nr[n],color:s?.style?.stroke}),s));e({edges:i})},updateEdgesType:n=>{const r=t().edges.map(i=>(i.selected&&(i.type=n),i));e({edges:r})},updateEdgesColor:n=>{const r=t().edges.map(i=>(i.selected&&(i.style={...i.style,stroke:n},typeof i.markerEnd=="object"&&(i.markerEnd={...i.markerEnd,color:n}),typeof i.markerStart=="object"&&(i.markerStart={...i.markerStart,color:n})),i));e({edges:r})},updateLineStyle:n=>{const r=t().nodes.map(i=>{if(!["horizontal","vertical"].includes(i?.type))return i;if(i.selected){const s=n.type,a=n.stroke||i?.data?.style?.stroke||"black";i.data={...i?.data,style:{...i?.data?.style,...s?Me[s]:{},...a?{stroke:a}:{}}}}return i});e({nodes:r})},addLegendLabel:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data.legends.push(o),s?.height&&s?.style?.height&&(s.height=void 0,s.style={...s.style,height:void 0})),s));e({nodes:i})},deleteLegendLabel:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data={...s.data,legends:s.data.legends.filter(a=>a.id!==o)}),s));e({nodes:i})},updateLegendLabel:(n,o,r)=>{const s=t().nodes.map(a=>(a.id===n&&(a.data={...a.data,legends:a.data.legends.map(c=>c.id!==o?c:{...c,...r})}),a?.data?.legend?.id===o&&(a.data={...a?.data,legend:{...a?.data?.legend,...r}}),a));e({nodes:s})},addChecklistLabel:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&s.data.checklists.push(o),s));e({nodes:i})},deleteChecklistLabel:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data={...s.data,checklists:s.data.checklists.filter(a=>a.id!==o)}),s));e({nodes:i})},updateChecklistLabel:(n,o,r)=>{const s=t().nodes.map(a=>(a.id===n&&(a.data={...a.data,checklists:a.data.checklists.map(c=>c.id!==o?c:{...c,...r})}),a));e({nodes:s})},onResizeEnd:()=>{he.getState().set({nodes:t().nodes,edges:t().edges})},getAllLegendLabels:()=>t().nodes.map(r=>r.type==="legend"?r.data.legends:[]).flat(),addNodeLegend:(n,o)=>{const r=t().nodes,s=t().getAllLegendLabels().find(c=>c.id===o);if(!s)return;const a=r.map(c=>(c.id===n&&(c.data={...c.data,legend:s}),c));e({nodes:a})},deleteNodeLegend:n=>{const r=t().nodes.map(i=>(i.id===n&&(i.data={...i.data,legend:void 0}),i));e({nodes:r})},updateButtonData:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data={...s.data,...o}),s));e({nodes:i})},updateLinksGroupData:(n,o,r)=>{const s=t().nodes.map(a=>(a.id===n&&(a.data={...a.data,links:(a?.data?.links).map(c=>c.id===o?{...c,...r}:c)}),a));e({nodes:s})},addLinksGroupLink:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data={...s.data,links:[...s.data.links,o]}),s));e({nodes:i})},deleteLinksGroupLink:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data={...s.data,links:s?.data?.links?.filter(a=>a.id!==o)}),s));e({nodes:i})},bringNodeForward:n=>{const o=t().nodes,r=o.findIndex(s=>s.id===n);if(r===o.length-1)return;const i=[...o.slice(0,r),o[r+1],o[r],...o.slice(r+2)];e({nodes:i})},sendNodeBackward:n=>{const o=t().nodes,r=o.findIndex(s=>s.id===n);if(r===0)return;const i=[...o.slice(0,r-1),o[r],o[r-1],...o.slice(r+1)];e({nodes:i})},bringNodeToFront:n=>{const o=t().nodes,r=o.findIndex(s=>s.id===n);if(r===o.length-1)return;const i=[...o.slice(0,r),...o.slice(r+1),o[r]];e({nodes:i})},sendNodeToBack:n=>{const o=t().nodes,r=o.findIndex(s=>s.id===n);if(r===0)return;const i=[o[r],...o.slice(0,r),...o.slice(r+1)];e({nodes:i})},updateNodeFontSize:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data={...s.data,style:{...s.data.style,fontSize:nf[o].size}}),s));e({nodes:i})},updateParagraphStyle:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.data={...s.data,style:{...s.data.style,...o}}),s));e({nodes:i})},prevSectionPosition:void 0,sectionNodes:[],isSectionDragging:!1,onNodeDragStart:(n,o,r)=>{if(o?.type==="section"){const i=t().nodes,s=tr(o),a=i.filter(u=>{const l=tr(u);return u.position.x>=o.position.x&&u.position.y>=o.position.y&&u.position.x+l.width<=o.position.x+s.width&&u.position.y+l.height<=o.position.y+s.height}),c=i.map(u=>{const l=a.find(d=>d.id===u.id);if(l){const d=structuredClone(u);return d.position={x:l.position.x,y:l.position.y},d}return u});e({nodes:c,prevSectionPosition:o.position,sectionNodes:a.map(u=>({id:u.id,position:{x:u.position.x,y:u.position.y}}))})}if(n.altKey&&o?.type!=="section"){const i=r.map(l=>{const d=structuredClone(l);return d.id=mn(),d.selected=!1,d.dragging=!1,d.data={...d.data,oldId:l.id},d}),s=t().nodes,a=t().edges,c=s.map(l=>i.find(d=>d.data?.oldId===l.id)||l),u=a.map(l=>{const d=i.find(p=>p.data?.oldId===l.source),h=i.find(p=>p.data?.oldId===l.target);return d||h?{...l,source:d?.id||l.source,target:h?.id||l.target}:l});e({nodes:c.concat(r),edges:u})}},onNodeDrag:(n,o)=>{const r=t().nodes,i=t().prevSectionPosition,s=t().sectionNodes;if(o?.type==="section"&&i){const a={x:o.position.x-i.x,y:o.position.y-i.y},c=r.map(u=>{const l=s.find(d=>d.id===u.id);return l&&(u.position={x:l.position.x+a.x,y:l.position.y+a.y}),u});e({nodes:c,isSectionDragging:!0})}},onNodeDragStop:(n,o)=>{const i=(he.getState().get().present?.nodes||[]).find(a=>a.id===o.id),s=i?.position.x!==o.position.x||i?.position.y!==o.position.y;i&&s&&he.getState().set({nodes:t().nodes,edges:t().edges}),e({prevSectionPosition:void 0,sectionNodes:[],isSectionDragging:!1})},selectNode:n=>{e({nodes:t().nodes.map(o=>(o.id===n?(o.selected=!0,o.focusable=!0):(o.selected=!1,o.focusable=!1),o))})},updateNodeType:(n,o)=>{const i=t().nodes.map(s=>(s.id===n&&(s.type=o),s));e({nodes:i})}}),re);export{af as A,Hn as B,We as C,Eu as D,on as H,fu as P,As as R,$t as S,ne as a,re as b,de as c,cf as d,no as e,ps as f,ct as g,_u as h,ze as i,cd as j,wc as k,ht as l,or as m,lf as n,nf as o,Se as p,mn as q,uf as r,pe as s,X as t,ee as u,Kd as v,Me as w,qr as x,Yr as y,lu as z};
