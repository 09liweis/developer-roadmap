import{j as e}from"./jsx-runtime.BPj4-Rfu.js";import{r as h,R as u}from"./index.SSXOyoI7.js";import{c as he,u as be,g as Ye,a as Te,s as _e,z as qe,P as Ve,b as Le,i as Ke,p as Qe,d as Je,e as et,f as tt,h as st,j as ot,k as nt,l as Be,m as _,A as it,n as rt,r as ve,o as Ee,q as Se,H as p,t as x,R as lt,v as at,S as ct,C as dt}from"./use-editor.84e7Z-56.js";import{c as X}from"./createLucideIcon.BBd35SSe.js";import{t as ut,c as ht}from"./bundle-mjs.CpAuaXBl.js";import{E as mt}from"./ellipsis.CgkBCq1J.js";import{T as pt}from"./trash-2.ZZ91sqU8.js";/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=X("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=X("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=X("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=X("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=X("ArrowUpLeft",[["path",{d:"M7 17V7h10",key:"11bw93"}],["path",{d:"M17 17 7 7",key:"2786uv"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=X("ArrowUpToLine",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=X("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=X("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=X("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=X("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=X("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=X("MoveHorizontal",[["polyline",{points:"18 8 22 12 18 16",key:"1hqrds"}],["polyline",{points:"6 8 2 12 6 16",key:"f0ernq"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=X("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Oe=({id:s,x:n,y:t,width:i,height:l,style:c,color:d,strokeColor:r,strokeWidth:a,className:y,borderRadius:j,shapeRendering:g,onClick:b,selected:f})=>{const{background:k,backgroundColor:C}=c||{},E=d||k||C;return u.createElement("rect",{className:he(["react-flow__minimap-node",{selected:f},y]),x:n,y:t,rx:j,ry:j,width:i,height:l,fill:E,stroke:r,strokeWidth:a,shapeRendering:g,onClick:b?v=>b(v,s):void 0})};Oe.displayName="MiniMapNode";var zt=h.memo(Oe);const Et=s=>s.nodeOrigin,St=s=>s.getNodes().filter(n=>!n.hidden&&n.width&&n.height),Re=s=>s instanceof Function?s:()=>s;function Rt({nodeStrokeColor:s="transparent",nodeColor:n="#e2e2e2",nodeClassName:t="",nodeBorderRadius:i=5,nodeStrokeWidth:l=2,nodeComponent:c=zt,onClick:d}){const r=be(St,Le),a=be(Et),y=Re(n),j=Re(s),g=Re(t),b=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.createElement(u.Fragment,null,r.map(f=>{const{x:k,y:C}=Ye(f,a).positionAbsolute;return u.createElement(c,{key:f.id,x:k,y:C,width:f.width,height:f.height,style:f.style,selected:f.selected,className:g(f),color:y(f),borderRadius:i,strokeColor:j(f),strokeWidth:l,shapeRendering:b,onClick:d,id:f.id})}))}var Mt=h.memo(Rt);const It=200,At=150,Tt=s=>{const n=s.getNodes(),t={x:-s.transform[0]/s.transform[2],y:-s.transform[1]/s.transform[2],width:s.width/s.transform[2],height:s.height/s.transform[2]};return{viewBB:t,boundingRect:n.length>0?Je(et(n,s.nodeOrigin),t):t,rfId:s.rfId}},$t="react-flow__minimap-desc";function Pe({style:s,className:n,nodeStrokeColor:t="transparent",nodeColor:i="#e2e2e2",nodeClassName:l="",nodeBorderRadius:c=5,nodeStrokeWidth:d=2,nodeComponent:r,maskColor:a="rgb(240, 240, 240, 0.6)",maskStrokeColor:y="none",maskStrokeWidth:j=1,position:g="bottom-right",onClick:b,onNodeClick:f,pannable:k=!1,zoomable:C=!1,ariaLabel:E="React Flow mini map",inversePan:v=!1,zoomStep:R=10,offsetScale:M=5}){const z=Te(),L=h.useRef(null),{boundingRect:I,viewBB:U,rfId:$}=be(Tt,Le),Q=s?.width??It,J=s?.height??At,ie=I.width/Q,ee=I.height/J,A=Math.max(ie,ee),Z=A*Q,G=A*J,T=M*A,oe=I.x-(Z-I.width)/2-T,N=I.y-(G-I.height)/2-T,w=Z+T*2,S=G+T*2,V=`${$t}-${$}`,o=h.useRef(0);o.current=A,h.useEffect(()=>{if(L.current){const D=_e(L.current),ne=Y=>{const{transform:te,d3Selection:O,d3Zoom:se}=z.getState();if(Y.sourceEvent.type!=="wheel"||!O||!se)return;const ae=-Y.sourceEvent.deltaY*(Y.sourceEvent.deltaMode===1?.05:Y.sourceEvent.deltaMode?1:.002)*R,ce=te[2]*Math.pow(2,ae);se.scaleTo(O,ce)},le=Y=>{const{transform:te,d3Selection:O,d3Zoom:se,translateExtent:ae,width:ce,height:we}=z.getState();if(Y.sourceEvent.type!=="mousemove"||!O||!se)return;const pe=o.current*Math.max(1,te[2])*(v?-1:1),xe={x:te[0]-Y.sourceEvent.movementX*pe,y:te[1]-Y.sourceEvent.movementY*pe},B=[[0,0],[ce,we]],H=Ke.translate(xe.x,xe.y).scale(te[2]),je=se.constrain()(H,B,ae);se.transform(O,je)},ye=qe().on("zoom",k?le:null).on("zoom.wheel",C?ne:null);return D.call(ye),()=>{D.on("zoom",null)}}},[k,C,v,R]);const m=b?D=>{const ne=Qe(D);b(D,{x:ne[0],y:ne[1]})}:void 0,F=f?(D,ne)=>{const le=z.getState().nodeInternals.get(ne);f(D,le)}:void 0;return u.createElement(Ve,{position:g,style:s,className:he(["react-flow__minimap",n]),"data-testid":"rf__minimap"},u.createElement("svg",{width:Q,height:J,viewBox:`${oe} ${N} ${w} ${S}`,role:"img","aria-labelledby":V,ref:L,onClick:m},E&&u.createElement("title",{id:V},E),u.createElement(Mt,{onClick:F,nodeColor:i,nodeStrokeColor:t,nodeBorderRadius:c,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:r}),u.createElement("path",{className:"react-flow__minimap-mask",d:`M${oe-T},${N-T}h${w+T*2}v${S+T*2}h${-w-T*2}z
        M${U.x},${U.y}h${U.width}v${U.height}h${-U.width}z`,fill:a,fillRule:"evenodd",stroke:y,strokeWidth:j,pointerEvents:"none"})))}Pe.displayName="MiniMap";var Ft=h.memo(Pe);function Bt(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},u.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ht(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},u.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Dt(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},u.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function _t(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},u.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Vt(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},u.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ge=({children:s,className:n,...t})=>u.createElement("button",{type:"button",className:he(["react-flow__controls-button",n]),...t},s);ge.displayName="ControlButton";const Ot=s=>({isInteractive:s.nodesDraggable||s.nodesConnectable||s.elementsSelectable,minZoomReached:s.transform[2]<=s.minZoom,maxZoomReached:s.transform[2]>=s.maxZoom}),We=({style:s,showZoom:n=!0,showFitView:t=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:c,onZoomOut:d,onFitView:r,onInteractiveChange:a,className:y,children:j,position:g="bottom-left"})=>{const b=Te(),[f,k]=h.useState(!1),{isInteractive:C,minZoomReached:E,maxZoomReached:v}=be(Ot,Le),{zoomIn:R,zoomOut:M,fitView:z}=tt();if(h.useEffect(()=>{k(!0)},[]),!f)return null;const L=()=>{R(),c?.()},I=()=>{M(),d?.()},U=()=>{z(l),r?.()},$=()=>{b.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),a?.(!C)};return u.createElement(Ve,{className:he(["react-flow__controls",y]),position:g,style:s,"data-testid":"rf__controls"},n&&u.createElement(u.Fragment,null,u.createElement(ge,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},u.createElement(Bt,null)),u.createElement(ge,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},u.createElement(Ht,null))),t&&u.createElement(ge,{className:"react-flow__controls-fitview",onClick:U,title:"fit view","aria-label":"fit view"},u.createElement(Dt,null)),i&&u.createElement(ge,{className:"react-flow__controls-interactive",onClick:$,title:"toggle interactivity","aria-label":"toggle interactivity"},C?u.createElement(Vt,null):u.createElement(_t,null)),j)};We.displayName="Controls";var Pt=h.memo(We),q;(function(s){s.Lines="lines",s.Dots="dots",s.Cross="cross"})(q||(q={}));function Wt({color:s,dimensions:n,lineWidth:t}){return u.createElement("path",{stroke:s,strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function Ut({color:s,radius:n}){return u.createElement("circle",{cx:n,cy:n,r:n,fill:s})}const Xt={[q.Dots]:"#91919a",[q.Lines]:"#eee",[q.Cross]:"#e2e2e2"},Zt={[q.Dots]:1,[q.Lines]:1,[q.Cross]:6},Gt=s=>({transform:s.transform,patternId:`pattern-${s.rfId}`});function Ue({id:s,variant:n=q.Dots,gap:t=20,size:i,lineWidth:l=1,offset:c=2,color:d,style:r,className:a}){const y=h.useRef(null),{transform:j,patternId:g}=be(Gt,Le),b=d||Xt[n],f=i||Zt[n],k=n===q.Dots,C=n===q.Cross,E=Array.isArray(t)?t:[t,t],v=[E[0]*j[2]||1,E[1]*j[2]||1],R=f*j[2],M=C?[R,R]:v,z=k?[R/c,R/c]:[M[0]/c,M[1]/c];return u.createElement("svg",{className:he(["react-flow__background",a]),style:{...r,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:y,"data-testid":"rf__background"},u.createElement("pattern",{id:g+s,x:j[0]%v[0],y:j[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${z[0]},-${z[1]})`},k?u.createElement(Ut,{color:b,radius:R/c}):u.createElement(Wt,{dimensions:M,color:b,lineWidth:l})),u.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+s})`}))}Ue.displayName="Background";var Yt=h.memo(Ue),de;(function(s){s.Line="line",s.Handle="handle"})(de||(de={}));function qt({width:s,prevWidth:n,height:t,prevHeight:i,invertX:l,invertY:c}){const d=s-n,r=t-i,a=[d>0?1:d<0?-1:0,r>0?1:r<0?-1:0];return d&&l&&(a[0]=a[0]*-1),r&&c&&(a[1]=a[1]*-1),a}const Xe={width:0,height:0,x:0,y:0},Kt={...Xe,pointerX:0,pointerY:0,aspectRatio:1};function Qt({nodeId:s,position:n,variant:t=de.Handle,className:i,style:l={},children:c,color:d,minWidth:r=10,minHeight:a=10,maxWidth:y=Number.MAX_VALUE,maxHeight:j=Number.MAX_VALUE,keepAspectRatio:g=!1,shouldResize:b,onResizeStart:f,onResize:k,onResizeEnd:C}){const E=st(),v=typeof s=="string"?s:E,R=Te(),M=h.useRef(null),z=h.useRef(Kt),L=h.useRef(Xe),I=ot(),U=t===de.Line?"right":"bottom-right",$=n??U;h.useEffect(()=>{if(!M.current||!v)return;const ee=_e(M.current),A=$.includes("right")||$.includes("left"),Z=$.includes("bottom")||$.includes("top"),G=$.includes("left"),T=$.includes("top"),oe=nt().on("start",N=>{const w=R.getState().nodeInternals.get(v),{xSnapped:S,ySnapped:V}=I(N);L.current={width:w?.width??0,height:w?.height??0,x:w?.position.x??0,y:w?.position.y??0},z.current={...L.current,pointerX:S,pointerY:V,aspectRatio:L.current.width/L.current.height},f?.(N,{...L.current})}).on("drag",N=>{const{nodeInternals:w,triggerNodeChanges:S}=R.getState(),{xSnapped:V,ySnapped:o}=I(N),m=w.get(v);if(m){const F=[],{pointerX:D,pointerY:ne,width:le,height:ye,x:Y,y:te,aspectRatio:O}=z.current,{x:se,y:ae,width:ce,height:we}=L.current,pe=Math.floor(A?V-D:0),xe=Math.floor(Z?o-ne:0);let B=Be(le+(G?-pe:pe),r,y),H=Be(ye+(T?-xe:xe),a,j);if(g){const re=B/H,fe=A&&Z,Ne=A&&!Z,ke=Z&&!A;B=re<=O&&fe||ke?H*O:B,H=re>O&&fe||Ne?B/O:H,B>=y?(B=y,H=y/O):B<=r&&(B=r,H=r/O),H>=j?(H=j,B=j*O):H<=a&&(H=a,B=a*O)}const je=B!==ce,$e=H!==we;if(G||T){const re=G?Y-(B-le):Y,fe=T?te-(H-ye):te,Ne=re!==se&&je,ke=fe!==ae&&$e;if(Ne||ke){const ze={id:m.id,type:"position",position:{x:Ne?re:se,y:ke?fe:ae}};F.push(ze),L.current.x=ze.position.x,L.current.y=ze.position.y}}if(je||$e){const re={id:v,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:B,height:H}};F.push(re),L.current.width=B,L.current.height=H}if(F.length===0)return;const Ge=qt({width:L.current.width,prevWidth:ce,height:L.current.height,prevHeight:we,invertX:G,invertY:T}),Fe={...L.current,direction:Ge};if(b?.(N,Fe)===!1)return;k?.(N,Fe),S(F)}}).on("end",N=>{const w={id:v,type:"dimensions",resizing:!1};C?.(N,{...L.current}),R.getState().triggerNodeChanges([w])});return ee.call(oe),()=>{ee.on(".drag",null)}},[v,$,r,a,y,j,g,I,f,k,C]);const Q=$.split("-"),J=t===de.Line?"borderColor":"backgroundColor",ie=d?{...l,[J]:d}:l;return u.createElement("div",{className:he(["react-flow__resize-control","nodrag",...Q,t,i]),ref:M,style:ie},c)}var Ie=h.memo(Qt);const Jt=["top-left","top-right","bottom-left","bottom-right"],es=["top","right","bottom","left"];function Ze({nodeId:s,isVisible:n=!0,handleClassName:t,handleStyle:i,lineClassName:l,lineStyle:c,color:d,minWidth:r=10,minHeight:a=10,maxWidth:y=Number.MAX_VALUE,maxHeight:j=Number.MAX_VALUE,keepAspectRatio:g=!1,shouldResize:b,onResizeStart:f,onResize:k,onResizeEnd:C}){return n?u.createElement(u.Fragment,null,es.map(E=>u.createElement(Ie,{key:E,className:l,style:c,nodeId:s,position:E,variant:de.Line,color:d,minWidth:r,minHeight:a,maxWidth:y,maxHeight:j,onResizeStart:f,keepAspectRatio:g,shouldResize:b,onResize:k,onResizeEnd:C})),Jt.map(E=>u.createElement(Ie,{key:E,className:t,style:i,nodeId:s,position:E,color:d,minWidth:r,minHeight:a,maxWidth:y,maxHeight:j,onResizeStart:f,keepAspectRatio:g,shouldResize:b,onResize:k,onResizeEnd:C}))):null}function P(s){const{position:n="bottom-right"}=s,{onResizeEnd:t,isReadonly:i}=_(l=>({onResizeEnd:l.onResizeEnd,isReadonly:l.isReadonly}));return i?null:e.jsxs(Ie,{className:"h-4 w-4 !border-none !bg-transparent",minHeight:49,minWidth:100,onResizeEnd:t,...s,children:[n==="bottom-right"&&e.jsx(ft,{size:16,className:"absolute bottom-[5px] right-[5px] text-[#2d2d2d]"}),n==="bottom-left"&&e.jsx(xt,{size:16,className:"absolute bottom-[5px] left-[5px] text-[#2d2d2d]"}),n==="top-left"&&e.jsx(yt,{size:16,className:"absolute left-[5px] top-[5px] text-[#2d2d2d]"}),n==="top-right"&&e.jsx(it,{size:16,className:"absolute right-[5px] top-[5px] text-[#2d2d2d]"})]})}const ue={straight:s=>e.jsx("svg",{width:"19",height:"16",viewBox:"0 0 19 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:e.jsx("path",{d:"M2 14.8995L17 1.00001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),step:s=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:e.jsx("path",{d:"M1 1H15L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),smoothstep:s=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:e.jsx("path",{d:"M1 1H9C12.3137 1 15 3.68629 15 7L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),bezier:s=>e.jsx("svg",{width:"22",height:"14",viewBox:"0 0 22 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:e.jsx("path",{d:"M21 1.22971C14.5002 12.2297 11.5 1.7297 6.5 6.72971C1.5 11.7297 0.999758 12.7297 0.999758 12.7297",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),check:s=>e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...s,children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})};function W(...s){return ut(ht(s))}function K(s){const{nodeId:n,top:t=0,left:i,right:l=0,bottom:c}=s,d=_(r=>r.deleteNode);return e.jsxs("div",{className:"bubble-menu absolute flex -translate-y-1/2 translate-x-[20%] transform overflow-hidden rounded-[5px] border-2 border-black bg-white",style:{...t!==void 0&&{top:`${t}px`},...i!==void 0&&{left:`${i}px`},...l!==void 0&&{right:`${l}px`},...c!==void 0&&{bottom:`${c}px`}},children:[e.jsx("button",{className:"nodrag flex h-5 w-5 cursor-pointer items-center justify-center border-r-2 border-black",onClick:()=>{d(n)},children:e.jsx(Ce,{size:14})}),e.jsx("button",{className:"grip-drag-handle flex h-5 w-5 cursor-grab  items-center justify-center",children:e.jsx(kt,{size:14})})]})}function ts(s){const{value:n,onChange:t,id:i}=s;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"block h-4 w-4 rounded shadow",style:{backgroundColor:n}}),e.jsx("input",{id:i,type:"color",value:n?.toUpperCase(),onChange:l=>{t(l.target.value)},className:"absolute inset-0 h-full w-full cursor-pointer opacity-0"})]}),e.jsx("input",{type:"text",className:"w-16 text-sm tabular-nums focus:border-none focus:outline-none",value:n.toUpperCase(),onChange:l=>{t(l.target.value)}})]})}function me(s){const n=document.getElementById(`${s}-label`);n&&n.focus()}h.memo(function(n){const{node:t}=n,i=rt(),{resetNodeSize:l,updateNodeLabel:c,updateNodePosition:d,updateNodeSize:r,updateLineStyle:a,addLegendLabel:y,deleteLegendLabel:j,updateLegendLabel:g,getAllLegendLabels:b,addNodeLegend:f,deleteNodeLegend:k,updateLinksGroupData:C,addLinksGroupLink:E,deleteLinksGroupLink:v,bringNodeForward:R,sendNodeBackward:M,bringNodeToFront:z,sendNodeToBack:L,updateNodeFontSize:I,updateNodeType:U,addChecklistLabel:$,deleteChecklistLabel:Q,updateChecklistLabel:J}=_(o=>({nodes:o.nodes,resetNodeSize:o.resetNodeSize,updateNodeLabel:o.updateNodeLabel,updateNodePosition:o.updateNodePosition,updateNodeSize:o.updateNodeSize,updateLineStyle:o.updateLineStyle,addLegendLabel:o.addLegendLabel,deleteLegendLabel:o.deleteLegendLabel,updateLegendLabel:o.updateLegendLabel,getAllLegendLabels:o.getAllLegendLabels,addNodeLegend:o.addNodeLegend,deleteNodeLegend:o.deleteNodeLegend,updateLinksGroupData:o.updateLinksGroupData,addLinksGroupLink:o.addLinksGroupLink,deleteLinksGroupLink:o.deleteLinksGroupLink,bringNodeForward:o.bringNodeForward,sendNodeBackward:o.sendNodeBackward,bringNodeToFront:o.bringNodeToFront,sendNodeToBack:o.sendNodeToBack,updateNodeFontSize:o.updateNodeFontSize,updateNodeType:o.updateNodeType,addChecklistLabel:o.addChecklistLabel,deleteChecklistLabel:o.deleteChecklistLabel,updateChecklistLabel:o.updateChecklistLabel}));function ie(o){const{value:m}=o.target;c(t.id,m),i(t.id)}function ee(o){const{name:m,value:F}=o.target;d(t.id,{[m]:Number(F)}),i(t.id)}function A(o){const{value:m}=o.target;U(t.id,m),i(t.id)}h.useEffect(()=>{if(!t||t?.width||t?.height)return;const o=document.querySelector(`[data-id="${t.id}"]`);if(!o)return;const{width:m,height:F}=o.getBoundingClientRect();r(t.id,{width:m,height:F}),i(t.id)},[t,r,i]);const Z=["horizontal","vertical"].includes(t?.type),G=t?.type==="legend",T=t?.type==="checklist",oe=t?.type==="linksgroup",N=t?.data?.style?.fontSize,w=["button","paragraph","topic","subtopic","title","section"].includes(t?.type),S=["topic","subtopic"].includes(t?.type),V=b();return e.jsxs(e.Fragment,{children:[!Z&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`${t?.id}-label`,className:"text-xs uppercase text-gray-400",children:"Label"}),e.jsx("input",{type:"text",name:"label",id:`${t?.id}-label`,placeholder:"Enter label",className:"mt-2 flex h-8 items-center rounded border px-2 py-3 text-sm focus:outline-none focus:ring-1 focus:ring-black",value:t.data.label||"",onChange:ie})]}),S?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`${t?.id}-type`,className:"mt-2 text-xs uppercase text-gray-400",children:"Type"}),e.jsxs("select",{id:`${t?.id}-type`,onChange:A,value:t?.type,className:"mt-2 flex h-8 w-full items-center rounded border px-2 text-sm focus:outline-none focus:ring-1 focus:ring-black",children:[e.jsx("option",{value:"topic",children:"Topic"}),e.jsx("option",{value:"subtopic",children:"Subtopic"})]})]}):null,e.jsxs("div",{className:"mt-4 grid w-full grid-cols-2 items-center",children:[e.jsxs("label",{htmlFor:"x",className:"flex items-center",children:[e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center text-xs uppercase text-gray-400",children:"X"}),e.jsx("input",{type:"number",name:"x",id:"x",className:"flex h-8 w-full appearance-none items-center p-1 text-sm focus:outline-none",value:ve(t.position.x||0),onChange:ee})]}),e.jsxs("label",{htmlFor:"y",className:"flex items-center",children:[e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center text-xs uppercase text-gray-400",children:"Y"}),e.jsx("input",{type:"number",name:"y",id:"y",className:"flex h-8 w-full items-center p-1 text-sm focus:outline-none",value:ve(t.position.y),onChange:ee})]})]}),e.jsxs("div",{className:"grid w-full grid-cols-2 items-center",children:[e.jsxs("label",{htmlFor:"width",className:"flex items-center",children:[e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center text-xs uppercase text-gray-400",children:"W"}),e.jsx("input",{type:"number",name:"width",id:"width",className:"flex h-8 w-full items-center p-1 text-sm focus:outline-none",value:ve(t.width||0),onChange:o=>{r(t.id,{width:Number(o.target.value),height:t?.height||0}),i(t.id)}})]}),e.jsxs("label",{htmlFor:"height",className:"flex items-center",children:[e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center text-xs uppercase text-gray-400",children:"H"}),e.jsx("input",{type:"number",name:"height",id:"height",className:"flex h-8 w-full items-center p-1 text-sm focus:outline-none",value:ve(t.height||0),onChange:o=>{r(t.id,{width:t?.width||0,height:Number(o.target.value)}),i(t.id)}})]})]}),e.jsx("div",{className:"mt-5",children:e.jsxs("button",{className:"flex h-8 w-full items-center justify-center rounded-md bg-gray-200 p-1 px-4 text-sm font-medium hover:bg-gray-200/80",onClick:()=>{l(t.id),i(t.id)},children:[e.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Auto-Size"]})}),Z&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Line Style"}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[e.jsxs("button",{className:"flex h-8 items-center justify-center rounded-md bg-gray-200 p-1 text-sm font-medium hover:bg-gray-200/80",onClick:()=>a({type:"solid"}),children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Solid"]}),e.jsxs("button",{className:"flex h-8 items-center justify-center rounded-md bg-gray-200 p-1 text-sm font-medium hover:bg-gray-200/80",onClick:()=>a({type:"dashed"}),children:[e.jsx(mt,{className:"mr-2 h-4 w-4"}),"Dashed"]})]})]}),e.jsxs("div",{className:"mt-5 flex items-center justify-between",children:[e.jsx("label",{htmlFor:"edge-color",className:"text-sm font-medium tracking-tight",children:"Line Color"}),e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx(ts,{id:"border-color",value:(t?.data?.style?.stroke||"#000000").toUpperCase(),onChange:o=>{a({stroke:o})}})})]})]}),e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Layering"}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{z(t.id),i(t.id)},children:e.jsx(wt,{size:14})}),e.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{R(t.id),i(t.id)},children:e.jsx(jt,{size:14})}),e.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{M(t.id),i(t.id)},children:e.jsx(bt,{size:14})}),e.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{L(t.id),i(t.id)},children:e.jsx(gt,{size:14})})]})]}),w&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Font Size"}),e.jsx("div",{className:"mt-2 flex gap-2",children:Object.keys(Ee).map(o=>{const m=o;return e.jsx("button",{disabled:N===Ee[o].size,className:"flex h-6 w-6 min-w-max items-center justify-center rounded-md bg-gray-200 px-1 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{I(t.id,m),i(t.id)},children:e.jsx("span",{className:"text-xs font-medium",children:Ee[m].label})},m)})})]})]}),G&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Add Legends"}),e.jsx("div",{className:"mt-2.5 flex flex-col gap-2",children:t?.data?.legends?.map(o=>e.jsxs("div",{className:"flex items-center justify-between gap-1 rounded-md border",children:[e.jsxs("div",{className:"flex grow items-center",children:[e.jsxs("label",{className:"relative flex h-8 w-8 shrink-0 items-center justify-center",children:[e.jsx("div",{style:{color:o.color||"#000000"},className:"h-4 w-4 shrink-0",children:e.jsx(ue.check,{})}),e.jsx("input",{type:"color",className:"absolute inset-0 h-full w-full cursor-pointer opacity-0",value:o.color||"#000000",onChange:m=>{g(t.id,o.id,{color:m.target.value})}})]}),e.jsx("input",{id:`legend-label-${o.id}`,value:o.label||"",onChange:m=>{g(t.id,o.id,{label:m.target.value})},type:"text",placeholder:"Legend Label",className:"h-8 w-full bg-transparent pr-1.5 text-sm focus-within:outline-none focus-visible:border-none"})]}),e.jsx("button",{onClick:()=>j(t.id,o.id),disabled:t?.data?.legends?.length===1,className:"mr-1 flex h-6 w-6 shrink-0 items-center justify-center rounded border border-red-200 bg-red-100 disabled:cursor-not-allowed disabled:opacity-70",children:e.jsx(Ce,{size:13,className:"text-red-700"})})]},o.id))}),e.jsx("button",{className:"mt-2.5 flex h-8 w-full items-center justify-center rounded border text-sm font-medium hover:bg-gray-100",onClick:()=>{const o=Se();y(t.id,{id:o,label:"",color:"#000"}),setTimeout(()=>{document.getElementById(`legend-label-${o}`)?.focus()},0)},children:"Add Legend"})]})]}),T&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Add Checklists"}),e.jsx("div",{className:"mt-2.5 flex flex-col gap-2",children:t?.data?.checklists?.map(o=>e.jsxs("div",{className:"flex items-center justify-between gap-1 rounded-md border",children:[e.jsx("div",{className:"flex grow items-center",children:e.jsx("input",{id:`checklist-label-${o.id}`,value:o.label||"",onChange:m=>{J(t.id,o.id,{label:m.target.value})},type:"text",placeholder:"Legend Label",className:"h-8 w-full bg-transparent px-1.5 text-sm focus-within:outline-none focus-visible:border-none"})}),e.jsx("button",{onClick:()=>Q(t.id,o.id),disabled:t?.data?.checklists?.length===1,className:"mr-1 flex h-6 w-6 shrink-0 items-center justify-center rounded border border-red-200 bg-red-100 disabled:cursor-not-allowed disabled:opacity-70",children:e.jsx(Ce,{size:13,className:"text-red-700"})})]},o.id))}),e.jsx("button",{className:"mt-2.5 flex h-8 w-full items-center justify-center rounded border text-sm font-medium hover:bg-gray-100",onClick:()=>{const o=Se();$(t.id,{id:o,label:""}),setTimeout(()=>{document.getElementById(`checklist-label-${o}`)?.focus()},0)},children:"Add Checklist"})]})]}),oe&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-xl font-medium tracking-tight",children:"Links Group"}),e.jsx("div",{className:"mt-2.5 flex flex-col gap-2",children:t?.data?.links?.map(o=>e.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden rounded-md border",children:[e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"relative flex grow flex-col gap-1.5",children:[e.jsx("input",{id:`link-label-${o.id}`,value:o.label||"",onChange:m=>{C(t.id,o.id,{label:m.target.value})},type:"text",placeholder:"Link Label",className:"flex h-8 w-full rounded-md border bg-transparent px-3 py-1 pl-7 text-sm transition-colors placeholder:text-gray-600 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-500 disabled:cursor-not-allowed disabled:opacity-50"}),e.jsx("label",{htmlFor:`link-url-${o.id}`,className:"absolute left-[8px] top-[9px]",children:e.jsx(Nt,{className:"h-[14px] w-[14px]"})})]}),e.jsxs("div",{className:"relative mt-2 flex grow flex-col gap-1.5",children:[e.jsx("input",{id:`link-url-${o.id}`,value:o.url||"",onChange:m=>{C(t.id,o.id,{url:m.target.value})},spellCheck:!1,type:"text",placeholder:"Link URL",className:"flex h-8 w-full rounded-md border bg-transparent px-3 py-1 pl-7 text-sm transition-colors placeholder:text-gray-600 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-500 disabled:cursor-not-allowed disabled:opacity-50"}),e.jsx("label",{htmlFor:`link-url-${o.id}`,className:"absolute left-[8px] top-[9px]",children:e.jsx(vt,{size:14})})]})]}),e.jsxs("button",{onClick:()=>v(t.id,o.id),disabled:t?.data?.links?.length===1,className:"flex h-7 w-full shrink-0 items-center justify-center border-t border-red-200 bg-red-100 text-red-700 disabled:cursor-not-allowed disabled:opacity-70",children:[e.jsx(Ce,{size:13}),e.jsx("span",{className:"ml-2 text-sm",children:"Remove"})]})]},o.id))}),e.jsx("button",{className:"mt-2.5 flex h-8 w-full items-center justify-center rounded border text-sm font-medium hover:bg-gray-100",onClick:()=>{const o=Se();E(t.id,{id:o,label:"New Link",url:""}),setTimeout(()=>{document.getElementById(`link-label-${o}`)?.focus()},0)},children:"Add Link"})]}),S&&V.length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Select Legend"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[b().map(o=>{const m=t?.data?.legend?.id===o?.id;return e.jsxs("button",{className:W("flex h-9 w-full items-center gap-1.5 rounded-md border border-dashed p-1 px-2 hover:bg-gray-100 aria-selected:bg-gray-100",m?"border-solid border-black":"border-dashed"),"aria-selected":t?.data?.legend?.id===o?.id,onClick:()=>{m?k(t.id):f(t.id,o.id)},children:[e.jsx(ue.check,{className:"h-4 w-4 shrink-0",style:{color:o.color||"#000000"}}),e.jsx("span",{className:"block truncate text-sm",children:o.label})]},o?.id)}),t?.data?.legend&&e.jsxs("button",{className:"flex h-9 w-full items-center gap-1.5 rounded-md border border-red-300 p-1 px-2 text-sm text-red-700 hover:bg-red-100 disabled:cursor-not-allowed disabled:opacity-70",disabled:!t?.data?.legend,onClick:()=>k(t.id),children:[e.jsx(pt,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"block truncate text-sm",children:"Remove Legend"})]})]})]})]})]})});const ss=h.memo(function(n){const{isReadonly:t}=_(),{data:i,selected:l,id:c}=n,{label:d,legend:r,style:a}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:W("flex h-full cursor-default items-center justify-center rounded-[5px] border-[2.7px] border-black bg-[#fdff00] px-5 py-3 text-sm",l&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":"cursor-pointer hover:bg-[#d6d700]",r&&"!pr-10"),style:{fontSize:a?.fontSize},onDoubleClick:()=>{me(c)},children:d}),r&&e.jsxs("div",{className:"absolute right-3 top-0 flex h-full items-center justify-end",children:[e.jsx(ue.check,{style:{color:r?.color||"#000"},className:"z-10 h-[19px] w-[19px] shrink-0"}),e.jsx("div",{className:"absolute inset-0 flex h-full items-center",children:e.jsx("span",{className:"h-4 w-4 rounded-full border bg-white"})})]}),e.jsx(p,{id:"w1",type:"target",position:x.Top}),e.jsx(p,{id:"x1",type:"target",position:x.Bottom}),e.jsx(p,{id:"y1",type:"target",position:x.Left}),e.jsx(p,{id:"z1",type:"target",position:x.Right}),e.jsx(p,{id:"w2",type:"source",position:x.Top}),e.jsx(p,{id:"x2",type:"source",position:x.Bottom}),e.jsx(p,{id:"y2",type:"source",position:x.Left}),e.jsx(p,{id:"z2",type:"source",position:x.Right}),e.jsx(P,{position:"bottom-right"}),e.jsx(P,{position:"bottom-left"}),e.jsx(K,{nodeId:c})]})})}),os=h.memo(function(n){const{isReadonly:t}=_(),{data:i,selected:l,id:c}=n,{label:d,legend:r,style:a}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:W("flex h-full cursor-default items-center justify-center rounded-[5px] border-[2.7px] border-black bg-[#ffe599] px-5 py-3 text-sm",l&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":"cursor-pointer hover:bg-[#f3c950]",r&&"!pr-10"),style:{fontSize:a?.fontSize},onDoubleClick:()=>{me(c)},children:d}),r&&e.jsxs("div",{className:"absolute right-3 top-0 flex h-full items-center justify-end",children:[e.jsx(ue.check,{style:{color:r?.color||"#000"},className:"z-10 h-[19px] w-[19px] shrink-0"}),e.jsx("div",{className:"absolute inset-0 flex h-full items-center",children:e.jsx("span",{className:"h-4 w-4 rounded-full border bg-white"})})]}),e.jsx(p,{id:"w1",type:"target",position:x.Top}),e.jsx(p,{id:"x1",type:"target",position:x.Bottom}),e.jsx(p,{id:"y1",type:"target",position:x.Left}),e.jsx(p,{id:"z1",type:"target",position:x.Right}),e.jsx(p,{id:"w2",type:"source",position:x.Top}),e.jsx(p,{id:"x2",type:"source",position:x.Bottom}),e.jsx(p,{id:"y2",type:"source",position:x.Left}),e.jsx(p,{id:"z2",type:"source",position:x.Right}),e.jsx(P,{position:"bottom-right"}),e.jsx(P,{position:"bottom-left"}),e.jsx(K,{nodeId:c})]})})}),ns=h.memo(function(n){const{isReadonly:t}=_(),{data:i,selected:l,id:c}=n;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:W("flex h-full cursor-default items-center justify-center rounded-[5px] px-5 py-2.5 text-[28px] leading-[48px]",l&&!t&&"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white"),style:{fontSize:i?.style?.fontSize||28},onDoubleClick:()=>{me(c)},children:i.label}),e.jsx(p,{id:"w1",type:"target",position:x.Top}),e.jsx(p,{id:"x1",type:"target",position:x.Bottom}),e.jsx(p,{id:"y1",type:"target",position:x.Left}),e.jsx(p,{id:"z1",type:"target",position:x.Right}),e.jsx(p,{id:"w2",type:"source",position:x.Top}),e.jsx(p,{id:"x2",type:"source",position:x.Bottom}),e.jsx(p,{id:"y2",type:"source",position:x.Left}),e.jsx(p,{id:"z2",type:"source",position:x.Right}),e.jsx(K,{nodeId:n.id})]})})}),is=h.memo(function(n){const{data:{style:t},selected:i}=n,{onResizeEnd:l,isReadonly:c}=_(d=>({onResizeEnd:d.onResizeEnd,isReadonly:d.isReadonly}));return e.jsxs("div",{children:[e.jsx("div",{className:W("horizontal-line flex h-5 w-[inherit] min-w-[50px] items-center justify-stretch",i&&!c&&"selected ring-2 ring-purple-400 ring-offset-2 ring-offset-white"),children:e.jsx("svg",{className:"h-[3px] w-full shrink-0",children:e.jsx("line",{x1:"0",y1:"1.5",x2:"100%",y2:"1.5",style:{strokeLinecap:"round",strokeWidth:3,stroke:"black",...t}})})}),e.jsx(Ze,{color:"#ff0071",onResizeEnd:l,minHeight:20,maxHeight:20,minWidth:50}),e.jsx(K,{top:-20,nodeId:n.id})]})}),rs=h.memo(function(n){const{data:{style:t},selected:i}=n,{onResizeEnd:l,isReadonly:c}=_(d=>({onResizeEnd:d.onResizeEnd,isReadonly:d.isReadonly}));return e.jsxs("div",{className:W("vertical-line flex h-[inherit] min-h-[50px] w-5 items-stretch justify-center",i&&!c&&"selected ring-2 ring-purple-400 ring-offset-2 ring-offset-white"),children:[e.jsx("svg",{className:"h-full w-[3px] shrink-0",children:e.jsx("line",{x1:"1.5",y1:"0",x2:"1.5",y2:"100%",style:{strokeLinecap:"round",strokeWidth:3,stroke:"black",...t}})}),e.jsx(Ze,{color:"#ff0071",onResizeEnd:l,minHeight:50,maxWidth:20,minWidth:20}),e.jsx(K,{top:-20,nodeId:n.id})]})}),ls=h.memo(function(n){const{isReadonly:t}=_(),{data:i,id:l,selected:c}=n,{legends:d=[],label:r}=i;return e.jsxs("div",{className:W("relative h-full min-h-[50px] min-w-[260px] rounded-[5px] border-2 border-black px-6 py-4",c&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":"bg-white"),children:[r&&e.jsx("label",{className:"mb-3 block",children:r}),e.jsx("div",{className:"flex h-full flex-col gap-2",children:d?.map(a=>e.jsxs("button",{className:"flex items-center gap-2",onDoubleClick:()=>{const y=document.getElementById(`legend-label-${a.id}`);y&&y.focus()},children:[e.jsx("div",{style:{color:a.color||"#000000"},className:"relative -top-[1px] h-[19px] w-[19px] shrink-0",children:e.jsx(ue.check,{})}),e.jsx("span",{children:a.label||"Legend Label"})]},a.id))}),e.jsx(P,{minWidth:260,minHeight:60}),e.jsx(K,{nodeId:l})]})}),as=h.memo(function(n){const{isReadonly:t}=_(),{data:i,selected:l,id:c}=n,{label:d,style:r}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full w-full",children:[e.jsx("p",{className:W("flex h-full w-full cursor-default flex-col overflow-hidden rounded-[5px] border-[2.7px] border-transparent p-4 text-sm leading-[1.5]",l&&!t&&"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white"),style:{fontSize:r?.fontSize,borderColor:r?.borderColor,backgroundColor:r?.backgroundColor,color:r?.color,textAlign:r?.textAlign,justifyContent:r?.justifyContent},onDoubleClick:()=>{me(c)},children:d}),e.jsx(p,{id:"w1",type:"target",position:x.Top}),e.jsx(p,{id:"x1",type:"target",position:x.Bottom}),e.jsx(p,{id:"y1",type:"target",position:x.Left}),e.jsx(p,{id:"z1",type:"target",position:x.Right}),e.jsx(p,{id:"w2",type:"source",position:x.Top}),e.jsx(p,{id:"x2",type:"source",position:x.Bottom}),e.jsx(p,{id:"y2",type:"source",position:x.Left}),e.jsx(p,{id:"z2",type:"source",position:x.Right}),e.jsx(P,{position:"bottom-right"}),e.jsx(P,{position:"bottom-left"}),e.jsx(K,{nodeId:c})]})})}),cs=h.memo(function(n){const{isReadonly:t}=_(),{data:i,selected:l,id:c}=n,{label:d,color:r,backgroundColor:a,radius:y,borderColor:j,style:g}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:W("flex h-full cursor-default items-center justify-center rounded-[5px] border-[2.7px] border-black bg-[#fdff00] px-5 py-3 text-sm",l&&!t?"selected ring-2 ring-purple-400 ring-offset-2 ring-offset-white":"cursor-pointer hover:opacity-80"),style:{color:r,backgroundColor:a,borderRadius:`${y}px`,borderColor:j||a,fontSize:g?.fontSize},onDoubleClick:()=>{me(c)},children:d}),e.jsx(p,{id:"w1",type:"target",position:x.Top}),e.jsx(p,{id:"x1",type:"target",position:x.Bottom}),e.jsx(p,{id:"y1",type:"target",position:x.Left}),e.jsx(p,{id:"z1",type:"target",position:x.Right}),e.jsx(p,{id:"w2",type:"source",position:x.Top}),e.jsx(p,{id:"x2",type:"source",position:x.Bottom}),e.jsx(p,{id:"y2",type:"source",position:x.Left}),e.jsx(p,{id:"z2",type:"source",position:x.Right}),e.jsx(P,{}),e.jsx(K,{nodeId:c})]})})}),ds=h.memo(function(n){const{isReadonly:t}=_(),{data:i,selected:l,id:c}=n,{label:d,links:r}=i;return e.jsxs("div",{className:W("relative h-full min-h-[50px] min-w-[260px] rounded-[5px] border-2 border-black px-6 py-4",l&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":"bg-white"),children:[d&&e.jsx("label",{className:"mb-3 block",children:d}),e.jsx("div",{className:"flex h-full flex-col gap-2",children:r?.map(a=>e.jsxs("button",{"data-link-id":a.id,"data-link-url":a.url,className:W("flex items-center gap-2",t&&"cursor-pointer"),onDoubleClick:()=>{const y=document.getElementById(`link-url-${a.id}`);y&&y.focus()},children:[e.jsx("div",{className:"h-4 w-4 shrink-0 text-gray-500",children:e.jsx(ue.check,{})}),e.jsx("span",{children:a.label||"link Label"})]},a.id))}),e.jsx(P,{minWidth:260,minHeight:60}),e.jsx(K,{nodeId:c})]})}),us=h.memo(function(n){const{isReadonly:t}=_(),{data:i,selected:l,id:c}=n,{style:d,label:r}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full w-full",children:[e.jsx("div",{className:W("flex h-full w-full cursor-default flex-col overflow-hidden rounded-[5px] border-[2.7px] border-black p-4 text-sm leading-[1.5]",l&&!t&&"selected ring-2 ring-purple-300 ring-offset-2 ring-offset-white"),style:{borderColor:d?.borderColor,backgroundColor:d?.backgroundColor,borderRadius:d?.borderRadius},onDoubleClick:()=>{me(c)}}),r&&e.jsx("div",{className:"absolute left-0 top-0 -translate-y-full",style:{fontSize:d?.fontSize},children:e.jsx("span",{children:r})}),e.jsx("div",{className:"absolute -top-2 left-0 h-2.5 w-full cursor-grab"}),e.jsx("div",{className:"absolute -bottom-2 left-0 h-2.5 w-full cursor-grab"}),e.jsx("div",{className:"absolute -left-2 top-0 h-full w-2.5 cursor-grab"}),e.jsx("div",{className:"absolute -right-2 top-0 h-full w-2.5 cursor-grab"}),e.jsx(P,{position:"bottom-right"}),e.jsx(P,{position:"bottom-left"}),e.jsx(P,{position:"top-left"}),e.jsx(P,{position:"top-right"}),e.jsx(K,{nodeId:c})]})})});function hs(s,n){const t=h.useRef(),i=h.useRef(s);return h.useEffect(()=>{i.current=s},[s]),h.useEffect(()=>{if(typeof n!="number")return;const l=()=>i.current();return t.current=window.setTimeout(l,n),()=>window.clearTimeout(t.current)},[n]),t}function ms(){return e.jsxs("div",{className:"absolute inset-0 z-50 grid grid-cols-12 grid-rows-[repeat(12,minmax(0,1fr))] gap-2 bg-gray-100 p-10",children:[e.jsx("div",{className:"col-start-5 col-end-9 row-span-1 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-6 col-end-8 row-start-4 row-end-5 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-9 col-end-11 row-start-4 row-end-5 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-9 col-end-11 row-start-3 row-end-4 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-9 col-end-11 row-start-5 row-end-6 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-3 col-end-5 row-start-4 row-end-5 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-3 col-end-5 row-start-3 row-end-4 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-3 col-end-5 row-start-5 row-end-6 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-7 col-end-9 row-start-7 row-end-[8] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-10 col-end-12 row-start-7 row-end-[8] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-10 col-end-12 row-start-[8] row-end-[9] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-7 col-end-9 row-start-[10] row-end-[11] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-4 col-end-6 row-start-[10] row-end-[11] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-4 col-end-6 row-start-[11] row-end-[12] animate-pulse rounded bg-gray-200"})]})}const ps=.45,xs=.15,fs=1,gs=.15,Me=({reactFlowWrapper:s,reactFlow:n,nodes:t,topOffset:i=200,zoom:l=1})=>{if(!n||!s||t?.length===0)return;const c=t?.reduce((f,k)=>f.position.y<k.position.y?f:k),d=t?.reduce((f,k)=>f.position.x+(f?.width??0)>k.position.x+(k?.width??0)?f:k),r=t?.reduce((f,k)=>f.position.x<k.position.x?f:k),j=(s?.current?.getBoundingClientRect()?.height||0)/l/2-i,g=((r?.position?.x||0)+(d?.position?.x||0)+(d?.width||0))/2,b=(c?.position?.y||0)+j;n.setCenter(g,b,{zoom:l})},bs=s=>{const{nodes:n,padding:t=100}=s;if(!n?.length)return{x:0,y:0,measuredWidth:0,measuredHeight:0};const i=n?.reduce((g,b)=>g.position.x<b.position.x?g:b),l=n?.reduce((g,b)=>g.position.y<b.position.y?g:b),c=n?.reduce((g,b)=>g.position.y>b.position.y?g:b),d=n?.reduce((g,b)=>g.position.x+(g?.width??0)>b.position.x+(b?.width??0)?g:b),r=Math.round(d?.position?.x+(d?.width??0)-i?.position?.x)+t*2,a=Math.round(c?.position?.y-l?.position?.y+(c?.height??0))+t*2,y=Math.floor(i.position.x)-t,j=Math.round(l.position.y)-t;return{x:y,y:j,measuredWidth:r,measuredHeight:a}},ys=async s=>{const{fontFamily:n,fontURL:t}=s,i=new FontFace(n,`url(${t})`);await i.load(),document.fonts&&document?.fonts?.add(i)};function ws(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function js(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function Ns(){return typeof navigator<"u"&&(/iPad/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}function ks(){return js()||Ns()}function Ae(){return ws()||ks()}const vs=h.memo(function(n){const{isReadonly:t}=_(),{data:i,id:l,selected:c}=n,{checklists:d=[],label:r}=i;return e.jsxs("div",{className:W("relative h-full min-h-[50px] min-w-[260px] rounded-[5px] px-6 py-4",c&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":""),children:[e.jsx("div",{className:"flex h-full flex-col gap-2",children:d?.map(a=>e.jsxs("div",{onDoubleClick:()=>{const y=document.getElementById(`checklist-label-${a.id}`);y&&y.focus()},className:"flex items-start gap-2.5",children:[e.jsx("button",{"data-checklist-id":a.id,"data-label":a.label,"data-checklist-checkbox":!0,className:"block h-5 w-5 shrink-0 rounded border-2 border-black"}),e.jsx("button",{"data-checklist-id":a.id,"data-label":a.label,"data-checklist-label":!0,className:"text-left",children:a.label||"Checklist Label"})]},a.id))}),e.jsx(P,{minWidth:260,minHeight:60}),e.jsx(K,{nodeId:l})]})}),Cs={title:ns,topic:ss,subtopic:os,horizontal:is,vertical:rs,legend:ls,paragraph:as,button:cs,linksgroup:ds,section:us,checklist:vs},Ls={hideAttribution:!0},zs={stroke:"#2b78e4",strokeWidth:3.5,opacity:.5},Es={style:{stroke:"#2b78e4",strokeWidth:3.5}},He={padding:.1,includeHiddenNodes:!0,maxZoom:1},De=["topic","subtopic","button"],Ss={embedded:{initial:Ae()?ps:fs},modal:{initial:Ae()?.35:.7}},Hs=h.memo(h.forwardRef((s,n)=>{const{variant:t="embedded",roadmap:i,style:l,className:c,onRendered:d,onTopicRightClick:r,onTopicClick:a,onTopicShiftClick:y,onTopicAltClick:j,onButtonNodeClick:g,onLinkClick:b,onChecklistCheckboxClick:f,onChecklistLableClick:k,fontFamily:C="balsamiq",fontURL:E="https://fonts.gstatic.com/s/balsamiqsans/v3/P5sEzZiAbNrN8SB3lQQX7Pncwd4XIA.woff2"}=s,v={min:Ae()?xs:gs,max:1.5,initial:Ss[t].initial||1},{measuredHeight:R}=h.useMemo(()=>bs({nodes:i?.nodes||[],padding:100}),[i?.nodes]),M=h.useRef(null),{reactFlow:z,setIsReadonly:L,nodes:I,edges:U,onNodesChange:$,onEdgesChange:Q,setReactFlow:J,handleMiniMapClick:ie,setIsInteractive:ee}=_(),[A,Z]=h.useState(!0);h.useEffect(()=>{if(!z||!i)return;ys({fontFamily:C,fontURL:E}).then(()=>{});const{nodes:N,edges:w}=i;z.setNodes(N),z.setEdges(w),L(!0)},[i,z]);const G=h.useCallback(()=>{z&&Me({reactFlowWrapper:M,reactFlow:z,nodes:I,topOffset:100,zoom:v.initial})},[z,Me,I]);hs(()=>{!z||!A||(Me({reactFlowWrapper:M,reactFlow:z,nodes:i?.nodes??[],topOffset:100,zoom:v.initial}),d?.(M),Z(!1))},150);const T=h.useCallback((N,w)=>{!w||!De.includes(w?.type||"")||w?.type!=="button"&&(N.preventDefault(),N.stopPropagation(),r?.(N,w))},[]),oe=h.useCallback((N,w)=>{if(!(!w||!De.includes(w?.type||""))){if(N.preventDefault(),N.stopPropagation(),w?.type==="button"){g?.(w.id,w.data?.href??"");return}if(N.shiftKey){y?.(N,w);return}else if(N.altKey){j?.(N,w);return}a?.(N,w)}},[]);return h.useEffect(()=>{if(A)return;const N=document.querySelectorAll("button[data-link-id]")||[],w=S=>{S.preventDefault();const V=S.currentTarget,o=V.dataset.linkId,m=V.dataset.linkUrl;!o||!m||b?.(o,m)};for(const S of N)S.addEventListener("click",w);return()=>{for(const S of N)S.removeEventListener("click",w)}},[A]),h.useEffect(()=>{if(A)return;const N=document.querySelectorAll("button[data-checklist-checkbox]")||[],w=o=>{o.preventDefault();const m=o.currentTarget,F=m.dataset.checklistId,D=m.dataset.label;!F||!D||f?.(o,F,D)},S=document.querySelectorAll("button[data-checklist-label]")||[],V=o=>{o.preventDefault();const m=o.currentTarget,F=m.dataset.checklistId,D=m.dataset.label;!F||!D||k?.(o,F,D)};for(const o of N)o.addEventListener("click",w);for(const o of S)o.addEventListener("click",V);return()=>{for(const o of N)o.removeEventListener("click",w);for(const o of S)o.removeEventListener("click",V)}},[A]),e.jsx("div",{className:W("flex flex-grow flex-row items-stretch",c),style:{height:R*v.initial,...l},ref:n,children:e.jsx(lt,{children:e.jsxs(at,{ref:M,zoomOnDoubleClick:!1,nodes:I,edges:U,onEdgesChange:Q,onNodesChange:$,onInit:J,selectionMode:ct.Partial,nodeTypes:Cs,className:"intersection-flow readonly !overflow-visible",minZoom:v.min,maxZoom:v.max,zoomOnScroll:!1,panActivationKeyCode:"Space",panOnScroll:!1,preventScrolling:!1,panOnDrag:!0,connectionLineStyle:zs,defaultEdgeOptions:Es,connectionMode:dt.Loose,fitView:!0,fitViewOptions:He,selectNodesOnDrag:!1,proOptions:Ls,nodesFocusable:!0,nodesDraggable:!1,onNodeContextMenu:T,onNodeClick:oe,selectionOnDrag:!1,multiSelectionKeyCode:null,selectionKeyCode:null,deleteKeyCode:null,nodesConnectable:!1,zoomOnPinch:!0,children:[A&&e.jsx(ms,{}),e.jsx("div",{className:"sticky right-0 top-3 z-[999] m-3",children:e.jsx(Ft,{position:"top-right",className:"!m-0 hidden w-auto !bg-white md:block",onClick:ie,pannable:!0,zoomable:!0,draggable:!0})}),e.jsx(Pt,{className:"!sticky !bottom-auto left-0 top-3 !m-3 w-[28px] border !bg-transparent !shadow-none",showInteractive:!1,fitViewOptions:He,onFitView:G,onInteractiveChange:ee}),e.jsx(Yt,{color:"white"})]})})})}));export{Hs as R};
