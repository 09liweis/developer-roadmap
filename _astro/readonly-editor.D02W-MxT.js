import{j as e}from"./jsx-runtime.BPj4-Rfu.js";import{r as m,R as u}from"./index.SSXOyoI7.js";import{c as ce,u as fe,g as Ye,a as Ae,s as _e,z as qe,P as Ve,b as Ce,i as Ke,p as Qe,d as Je,e as et,f as tt,h as ot,j as st,k as nt,l as $e,m as $,A as it,n as rt,r as ke,o as ze,q as Be,H as h,t as x,R as lt,v as at,S as dt,C as ct}from"./use-editor.Bp9uaBQ_.js";import{c as O}from"./createLucideIcon.BSeNqbob.js";import{t as ut,c as mt}from"./bundle-mjs.CpAuaXBl.js";import{M as pt}from"./more-horizontal.DZI0tdsB.js";import{T as ht}from"./trash-2.Bp9k6RH3.js";/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=O("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=O("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=O("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=O("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=O("ArrowUpLeft",[["path",{d:"M7 17V7h10",key:"11bw93"}],["path",{d:"M17 17 7 7",key:"2786uv"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=O("ArrowUpToLine",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=O("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=O("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=O("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=O("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=O("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=O("MoveHorizontal",[["polyline",{points:"18 8 22 12 18 16",key:"1hqrds"}],["polyline",{points:"6 8 2 12 6 16",key:"f0ernq"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=O("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Oe=({id:o,x:s,y:t,width:i,height:l,style:a,color:d,strokeColor:r,strokeWidth:c,className:w,borderRadius:j,shapeRendering:g,onClick:b,selected:f})=>{const{background:N,backgroundColor:v}=a||{},S=d||N||v;return u.createElement("rect",{className:ce(["react-flow__minimap-node",{selected:f},w]),x:s,y:t,rx:j,ry:j,width:i,height:l,fill:S,stroke:r,strokeWidth:c,shapeRendering:g,onClick:b?k=>b(k,o):void 0})};Oe.displayName="MiniMapNode";var zt=m.memo(Oe);const St=o=>o.nodeOrigin,Mt=o=>o.getNodes().filter(s=>!s.hidden&&s.width&&s.height),Se=o=>o instanceof Function?o:()=>o;function Rt({nodeStrokeColor:o="transparent",nodeColor:s="#e2e2e2",nodeClassName:t="",nodeBorderRadius:i=5,nodeStrokeWidth:l=2,nodeComponent:a=zt,onClick:d}){const r=fe(Mt,Ce),c=fe(St),w=Se(s),j=Se(o),g=Se(t),b=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.createElement(u.Fragment,null,r.map(f=>{const{x:N,y:v}=Ye(f,c).positionAbsolute;return u.createElement(a,{key:f.id,x:N,y:v,width:f.width,height:f.height,style:f.style,selected:f.selected,className:g(f),color:w(f),borderRadius:i,strokeColor:j(f),strokeWidth:l,shapeRendering:b,onClick:d,id:f.id})}))}var Et=m.memo(Rt);const It=200,At=150,Tt=o=>{const s=o.getNodes(),t={x:-o.transform[0]/o.transform[2],y:-o.transform[1]/o.transform[2],width:o.width/o.transform[2],height:o.height/o.transform[2]};return{viewBB:t,boundingRect:s.length>0?Je(et(s,o.nodeOrigin),t):t,rfId:o.rfId}},Ft="react-flow__minimap-desc";function Pe({style:o,className:s,nodeStrokeColor:t="transparent",nodeColor:i="#e2e2e2",nodeClassName:l="",nodeBorderRadius:a=5,nodeStrokeWidth:d=2,nodeComponent:r,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:w="none",maskStrokeWidth:j=1,position:g="bottom-right",onClick:b,onNodeClick:f,pannable:N=!1,zoomable:v=!1,ariaLabel:S="React Flow mini map",inversePan:k=!1,zoomStep:C=10,offsetScale:T=5}){const M=Ae(),z=m.useRef(null),{boundingRect:R,viewBB:B,rfId:E}=fe(Tt,Ce),G=o?.width??It,q=o?.height??At,P=R.width/G,te=R.height/q,H=Math.max(P,te),W=H*G,U=H*q,y=T*H,L=R.x-(W-R.width)/2-y,n=R.y-(U-R.height)/2-y,p=W+y*2,D=U+y*2,K=`${Ft}-${E}`,ge=m.useRef(0);ge.current=H,m.useEffect(()=>{if(z.current){const Q=_e(z.current),oe=X=>{const{transform:J,d3Selection:F,d3Zoom:ee}=M.getState();if(X.sourceEvent.type!=="wheel"||!F||!ee)return;const re=-X.sourceEvent.deltaY*(X.sourceEvent.deltaMode===1?.05:X.sourceEvent.deltaMode?1:.002)*C,le=J[2]*Math.pow(2,re);ee.scaleTo(F,le)},ie=X=>{const{transform:J,d3Selection:F,d3Zoom:ee,translateExtent:re,width:le,height:we}=M.getState();if(X.sourceEvent.type!=="mousemove"||!F||!ee)return;const me=ge.current*Math.max(1,J[2])*(k?-1:1),pe={x:J[0]-X.sourceEvent.movementX*me,y:J[1]-X.sourceEvent.movementY*me},I=[[0,0],[le,we]],A=Ke.translate(pe.x,pe.y).scale(J[2]),je=ee.constrain()(A,I,re);ee.transform(F,je)},ye=qe().on("zoom",N?ie:null).on("zoom.wheel",v?oe:null);return Q.call(ye),()=>{Q.on("zoom",null)}}},[N,v,k,C]);const be=b?Q=>{const oe=Qe(Q);b(Q,{x:oe[0],y:oe[1]})}:void 0,ne=f?(Q,oe)=>{const ie=M.getState().nodeInternals.get(oe);f(Q,ie)}:void 0;return u.createElement(Ve,{position:g,style:o,className:ce(["react-flow__minimap",s]),"data-testid":"rf__minimap"},u.createElement("svg",{width:G,height:q,viewBox:`${L} ${n} ${p} ${D}`,role:"img","aria-labelledby":K,ref:z,onClick:be},S&&u.createElement("title",{id:K},S),u.createElement(Et,{onClick:ne,nodeColor:i,nodeStrokeColor:t,nodeBorderRadius:a,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:r}),u.createElement("path",{className:"react-flow__minimap-mask",d:`M${L-y},${n-y}h${p+y*2}v${D+y*2}h${-p-y*2}z
        M${B.x},${B.y}h${B.width}v${B.height}h${-B.width}z`,fill:c,fillRule:"evenodd",stroke:w,strokeWidth:j,pointerEvents:"none"})))}Pe.displayName="MiniMap";var $t=m.memo(Pe);function Bt(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},u.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ht(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},u.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Dt(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},u.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function _t(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},u.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Vt(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},u.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const xe=({children:o,className:s,...t})=>u.createElement("button",{type:"button",className:ce(["react-flow__controls-button",s]),...t},o);xe.displayName="ControlButton";const Ot=o=>({isInteractive:o.nodesDraggable||o.nodesConnectable||o.elementsSelectable,minZoomReached:o.transform[2]<=o.minZoom,maxZoomReached:o.transform[2]>=o.maxZoom}),We=({style:o,showZoom:s=!0,showFitView:t=!0,showInteractive:i=!0,fitViewOptions:l,onZoomIn:a,onZoomOut:d,onFitView:r,onInteractiveChange:c,className:w,children:j,position:g="bottom-left"})=>{const b=Ae(),[f,N]=m.useState(!1),{isInteractive:v,minZoomReached:S,maxZoomReached:k}=fe(Ot,Ce),{zoomIn:C,zoomOut:T,fitView:M}=tt();if(m.useEffect(()=>{N(!0)},[]),!f)return null;const z=()=>{C(),a?.()},R=()=>{T(),d?.()},B=()=>{M(l),r?.()},E=()=>{b.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c?.(!v)};return u.createElement(Ve,{className:ce(["react-flow__controls",w]),position:g,style:o,"data-testid":"rf__controls"},s&&u.createElement(u.Fragment,null,u.createElement(xe,{onClick:z,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:k},u.createElement(Bt,null)),u.createElement(xe,{onClick:R,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},u.createElement(Ht,null))),t&&u.createElement(xe,{className:"react-flow__controls-fitview",onClick:B,title:"fit view","aria-label":"fit view"},u.createElement(Dt,null)),i&&u.createElement(xe,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity"},v?u.createElement(Vt,null):u.createElement(_t,null)),j)};We.displayName="Controls";var Pt=m.memo(We),Z;(function(o){o.Lines="lines",o.Dots="dots",o.Cross="cross"})(Z||(Z={}));function Wt({color:o,dimensions:s,lineWidth:t}){return u.createElement("path",{stroke:o,strokeWidth:t,d:`M${s[0]/2} 0 V${s[1]} M0 ${s[1]/2} H${s[0]}`})}function Ut({color:o,radius:s}){return u.createElement("circle",{cx:s,cy:s,r:s,fill:o})}const Xt={[Z.Dots]:"#91919a",[Z.Lines]:"#eee",[Z.Cross]:"#e2e2e2"},Zt={[Z.Dots]:1,[Z.Lines]:1,[Z.Cross]:6},Gt=o=>({transform:o.transform,patternId:`pattern-${o.rfId}`});function Ue({id:o,variant:s=Z.Dots,gap:t=20,size:i,lineWidth:l=1,offset:a=2,color:d,style:r,className:c}){const w=m.useRef(null),{transform:j,patternId:g}=fe(Gt,Ce),b=d||Xt[s],f=i||Zt[s],N=s===Z.Dots,v=s===Z.Cross,S=Array.isArray(t)?t:[t,t],k=[S[0]*j[2]||1,S[1]*j[2]||1],C=f*j[2],T=v?[C,C]:k,M=N?[C/a,C/a]:[T[0]/a,T[1]/a];return u.createElement("svg",{className:ce(["react-flow__background",c]),style:{...r,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:w,"data-testid":"rf__background"},u.createElement("pattern",{id:g+o,x:j[0]%k[0],y:j[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},N?u.createElement(Ut,{color:b,radius:C/a}):u.createElement(Wt,{dimensions:T,color:b,lineWidth:l})),u.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+o})`}))}Ue.displayName="Background";var Yt=m.memo(Ue),ae;(function(o){o.Line="line",o.Handle="handle"})(ae||(ae={}));function qt({width:o,prevWidth:s,height:t,prevHeight:i,invertX:l,invertY:a}){const d=o-s,r=t-i,c=[d>0?1:d<0?-1:0,r>0?1:r<0?-1:0];return d&&l&&(c[0]=c[0]*-1),r&&a&&(c[1]=c[1]*-1),c}const Xe={width:0,height:0,x:0,y:0},Kt={...Xe,pointerX:0,pointerY:0,aspectRatio:1};function Qt({nodeId:o,position:s,variant:t=ae.Handle,className:i,style:l={},children:a,color:d,minWidth:r=10,minHeight:c=10,maxWidth:w=Number.MAX_VALUE,maxHeight:j=Number.MAX_VALUE,keepAspectRatio:g=!1,shouldResize:b,onResizeStart:f,onResize:N,onResizeEnd:v}){const S=ot(),k=typeof o=="string"?o:S,C=Ae(),T=m.useRef(null),M=m.useRef(Kt),z=m.useRef(Xe),R=st(),B=t===ae.Line?"right":"bottom-right",E=s??B;m.useEffect(()=>{if(!T.current||!k)return;const te=_e(T.current),H=E.includes("right")||E.includes("left"),W=E.includes("bottom")||E.includes("top"),U=E.includes("left"),y=E.includes("top"),L=nt().on("start",n=>{const p=C.getState().nodeInternals.get(k),{xSnapped:D,ySnapped:K}=R(n);z.current={width:p?.width??0,height:p?.height??0,x:p?.position.x??0,y:p?.position.y??0},M.current={...z.current,pointerX:D,pointerY:K,aspectRatio:z.current.width/z.current.height},f?.(n,{...z.current})}).on("drag",n=>{const{nodeInternals:p,triggerNodeChanges:D}=C.getState(),{xSnapped:K,ySnapped:ge}=R(n),be=p.get(k);if(be){const ne=[],{pointerX:Q,pointerY:oe,width:ie,height:ye,x:X,y:J,aspectRatio:F}=M.current,{x:ee,y:re,width:le,height:we}=z.current,me=Math.floor(H?K-Q:0),pe=Math.floor(W?ge-oe:0);let I=$e(ie+(U?-me:me),r,w),A=$e(ye+(y?-pe:pe),c,j);if(g){const se=I/A,he=H&&W,Ne=H&&!W,ve=W&&!H;I=se<=F&&he||ve?A*F:I,A=se>F&&he||Ne?I/F:A,I>=w?(I=w,A=w/F):I<=r&&(I=r,A=r/F),A>=j?(A=j,I=j*F):A<=c&&(A=c,I=c*F)}const je=I!==le,Te=A!==we;if(U||y){const se=U?X-(I-ie):X,he=y?J-(A-ye):J,Ne=se!==ee&&je,ve=he!==re&&Te;if(Ne||ve){const Le={id:be.id,type:"position",position:{x:Ne?se:ee,y:ve?he:re}};ne.push(Le),z.current.x=Le.position.x,z.current.y=Le.position.y}}if(je||Te){const se={id:k,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:I,height:A}};ne.push(se),z.current.width=I,z.current.height=A}if(ne.length===0)return;const Ge=qt({width:z.current.width,prevWidth:le,height:z.current.height,prevHeight:we,invertX:U,invertY:y}),Fe={...z.current,direction:Ge};if(b?.(n,Fe)===!1)return;N?.(n,Fe),D(ne)}}).on("end",n=>{const p={id:k,type:"dimensions",resizing:!1};v?.(n,{...z.current}),C.getState().triggerNodeChanges([p])});return te.call(L),()=>{te.on(".drag",null)}},[k,E,r,c,w,j,g,R,f,N,v]);const G=E.split("-"),q=t===ae.Line?"borderColor":"backgroundColor",P=d?{...l,[q]:d}:l;return u.createElement("div",{className:ce(["react-flow__resize-control","nodrag",...G,t,i]),ref:T,style:P},a)}var Ee=m.memo(Qt);const Jt=["top-left","top-right","bottom-left","bottom-right"],eo=["top","right","bottom","left"];function Ze({nodeId:o,isVisible:s=!0,handleClassName:t,handleStyle:i,lineClassName:l,lineStyle:a,color:d,minWidth:r=10,minHeight:c=10,maxWidth:w=Number.MAX_VALUE,maxHeight:j=Number.MAX_VALUE,keepAspectRatio:g=!1,shouldResize:b,onResizeStart:f,onResize:N,onResizeEnd:v}){return s?u.createElement(u.Fragment,null,eo.map(S=>u.createElement(Ee,{key:S,className:l,style:a,nodeId:o,position:S,variant:ae.Line,color:d,minWidth:r,minHeight:c,maxWidth:w,maxHeight:j,onResizeStart:f,keepAspectRatio:g,shouldResize:b,onResize:N,onResizeEnd:v})),Jt.map(S=>u.createElement(Ee,{key:S,className:t,style:i,nodeId:o,position:S,color:d,minWidth:r,minHeight:c,maxWidth:w,maxHeight:j,onResizeStart:f,keepAspectRatio:g,shouldResize:b,onResize:N,onResizeEnd:v}))):null}function _(o){const{position:s="bottom-right"}=o,{onResizeEnd:t,isReadonly:i}=$(l=>({onResizeEnd:l.onResizeEnd,isReadonly:l.isReadonly}));return i?null:e.jsxs(Ee,{className:"h-4 w-4 !border-none !bg-transparent",minHeight:49,minWidth:100,onResizeEnd:t,...o,children:[s==="bottom-right"&&e.jsx(ft,{size:16,className:"absolute bottom-[5px] right-[5px] text-[#2d2d2d]"}),s==="bottom-left"&&e.jsx(xt,{size:16,className:"absolute bottom-[5px] left-[5px] text-[#2d2d2d]"}),s==="top-left"&&e.jsx(yt,{size:16,className:"absolute left-[5px] top-[5px] text-[#2d2d2d]"}),s==="top-right"&&e.jsx(it,{size:16,className:"absolute right-[5px] top-[5px] text-[#2d2d2d]"})]})}const de={straight:o=>e.jsx("svg",{width:"19",height:"16",viewBox:"0 0 19 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o,children:e.jsx("path",{d:"M2 14.8995L17 1.00001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),step:o=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o,children:e.jsx("path",{d:"M1 1H15L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),smoothstep:o=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o,children:e.jsx("path",{d:"M1 1H9C12.3137 1 15 3.68629 15 7L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),bezier:o=>e.jsx("svg",{width:"22",height:"14",viewBox:"0 0 22 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o,children:e.jsx("path",{d:"M21 1.22971C14.5002 12.2297 11.5 1.7297 6.5 6.72971C1.5 11.7297 0.999758 12.7297 0.999758 12.7297",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),check:o=>e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...o,children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})};function V(...o){return ut(mt(o))}function Y(o){const{nodeId:s,top:t=0,left:i,right:l=0,bottom:a}=o,d=$(r=>r.deleteNode);return e.jsxs("div",{className:"bubble-menu absolute flex -translate-y-1/2 translate-x-[20%] transform overflow-hidden rounded-[5px] border-2 border-black bg-white",style:{...t!==void 0&&{top:`${t}px`},...i!==void 0&&{left:`${i}px`},...l!==void 0&&{right:`${l}px`},...a!==void 0&&{bottom:`${a}px`}},children:[e.jsx("button",{className:"nodrag flex h-5 w-5 cursor-pointer items-center justify-center border-r-2 border-black",onClick:()=>{d(s)},children:e.jsx(Re,{size:14})}),e.jsx("button",{className:"grip-drag-handle flex h-5 w-5 cursor-grab  items-center justify-center",children:e.jsx(vt,{size:14})})]})}function to(o){const{value:s,onChange:t,id:i}=o;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"block h-4 w-4 rounded shadow",style:{backgroundColor:s}}),e.jsx("input",{id:i,type:"color",value:s?.toUpperCase(),onChange:l=>{t(l.target.value)},className:"absolute inset-0 h-full w-full cursor-pointer opacity-0"})]}),e.jsx("input",{type:"text",className:"w-16 text-sm tabular-nums focus:border-none focus:outline-none",value:s.toUpperCase(),onChange:l=>{t(l.target.value)}})]})}function ue(o){const s=document.getElementById(`${o}-label`);s&&s.focus()}m.memo(function(s){const{node:t}=s,i=rt(),{resetNodeSize:l,updateNodeLabel:a,updateNodePosition:d,updateNodeSize:r,updateLineStyle:c,addLegendLabel:w,deleteLegendLabel:j,updateLegendLabel:g,getAllLegendLabels:b,addNodeLegend:f,deleteNodeLegend:N,updateLinksGroupData:v,addLinksGroupLink:S,deleteLinksGroupLink:k,bringNodeForward:C,sendNodeBackward:T,bringNodeToFront:M,sendNodeToBack:z,updateNodeFontSize:R,updateNodeType:B}=$(n=>({nodes:n.nodes,resetNodeSize:n.resetNodeSize,updateNodeLabel:n.updateNodeLabel,updateNodePosition:n.updateNodePosition,updateNodeSize:n.updateNodeSize,updateLineStyle:n.updateLineStyle,addLegendLabel:n.addLegendLabel,deleteLegendLabel:n.deleteLegendLabel,updateLegendLabel:n.updateLegendLabel,getAllLegendLabels:n.getAllLegendLabels,addNodeLegend:n.addNodeLegend,deleteNodeLegend:n.deleteNodeLegend,updateLinksGroupData:n.updateLinksGroupData,addLinksGroupLink:n.addLinksGroupLink,deleteLinksGroupLink:n.deleteLinksGroupLink,bringNodeForward:n.bringNodeForward,sendNodeBackward:n.sendNodeBackward,bringNodeToFront:n.bringNodeToFront,sendNodeToBack:n.sendNodeToBack,updateNodeFontSize:n.updateNodeFontSize,updateNodeType:n.updateNodeType}));function E(n){const{value:p}=n.target;a(t.id,p),i(t.id)}function G(n){const{name:p,value:D}=n.target;d(t.id,{[p]:Number(D)}),i(t.id)}function q(n){const{value:p}=n.target;B(t.id,p),i(t.id)}m.useEffect(()=>{if(!t||t?.width||t?.height)return;const n=document.querySelector(`[data-id="${t.id}"]`);if(!n)return;const{width:p,height:D}=n.getBoundingClientRect();r(t.id,{width:p,height:D}),i(t.id)},[t,r,i]);const P=["horizontal","vertical"].includes(t?.type),te=t?.type==="legend",H=t?.type==="linksgroup",W=t?.data?.style?.fontSize,U=["button","paragraph","topic","subtopic","title","section"].includes(t?.type),y=["topic","subtopic"].includes(t?.type),L=b();return e.jsxs(e.Fragment,{children:[!P&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`${t?.id}-label`,className:"text-xs uppercase text-gray-400",children:"Label"}),e.jsx("input",{type:"text",name:"label",id:`${t?.id}-label`,placeholder:"Enter label",className:"mt-2 flex h-8 items-center rounded border px-2 py-3 text-sm focus:outline-none focus:ring-1 focus:ring-black",value:t.data.label||"",onChange:E})]}),y?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:`${t?.id}-type`,className:"mt-2 text-xs uppercase text-gray-400",children:"Type"}),e.jsxs("select",{id:`${t?.id}-type`,onChange:q,value:t?.type,className:"mt-2 flex h-8 w-full items-center rounded border px-2 text-sm focus:outline-none focus:ring-1 focus:ring-black",children:[e.jsx("option",{value:"topic",children:"Topic"}),e.jsx("option",{value:"subtopic",children:"Subtopic"})]})]}):null,e.jsxs("div",{className:"mt-4 grid w-full grid-cols-2 items-center",children:[e.jsxs("label",{htmlFor:"x",className:"flex items-center",children:[e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center text-xs uppercase text-gray-400",children:"X"}),e.jsx("input",{type:"number",name:"x",id:"x",className:"flex h-8 w-full appearance-none items-center p-1 text-sm focus:outline-none",value:ke(t.position.x||0),onChange:G})]}),e.jsxs("label",{htmlFor:"y",className:"flex items-center",children:[e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center text-xs uppercase text-gray-400",children:"Y"}),e.jsx("input",{type:"number",name:"y",id:"y",className:"flex h-8 w-full items-center p-1 text-sm focus:outline-none",value:ke(t.position.y),onChange:G})]})]}),e.jsxs("div",{className:"grid w-full grid-cols-2 items-center",children:[e.jsxs("label",{htmlFor:"width",className:"flex items-center",children:[e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center text-xs uppercase text-gray-400",children:"W"}),e.jsx("input",{type:"number",name:"width",id:"width",className:"flex h-8 w-full items-center p-1 text-sm focus:outline-none",value:ke(t.width||0),onChange:n=>{r(t.id,{width:Number(n.target.value),height:t?.height||0}),i(t.id)}})]}),e.jsxs("label",{htmlFor:"height",className:"flex items-center",children:[e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center text-xs uppercase text-gray-400",children:"H"}),e.jsx("input",{type:"number",name:"height",id:"height",className:"flex h-8 w-full items-center p-1 text-sm focus:outline-none",value:ke(t.height||0),onChange:n=>{r(t.id,{width:t?.width||0,height:Number(n.target.value)}),i(t.id)}})]})]}),e.jsx("div",{className:"mt-5",children:e.jsxs("button",{className:"flex h-8 w-full items-center justify-center rounded-md bg-gray-200 p-1 px-4 text-sm font-medium hover:bg-gray-200/80",onClick:()=>{l(t.id),i(t.id)},children:[e.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Auto-Size"]})}),P&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Line Style"}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[e.jsxs("button",{className:"flex h-8 items-center justify-center rounded-md bg-gray-200 p-1 text-sm font-medium hover:bg-gray-200/80",onClick:()=>c({type:"solid"}),children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Solid"]}),e.jsxs("button",{className:"flex h-8 items-center justify-center rounded-md bg-gray-200 p-1 text-sm font-medium hover:bg-gray-200/80",onClick:()=>c({type:"dashed"}),children:[e.jsx(pt,{className:"mr-2 h-4 w-4"}),"Dashed"]})]})]}),e.jsxs("div",{className:"mt-5 flex items-center justify-between",children:[e.jsx("label",{htmlFor:"edge-color",className:"text-sm font-medium tracking-tight",children:"Line Color"}),e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx(to,{id:"border-color",value:(t?.data?.style?.stroke||"#000000").toUpperCase(),onChange:n=>{c({stroke:n})}})})]})]}),e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Layering"}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{M(t.id),i(t.id)},children:e.jsx(wt,{size:14})}),e.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{C(t.id),i(t.id)},children:e.jsx(jt,{size:14})}),e.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{T(t.id),i(t.id)},children:e.jsx(bt,{size:14})}),e.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{z(t.id),i(t.id)},children:e.jsx(gt,{size:14})})]})]}),U&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Font Size"}),e.jsx("div",{className:"mt-2 flex gap-2",children:Object.keys(ze).map(n=>{const p=n;return e.jsx("button",{disabled:W===ze[n].size,className:"flex h-6 w-6 min-w-max items-center justify-center rounded-md bg-gray-200 px-1 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{R(t.id,p),i(t.id)},children:e.jsx("span",{className:"text-xs font-medium",children:ze[p].label})},p)})})]})]}),te&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Add Legends"}),e.jsx("div",{className:"mt-2.5 flex flex-col gap-2",children:t?.data?.legends?.map(n=>e.jsxs("div",{className:"flex items-center justify-between gap-1 rounded-md border",children:[e.jsxs("div",{className:"flex grow items-center",children:[e.jsxs("label",{className:"relative flex h-8 w-8 shrink-0 items-center justify-center",children:[e.jsx("div",{style:{color:n.color||"#000000"},className:"h-4 w-4 shrink-0",children:e.jsx(de.check,{})}),e.jsx("input",{type:"color",className:"absolute inset-0 h-full w-full cursor-pointer opacity-0",value:n.color||"#000000",onChange:p=>{g(t.id,n.id,{color:p.target.value})}})]}),e.jsx("input",{id:`legend-label-${n.id}`,value:n.label||"",onChange:p=>{g(t.id,n.id,{label:p.target.value})},type:"text",placeholder:"Legend Label",className:"h-8 w-full bg-transparent pr-1.5 text-sm focus-within:outline-none focus-visible:border-none"})]}),e.jsx("button",{onClick:()=>j(t.id,n.id),disabled:t?.data?.legends?.length===1,className:"mr-1 flex h-6 w-6 shrink-0 items-center justify-center rounded border border-red-200 bg-red-100 disabled:cursor-not-allowed disabled:opacity-70",children:e.jsx(Re,{size:13,className:"text-red-700"})})]},n.id))}),e.jsx("button",{className:"mt-2.5 flex h-8 w-full items-center justify-center rounded border text-sm font-medium hover:bg-gray-100",onClick:()=>{const n=Be();w(t.id,{id:n,label:"",color:"#000"}),setTimeout(()=>{document.getElementById(`legend-label-${n}`)?.focus()},0)},children:"Add Legend"})]})]}),H&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-xl font-medium tracking-tight",children:"Links Group"}),e.jsx("div",{className:"mt-2.5 flex flex-col gap-2",children:t?.data?.links?.map(n=>e.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden rounded-md border",children:[e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"relative flex grow flex-col gap-1.5",children:[e.jsx("input",{id:`link-label-${n.id}`,value:n.label||"",onChange:p=>{v(t.id,n.id,{label:p.target.value})},type:"text",placeholder:"Link Label",className:"flex h-8 w-full rounded-md border bg-transparent px-3 py-1 pl-7 text-sm transition-colors placeholder:text-gray-600 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-500 disabled:cursor-not-allowed disabled:opacity-50"}),e.jsx("label",{htmlFor:`link-url-${n.id}`,className:"absolute left-[8px] top-[9px]",children:e.jsx(Nt,{className:"h-[14px] w-[14px]"})})]}),e.jsxs("div",{className:"relative mt-2 flex grow flex-col gap-1.5",children:[e.jsx("input",{id:`link-url-${n.id}`,value:n.url||"",onChange:p=>{v(t.id,n.id,{url:p.target.value})},spellCheck:!1,type:"text",placeholder:"Link URL",className:"flex h-8 w-full rounded-md border bg-transparent px-3 py-1 pl-7 text-sm transition-colors placeholder:text-gray-600 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-500 disabled:cursor-not-allowed disabled:opacity-50"}),e.jsx("label",{htmlFor:`link-url-${n.id}`,className:"absolute left-[8px] top-[9px]",children:e.jsx(kt,{size:14})})]})]}),e.jsxs("button",{onClick:()=>k(t.id,n.id),disabled:t?.data?.links?.length===1,className:"flex h-7 w-full shrink-0 items-center justify-center border-t border-red-200 bg-red-100 text-red-700 disabled:cursor-not-allowed disabled:opacity-70",children:[e.jsx(Re,{size:13}),e.jsx("span",{className:"ml-2 text-sm",children:"Remove"})]})]},n.id))}),e.jsx("button",{className:"mt-2.5 flex h-8 w-full items-center justify-center rounded border text-sm font-medium hover:bg-gray-100",onClick:()=>{const n=Be();S(t.id,{id:n,label:"New Link",url:""}),setTimeout(()=>{document.getElementById(`link-label-${n}`)?.focus()},0)},children:"Add Link"})]}),y&&L.length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-5"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xs uppercase text-gray-400",children:"Select Legend"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[b().map(n=>{const p=t?.data?.legend?.id===n?.id;return e.jsxs("button",{className:V("flex h-9 w-full items-center gap-1.5 rounded-md border border-dashed p-1 px-2 hover:bg-gray-100 aria-selected:bg-gray-100",p?"border-solid border-black":"border-dashed"),"aria-selected":t?.data?.legend?.id===n?.id,onClick:()=>{p?N(t.id):f(t.id,n.id)},children:[e.jsx(de.check,{className:"h-4 w-4 shrink-0",style:{color:n.color||"#000000"}}),e.jsx("span",{className:"block truncate text-sm",children:n.label})]},n?.id)}),t?.data?.legend&&e.jsxs("button",{className:"flex h-9 w-full items-center gap-1.5 rounded-md border border-red-300 p-1 px-2 text-sm text-red-700 hover:bg-red-100 disabled:cursor-not-allowed disabled:opacity-70",disabled:!t?.data?.legend,onClick:()=>N(t.id),children:[e.jsx(ht,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"block truncate text-sm",children:"Remove Legend"})]})]})]})]})]})});const oo=m.memo(function(s){const{isReadonly:t}=$(),{data:i,selected:l,id:a}=s,{label:d,legend:r,style:c}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:V("flex h-full cursor-default items-center justify-center rounded-[5px] border-[2.7px] border-black bg-[#fdff00] px-5 py-3 text-sm",l&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":"cursor-pointer hover:bg-[#d6d700]",r&&"!pr-10"),style:{fontSize:c?.fontSize},onDoubleClick:()=>{ue(a)},children:d}),r&&e.jsxs("div",{className:"absolute right-3 top-0 flex h-full items-center justify-end",children:[e.jsx(de.check,{style:{color:r?.color||"#000"},className:"z-10 h-[19px] w-[19px] shrink-0"}),e.jsx("div",{className:"absolute inset-0 flex h-full items-center",children:e.jsx("span",{className:"h-4 w-4 rounded-full border bg-white"})})]}),e.jsx(h,{id:"w1",type:"target",position:x.Top}),e.jsx(h,{id:"x1",type:"target",position:x.Bottom}),e.jsx(h,{id:"y1",type:"target",position:x.Left}),e.jsx(h,{id:"z1",type:"target",position:x.Right}),e.jsx(h,{id:"w2",type:"source",position:x.Top}),e.jsx(h,{id:"x2",type:"source",position:x.Bottom}),e.jsx(h,{id:"y2",type:"source",position:x.Left}),e.jsx(h,{id:"z2",type:"source",position:x.Right}),e.jsx(_,{position:"bottom-right"}),e.jsx(_,{position:"bottom-left"}),e.jsx(Y,{nodeId:a})]})})}),so=m.memo(function(s){const{isReadonly:t}=$(),{data:i,selected:l,id:a}=s,{label:d,legend:r,style:c}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:V("flex h-full cursor-default items-center justify-center rounded-[5px] border-[2.7px] border-black bg-[#ffe599] px-5 py-3 text-sm",l&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":"cursor-pointer hover:bg-[#f3c950]",r&&"!pr-10"),style:{fontSize:c?.fontSize},onDoubleClick:()=>{ue(a)},children:d}),r&&e.jsxs("div",{className:"absolute right-3 top-0 flex h-full items-center justify-end",children:[e.jsx(de.check,{style:{color:r?.color||"#000"},className:"z-10 h-[19px] w-[19px] shrink-0"}),e.jsx("div",{className:"absolute inset-0 flex h-full items-center",children:e.jsx("span",{className:"h-4 w-4 rounded-full border bg-white"})})]}),e.jsx(h,{id:"w1",type:"target",position:x.Top}),e.jsx(h,{id:"x1",type:"target",position:x.Bottom}),e.jsx(h,{id:"y1",type:"target",position:x.Left}),e.jsx(h,{id:"z1",type:"target",position:x.Right}),e.jsx(h,{id:"w2",type:"source",position:x.Top}),e.jsx(h,{id:"x2",type:"source",position:x.Bottom}),e.jsx(h,{id:"y2",type:"source",position:x.Left}),e.jsx(h,{id:"z2",type:"source",position:x.Right}),e.jsx(_,{position:"bottom-right"}),e.jsx(_,{position:"bottom-left"}),e.jsx(Y,{nodeId:a})]})})}),no=m.memo(function(s){const{isReadonly:t}=$(),{data:i,selected:l,id:a}=s;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:V("flex h-full cursor-default items-center justify-center rounded-[5px] px-5 py-2.5 text-[28px] leading-[48px]",l&&!t&&"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white"),style:{fontSize:i?.style?.fontSize||28},onDoubleClick:()=>{ue(a)},children:i.label}),e.jsx(h,{id:"w1",type:"target",position:x.Top}),e.jsx(h,{id:"x1",type:"target",position:x.Bottom}),e.jsx(h,{id:"y1",type:"target",position:x.Left}),e.jsx(h,{id:"z1",type:"target",position:x.Right}),e.jsx(h,{id:"w2",type:"source",position:x.Top}),e.jsx(h,{id:"x2",type:"source",position:x.Bottom}),e.jsx(h,{id:"y2",type:"source",position:x.Left}),e.jsx(h,{id:"z2",type:"source",position:x.Right}),e.jsx(Y,{nodeId:s.id})]})})}),io=m.memo(function(s){const{data:{style:t},selected:i}=s,{onResizeEnd:l,isReadonly:a}=$(d=>({onResizeEnd:d.onResizeEnd,isReadonly:d.isReadonly}));return e.jsxs("div",{children:[e.jsx("div",{className:V("horizontal-line flex h-5 w-[inherit] min-w-[50px] items-center justify-stretch",i&&!a&&"selected ring-2 ring-purple-400 ring-offset-2 ring-offset-white"),children:e.jsx("svg",{className:"h-[3px] w-full shrink-0",children:e.jsx("line",{x1:"0",y1:"1.5",x2:"100%",y2:"1.5",style:{strokeLinecap:"round",strokeWidth:3,stroke:"black",...t}})})}),e.jsx(Ze,{color:"#ff0071",onResizeEnd:l,minHeight:20,maxHeight:20,minWidth:50}),e.jsx(Y,{top:-20,nodeId:s.id})]})}),ro=m.memo(function(s){const{data:{style:t},selected:i}=s,{onResizeEnd:l,isReadonly:a}=$(d=>({onResizeEnd:d.onResizeEnd,isReadonly:d.isReadonly}));return e.jsxs("div",{className:V("vertical-line flex h-[inherit] min-h-[50px] w-5 items-stretch justify-center",i&&!a&&"selected ring-2 ring-purple-400 ring-offset-2 ring-offset-white"),children:[e.jsx("svg",{className:"h-full w-[3px] shrink-0",children:e.jsx("line",{x1:"1.5",y1:"0",x2:"1.5",y2:"100%",style:{strokeLinecap:"round",strokeWidth:3,stroke:"black",...t}})}),e.jsx(Ze,{color:"#ff0071",onResizeEnd:l,minHeight:50,maxWidth:20,minWidth:20}),e.jsx(Y,{top:-20,nodeId:s.id})]})}),lo=m.memo(function(s){const{isReadonly:t}=$(),{data:i,id:l,selected:a}=s,{legends:d=[],label:r}=i;return e.jsxs("div",{className:V("relative h-full min-h-[50px] min-w-[260px] rounded-[5px] border-2 border-black px-6 py-4",a&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":"bg-white"),children:[r&&e.jsx("label",{className:"mb-3 block",children:r}),e.jsx("div",{className:"flex h-full flex-col gap-2",children:d?.map(c=>e.jsxs("button",{className:"flex items-center gap-2",onDoubleClick:()=>{const w=document.getElementById(`legend-label-${c.id}`);w&&w.focus()},children:[e.jsx("div",{style:{color:c.color||"#000000"},className:"relative -top-[1px] h-[19px] w-[19px] shrink-0",children:e.jsx(de.check,{})}),e.jsx("span",{children:c.label||"Legend Label"})]},c.id))}),e.jsx(_,{minWidth:260,minHeight:60}),e.jsx(Y,{nodeId:l})]})}),ao=m.memo(function(s){const{isReadonly:t}=$(),{data:i,selected:l,id:a}=s,{label:d,style:r}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full w-full",children:[e.jsx("p",{className:V("flex h-full w-full cursor-default flex-col overflow-hidden rounded-[5px] border-[2.7px] border-transparent p-4 text-sm leading-[1.5]",l&&!t&&"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white"),style:{fontSize:r?.fontSize,borderColor:r?.borderColor,backgroundColor:r?.backgroundColor,color:r?.color,textAlign:r?.textAlign,justifyContent:r?.justifyContent},onDoubleClick:()=>{ue(a)},children:d}),e.jsx(h,{id:"w1",type:"target",position:x.Top}),e.jsx(h,{id:"x1",type:"target",position:x.Bottom}),e.jsx(h,{id:"y1",type:"target",position:x.Left}),e.jsx(h,{id:"z1",type:"target",position:x.Right}),e.jsx(h,{id:"w2",type:"source",position:x.Top}),e.jsx(h,{id:"x2",type:"source",position:x.Bottom}),e.jsx(h,{id:"y2",type:"source",position:x.Left}),e.jsx(h,{id:"z2",type:"source",position:x.Right}),e.jsx(_,{position:"bottom-right"}),e.jsx(_,{position:"bottom-left"}),e.jsx(Y,{nodeId:a})]})})}),co=m.memo(function(s){const{isReadonly:t}=$(),{data:i,selected:l,id:a}=s,{label:d,color:r,backgroundColor:c,radius:w,borderColor:j,style:g}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:V("flex h-full cursor-default items-center justify-center rounded-[5px] border-[2.7px] border-black bg-[#fdff00] px-5 py-3 text-sm",l&&!t?"selected ring-2 ring-purple-400 ring-offset-2 ring-offset-white":"cursor-pointer hover:opacity-80"),style:{color:r,backgroundColor:c,borderRadius:`${w}px`,borderColor:j||c,fontSize:g?.fontSize},onDoubleClick:()=>{ue(a)},children:d}),e.jsx(h,{id:"w1",type:"target",position:x.Top}),e.jsx(h,{id:"x1",type:"target",position:x.Bottom}),e.jsx(h,{id:"y1",type:"target",position:x.Left}),e.jsx(h,{id:"z1",type:"target",position:x.Right}),e.jsx(h,{id:"w2",type:"source",position:x.Top}),e.jsx(h,{id:"x2",type:"source",position:x.Bottom}),e.jsx(h,{id:"y2",type:"source",position:x.Left}),e.jsx(h,{id:"z2",type:"source",position:x.Right}),e.jsx(_,{}),e.jsx(Y,{nodeId:a})]})})}),uo=m.memo(function(s){const{isReadonly:t}=$(),{data:i,selected:l,id:a}=s,{label:d,links:r}=i;return e.jsxs("div",{className:V("relative h-full min-h-[50px] min-w-[260px] rounded-[5px] border-2 border-black px-6 py-4",l&&!t?"selected bg-[#c3c3ff] ring-2 ring-purple-300 ring-offset-2 ring-offset-white":"bg-white"),children:[d&&e.jsx("label",{className:"mb-3 block",children:d}),e.jsx("div",{className:"flex h-full flex-col gap-2",children:r?.map(c=>e.jsxs("button",{"data-link-id":c.id,"data-link-url":c.url,className:V("flex items-center gap-2",t&&"cursor-pointer"),onDoubleClick:()=>{const w=document.getElementById(`link-url-${c.id}`);w&&w.focus()},children:[e.jsx("div",{className:"h-4 w-4 shrink-0 text-gray-500",children:e.jsx(de.check,{})}),e.jsx("span",{children:c.label||"link Label"})]},c.id))}),e.jsx(_,{minWidth:260,minHeight:60}),e.jsx(Y,{nodeId:a})]})}),mo=m.memo(function(s){const{isReadonly:t}=$(),{data:i,selected:l,id:a}=s,{style:d,label:r}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full w-full",children:[e.jsx("div",{className:V("flex h-full w-full cursor-default flex-col overflow-hidden rounded-[5px] border-[2.7px] border-black p-4 text-sm leading-[1.5]",l&&!t&&"selected ring-2 ring-purple-300 ring-offset-2 ring-offset-white"),style:{borderColor:d?.borderColor,backgroundColor:d?.backgroundColor,borderRadius:d?.borderRadius},onDoubleClick:()=>{ue(a)}}),r&&e.jsx("div",{className:"absolute left-0 top-0 -translate-y-full",style:{fontSize:d?.fontSize},children:e.jsx("span",{children:r})}),e.jsx("div",{className:"absolute -top-2 left-0 h-2.5 w-full cursor-grab"}),e.jsx("div",{className:"absolute -bottom-2 left-0 h-2.5 w-full cursor-grab"}),e.jsx("div",{className:"absolute -left-2 top-0 h-full w-2.5 cursor-grab"}),e.jsx("div",{className:"absolute -right-2 top-0 h-full w-2.5 cursor-grab"}),e.jsx(_,{position:"bottom-right"}),e.jsx(_,{position:"bottom-left"}),e.jsx(_,{position:"top-left"}),e.jsx(_,{position:"top-right"}),e.jsx(Y,{nodeId:a})]})})});function po(o,s){const t=m.useRef(),i=m.useRef(o);return m.useEffect(()=>{i.current=o},[o]),m.useEffect(()=>{if(typeof s!="number")return;const l=()=>i.current();return t.current=window.setTimeout(l,s),()=>window.clearTimeout(t.current)},[s]),t}function ho(){return e.jsxs("div",{className:"absolute inset-0 z-50 grid grid-cols-12 grid-rows-[repeat(12,minmax(0,1fr))] gap-2 bg-gray-100 p-10",children:[e.jsx("div",{className:"col-start-5 col-end-9 row-span-1 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-6 col-end-8 row-start-4 row-end-5 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-9 col-end-11 row-start-4 row-end-5 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-9 col-end-11 row-start-3 row-end-4 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-9 col-end-11 row-start-5 row-end-6 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-3 col-end-5 row-start-4 row-end-5 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-3 col-end-5 row-start-3 row-end-4 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-3 col-end-5 row-start-5 row-end-6 animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-7 col-end-9 row-start-7 row-end-[8] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-10 col-end-12 row-start-7 row-end-[8] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-10 col-end-12 row-start-[8] row-end-[9] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-7 col-end-9 row-start-[10] row-end-[11] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-4 col-end-6 row-start-[10] row-end-[11] animate-pulse rounded bg-gray-200"}),e.jsx("div",{className:"col-start-4 col-end-6 row-start-[11] row-end-[12] animate-pulse rounded bg-gray-200"})]})}const xo=.45,fo=.15,go=1,bo=.15,Me=({reactFlowWrapper:o,reactFlow:s,nodes:t,topOffset:i=200,zoom:l=1})=>{if(!s||!o||t?.length===0)return;const a=t?.reduce((f,N)=>f.position.y<N.position.y?f:N),d=t?.reduce((f,N)=>f.position.x+(f?.width??0)>N.position.x+(N?.width??0)?f:N),r=t?.reduce((f,N)=>f.position.x<N.position.x?f:N),j=(o?.current?.getBoundingClientRect()?.height||0)/l/2-i,g=((r?.position?.x||0)+(d?.position?.x||0)+(d?.width||0))/2,b=(a?.position?.y||0)+j;s.setCenter(g,b,{zoom:l})},yo=o=>{const{nodes:s,padding:t=100}=o;if(!s?.length)return{x:0,y:0,measuredWidth:0,measuredHeight:0};const i=s?.reduce((g,b)=>g.position.x<b.position.x?g:b),l=s?.reduce((g,b)=>g.position.y<b.position.y?g:b),a=s?.reduce((g,b)=>g.position.y>b.position.y?g:b),d=s?.reduce((g,b)=>g.position.x+(g?.width??0)>b.position.x+(b?.width??0)?g:b),r=Math.round(d?.position?.x+(d?.width??0)-i?.position?.x)+t*2,c=Math.round(a?.position?.y-l?.position?.y+(a?.height??0))+t*2,w=Math.floor(i.position.x)-t,j=Math.round(l.position.y)-t;return{x:w,y:j,measuredWidth:r,measuredHeight:c}},wo=async o=>{const{fontFamily:s,fontURL:t}=o,i=new FontFace(s,`url(${t})`);await i.load(),document.fonts&&document?.fonts?.add(i)};function jo(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function No(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function vo(){return typeof navigator<"u"&&(/iPad/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}function ko(){return No()||vo()}function Ie(){return jo()||ko()}const Co={title:no,topic:oo,subtopic:so,horizontal:io,vertical:ro,legend:lo,paragraph:ao,button:co,linksgroup:uo,section:mo},Lo={hideAttribution:!0},zo={stroke:"#2b78e4",strokeWidth:3.5,opacity:.5},So={style:{stroke:"#2b78e4",strokeWidth:3.5}},He={padding:.1,includeHiddenNodes:!0,maxZoom:1},De=["topic","subtopic","button"],Mo={embedded:{initial:Ie()?xo:go},modal:{initial:Ie()?.35:.7}},Ho=m.memo(m.forwardRef((o,s)=>{const{variant:t="embedded",roadmap:i,style:l,className:a,onRendered:d,onTopicRightClick:r,onTopicClick:c,onTopicShiftClick:w,onTopicAltClick:j,onButtonNodeClick:g,onLinkClick:b,fontFamily:f="balsamiq",fontURL:N="https://fonts.gstatic.com/s/balsamiqsans/v3/P5sEzZiAbNrN8SB3lQQX7Pncwd4XIA.woff2"}=o,v={min:Ie()?fo:bo,max:1.5,initial:Mo[t].initial||1},{measuredHeight:S}=m.useMemo(()=>yo({nodes:i?.nodes||[],padding:100}),[i?.nodes]),k=m.useRef(null),{reactFlow:C,setIsReadonly:T,nodes:M,edges:z,onNodesChange:R,onEdgesChange:B,setReactFlow:E,handleMiniMapClick:G,setIsInteractive:q}=$(),[P,te]=m.useState(!0);m.useEffect(()=>{if(!C||!i)return;wo({fontFamily:f,fontURL:N}).then(()=>{});const{nodes:y,edges:L}=i;C.setNodes(y),C.setEdges(L),T(!0)},[i,C]);const H=m.useCallback(()=>{C&&Me({reactFlowWrapper:k,reactFlow:C,nodes:M,topOffset:100,zoom:v.initial})},[C,Me,M]);po(()=>{!C||!P||(Me({reactFlowWrapper:k,reactFlow:C,nodes:i?.nodes??[],topOffset:100,zoom:v.initial}),d?.(k),te(!1))},150);const W=m.useCallback((y,L)=>{!L||!De.includes(L?.type||"")||L?.type!=="button"&&(y.preventDefault(),y.stopPropagation(),r?.(y,L))},[]),U=m.useCallback((y,L)=>{if(!(!L||!De.includes(L?.type||""))){if(y.preventDefault(),y.stopPropagation(),L?.type==="button"){g?.(L.id,L.data?.href??"");return}if(y.shiftKey){w?.(y,L);return}else if(y.altKey){j?.(y,L);return}c?.(y,L)}},[]);return m.useEffect(()=>{if(P)return;const y=document.querySelectorAll("button[data-link-id]")||[],L=n=>{n.preventDefault();const p=n.currentTarget,D=p.dataset.linkId,K=p.dataset.linkUrl;!D||!K||b?.(D,K)};for(const n of y)n.addEventListener("click",L);return()=>{for(const n of y)n.removeEventListener("click",L)}},[P]),e.jsx("div",{className:V("flex flex-grow flex-row items-stretch",a),style:{height:S*v.initial,...l},ref:s,children:e.jsx(lt,{children:e.jsxs(at,{ref:k,zoomOnDoubleClick:!1,nodes:M,edges:z,onEdgesChange:B,onNodesChange:R,onInit:E,selectionMode:dt.Partial,nodeTypes:Co,className:"intersection-flow readonly !overflow-visible",minZoom:v.min,maxZoom:v.max,zoomOnScroll:!1,panActivationKeyCode:"Space",panOnScroll:!1,preventScrolling:!1,panOnDrag:!0,connectionLineStyle:zo,defaultEdgeOptions:So,connectionMode:ct.Loose,fitView:!0,fitViewOptions:He,selectNodesOnDrag:!1,proOptions:Lo,nodesFocusable:!0,nodesDraggable:!1,onNodeContextMenu:W,onNodeClick:U,selectionOnDrag:!1,multiSelectionKeyCode:null,selectionKeyCode:null,deleteKeyCode:null,nodesConnectable:!1,zoomOnPinch:!0,children:[P&&e.jsx(ho,{}),e.jsx("div",{className:"sticky right-0 top-3 z-[999] m-3",children:e.jsx($t,{position:"top-right",className:"!m-0 hidden w-auto !bg-white md:block",onClick:G,pannable:!0,zoomable:!0,draggable:!0})}),e.jsx(Pt,{className:"!sticky !bottom-auto left-0 top-3 !m-3 w-[28px] border !bg-transparent !shadow-none",showInteractive:!1,fitViewOptions:He,onFitView:H,onInteractiveChange:q}),e.jsx(Yt,{color:"white"})]})})})}));export{Ho as R};
